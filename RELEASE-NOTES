This file lists interface changes that might affect users in 1.5.0 and
also some known problems in LyX 1.5.0 that did not occur in
1.4.5. Note that fixes are available for many of these, but they have
not yet been applied because of incomplete testing.


Interface changes
-----------------

Some of the LyX functions have changed names :


Known issues with version 1.5.0
------------------------------------

- User layout files must be converted to UTF-8

In previous versions, layout styles were allowed to use non-ASCII names
using the local encodings. LyX-1.5 now assumes that all layout files are
UTF-8 encoded. This means that non-ASCII style names are still allowed
but they must be valid UTF-8 strings. One way of doing the conversion
is to use iconv. Using bash, the script below should work:

#! /bin/sh

cd /path/to/layouts
for l in *
do
  cp "$l" tmp.txt
  iconv -f latin1 -t utf8 tmp.txt -o "$l"
done
rm -f tmp.txt

- Cursor restoration problems with Multiple-View

When using multiple Windows to edit different parts of the
same document, the cursor position is sometimes not correctly restored
when you switch from one view to the other.

- Languages/encodings and insets

One of the bugs fixed in LyX 1.5.0 is that previously, there were certain 
specific cases in which the LaTeX generated did not correctly reflect 
language/encoding transitions in and around insets (footnotes, LyX notes).
After much deliberation, it was decided not to change older files such that
they will still reflect the old LaTeX output; rather, they will now correctly
reflect the situation as it appears in the GUI. This means, however, that if 
you mangled the text in the GUI in the older versions, in order that it
generate the correct LaTeX output, the LaTeX will now generate the mangled 
text. If this is problematic for you, please get in touch with us on the
developers mailing list, we do have some possible solutions for this.

The effects of this will be more pronounced for RTL (Hebrew, Arabic, Farsi) 
users --- though they affect users of other languages as well.

- Inset encodings and Conversion from earlier LyX versions

One of the main new features in version 1.5.0 is Unicode. As part of the
transition, lyx2lyx (the scripts used for converting back and forth between
different versions of the lyx files) converts old .lyx files, which may use 
a number of different encodings, to UTF-8. This conversion depends on
correctly identifying the language of the text. There were previously some
edge-cases (insets embedded in different-language text type scenarios) in 
which the language was incorrectly identified, which caused some text to 
appear incorrectly after having upgraded from older versions. This has now been
fixed. Unfortunately, however, the fix cannot be applied to files which have
already been converted past format 249.  So if you have already converted 
your old files (using a development version or release candidate), this fix
won't help, unless you still have the originals lying around (and haven't 
yet made too many changes to the newer versions ;) ).

Generally, it is probably wise to keep a backup of the old version of your 
files, at least until you are sure that the upgrade went smoothly (which it 
almost always will).


Note: There may later be an updated list of known issues online at
	http://wiki.lyx.org/LyX/ReleaseNotes

