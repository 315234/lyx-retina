1999-11-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/layouts/lyxmacros.inc (lyxcode): set the font with
	\verbatim@font instead of \ttfamily, so that it can be redefined.

	* src/BackStack.h, src/DepTable.C, src/DepTable.h, src/LaTeX.C,
	  src/LaTeX.h, src/lastfiles.C, src/lastfiles.h, src/layout.C,
	  src/layout.h, src/text2.C: add 'using' directive to bring the
	STL templates we need from the std:: namespace to the global one.
	Needed by DEC cxx in strict ansi mode.

	* src/support/LIstream.h,src/support/LOstream.h,
	  src/support/lyxstring.h,src/table.h,
	  src/lyxlookup.h: do not include <config.h> in header
	files. This should be done in the .C files only.

	* development/lyx.spec.in: WHATSNEW has been renamed to NEWS
	(from Kayvan).
	

1999-11-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* config/lib_configure.m4,lib/configure,lib/lyxrc.example: update
	from Kayvan to fix the tth invokation.

	* development/lyx.spec.in: updates from Kayvan to reflect the
	changes of file names.

1999-11-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (InsertStringB): use std::copy
	(InsertStringA): use std::copy

	* src/bufferlist.C: use a vector to store the buffers in. This is
	an internal change and should not affect any other thing.
	
	* src/BufferView.C (waitForX): use XSync instead of the lengthy
	stuff in waitForX.

	* src/text.C (Fill): fix potential bug, one off bug.

1999-11-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/Makefile.am (lyx_main.o): add more files it depends on.

	* src/lyx_cb.C (addNewlineAndDepth): parameters in wrong order.

	* src/support/lyxstring.C: use size_t for the reference count,
	size, reserved memory and xtra.
	(internal_compare): new private member function. Now the compare
	functions should work for std::strings that have embedded '\0'
	characters.
	(compare): all compare functions rewritten to use
	internal_compare.
	
1999-11-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (compare): pass c_str()
	(compare): pass c_str
	(compare): pass c_str

1999-11-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/DebugStream.C: <config.h> was not included correctly.

	* lib/configure: forgot to re-generate it :( I'll make this file
	auto generated soon.

1999-11-03  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* acinclude.m4 (cross_compiling): add -fpermissive when gcc 2.95.x
	is used.

	* src/support/lyxstring.C: some changes from length() to rep->sz.
	avoids a function call.

	* src/support/filetools.C (SpaceLess): yet another version of the
	algorithm...now per Jean-Marc's suggestions.

1999-11-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.C (less_textclass_desc): functor for use in sorting
	of textclasses. 
	(LyXTextClass::Read): sort the textclasses after reading.
	
	* src/support/filetools.C (SpaceLess): new version of the
	SpaceLess functions. What problems does this one give? Please
	report.

	* images/banner_bw.xbm: made the arrays unsigned char *

1999-11-02  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/lyxstring.C (find): remove bogus assertion in the
	two versions of find where this has not been done yet.

	* src/support/lyxlib.h: add missing int return type to
	lyx::chdir(). 

	* src/menus.C (ShowFileMenu): disable exporting to html if no
	html export command is present.

	* config/lib_configure.m4: add a test for an HTML converter. The
	programs checked for are, in this order: tth, latex2html and
	hevea. 

	* lib/configure: generated from config/lib_configure.m4.

	* src/lyxfunc.C (Dispatch): update and improve the execution of an
	html converter. The parameters are now passed through $$FName and
	$$OutName, instead of standard input/output.

	* src/lyxrc.{C,h}: rename \tth_command to \html_command.

	* lib/lyxrc.example: update description of \html_command. 
	add "quotes" around \screen_font_xxx font setting examples to help
	people who use fonts with spaces in their names.

1999-11-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Distribution files: updates for v1.1.2

	* src/support/lyxstring.C (find): remove bogus assert and return
	npos for the same condition.

1999-11-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* added patch for OS/2 from SMiyata.

1999-10-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/text2.C (CutSelection): make space_wrapped a bool
	(CutSelection): dont declare int i until we have to.
	(alphaCounter): return a char const *.

1999-10-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/syscall.C (Systemcalls::kill): 
	  src/support/filetools.C (PutEnv, PutEnvPath): 
	  src/lyx_cb.C (addNewlineAndDepth): 
	  src/FontInfo.C (FontInfo::resize): condition some #warning
	directives with WITH_WARNINGS.
	

1999-10-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.[Ch] + several files: access to class variables
	limited and made accessor functions instead a lot of code changed
	becuase of this. Also instead of returning pointers often a const
	reference is returned instead.
	
	* src/form1.C (create_form_Figure): added a couple fo "no-c-format"

	* src/Makefile.am (dist-hook): added used to remove the CVS from
	cheaders upon creating a dist
	(EXTRA_DIST): added cheaders

	* src/support/lstrings.C (tostr(char)): fix it to handle param as
	a character not as a small integer. 

	* src/support/lyxstring.C (find): removed Assert and added i >=
	rep->sz to the first if.

1999-10-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.[Ch] src/BufferView.C src/LaTeXFeatures.C
	src/LyXView.C src/buffer.C src/bufferparams.C
	src/lyx_cb.C src/lyxfunc.C src/paragraph.C src/text.C 
	src/text2.C src/insets/insetinclude.C:
	lyxlayout renamed to textclasslist.

	* src/layout.C: some lyxerr changes.

	* src/layout.[Ch] (LyXLayout::Read): changed second paramter to
	LyXTextClass. rewrote LT_COPYSTYLE, rewrote LT_OBSOLETEDBY
	(LyXLayoutList): removed all traces of this class.
	(LyXTextClass::Read): rewrote LT_STYLE
	(LyXTextClass::hasLayout): new function
	(LyXTextClass::GetLayout): rewritten to return an iterator + has
	both const and nonconst version.
	(LyXTextClass::delete_layout): new function.
	(LyXTextClassList::Style): bug fix. do the right thing if layout
	is to big.
	(LyXTextClassList::NumberOfLayout): new acces to layoutlist.
	(LyXTextClassList::NameOfLayout): ditto 
	(LyXTextClassList::Load): ditto

	* src/buffer.C (makeLaTeXFile): new access to layoutlist

	* src/LaTeXFeatures.C (getTClassPreamble): new access to layoutlist

	* src/LyXAction.C (LookupFunc): added a workaround for sun
	compiler, on the other hand...we don't know if the current code
	compiles on sun at all...

	* src/support/filetools.C (CleanupPath): subst fix

	* src/insets/insetbib.C (delDatabase): subst fix, this looks
	_really_ weird.

	* src/support/filetools.C (PutEnvPath): subst fix, how come nobody
	complained about this one?

	* src/insets/insetinclude.C (Latex): subst fix

	* src/insets/insetbib.C (getKeys): subst fix

	* src/LyXSendto.C (SendtoApplyCB): subst fix

	* src/lyx_main.C (init): subst fix

	* src/layout.C (Read): subst fix

	* src/lyx_sendfax_main.C (button_send): subst fix

	* src/buffer.C (RoffAsciiTable): subst fix

	* src/lyx_cb.C (MenuFax): subst fix
	(PrintApplyCB): subst fix

1999-10-26  Juergen Vigna  <jug@sad.it>

	* src/table.C (TexEndOfCell) + (DocBookEndOfCell): removed some #if 0

	(Read): Cleaned up this code so now we read only format vestion >= 5

1999-10-26  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.C (PutEnvPath): subst fix for EMX, how
	come nobody has complained about this one?

	* src/insets/insetinclude.C (Latex): subst fix

	* src/insets/insetbib.C (getKeys): subst fix

	* src/lyx_main.C (init): subst fix

	* src/layout.C (Read): subst fix

	* src/buffer.C (RoffAsciiTable): subst fix

	* src/lyx_cb.C (MenuFax): subst fix.

	* src/layout.[hC] + some other files: rewrote to use
	std::container to store textclasses and layouts in.
	Simplified, removed a lot of code. Make all classes
	assignable. Further simplifications and review of type
	use still to be one. 

	* src/menus.C (ShowFileMenu/ShowFileMenu2): Use the iterators from
	lastfiles to create the lastfiles partr of the menu.

	* src/lastfiles.[Ch]: rewritten to use deque to store the
	lastfiles in. Uses fstream for reading and writing. Simplifies
	code.

	* src/support/syscall.C: remove explicit cast.

	* src/BufferView.C (CursorToggleCB): removed code snippets that
	were commented out.
	use explicat C++ style casts instead of C style casts. also use
	u_vdata instea of passing pointers in longs.

	* src/PaperLayout.C: removed code snippets that were commented out.

	* src/lyx_gui_misc.C: removed code snippets that were commented out. 

	* src/lyx_main.C: removed code snippets that wer commented out.

	* src/paragraph.C: removed code snippets that were commented out.

	* src/lyxvc.C (logClose): use static_cast
	(logUpdate): ditto
	(viewLog): remove explicit cast to void*
	(showLog): removed old commented code

	* src/menus.C: use static_cast instead of C style casts. use
	u_vdata instead of u_ldata. remove explicit cast to (long) for
	pointers. Removed old code that was commented out.

	* src/insets/inset.C: removed old commented func

	* src/insets/insetref.C (InsetRef): removed old code that had been
	commented out for a long time.
	(Edit): ditto
	(escape): removed C style cast

	* src/insets/insetlatexaccent.C (Draw): removed old commented code

	* src/insets/insetlatex.C (Draw): removed old commented code
	(Read): rewritten to use string

	* src/insets/insetlabel.C (escape): removed C style cast

	* src/insets/insetindex.h: removed vdata and ldata from FD_index_form

	* src/insets/insetindex.C: use static_cast and u_vdata, removed
	old commented code.

	* src/insets/insetinclude.h: removed a couple of stupid bools

	* src/insets/insetinclude.C (include_cb): use static_cast and u_data.
	(Clone): remove C style cast
	(getKeys): changed list to lst because of std::list

	* src/insets/inseterror.C (Draw): removed som old commented code.

	* src/insets/insetcommand.C (Draw): removed some old commented code.

	* src/insets/insetbib.C (bibitem_cb): removed code that has been
	commented out forever.
	(bibitem_cb): use static_cast instead of C style cast
	use of vdata changed to u_vdata.

	* src/insets/inseturl.C (C_InsetUrl_CloseUrlCB): forward the data
	parameter.
	(CloseUrlCB): use static_cast instead of C style cast.
	(CloseUrlCB): added a fl_free form...it seemed to be missing.

	* src/insets/insetinfo.C (Edit): pass object in u_vdata instead
	(C_InsetInfo_CloseInfoCB): forward the ob parameter
	(CloseInfoCB): static_cast from ob->u_vdata instead.
	(Edit): removed bogus arg from fl_set_object_shortcut, set to 1
	instead. 

	* src/insets/inseterror.C (Edit): pass object in u_vdata instead
	(C_InsetError_CloseErrorCB): forward the ob parameter
	(CloseErrorCB): static_cast from ob->u_vdata instead.

	* src/vspace.h: include LString.h since we use string in this class.

	* src/vspace.C (lyx_advance): changed name from advance because of
	nameclash with stl. And since we cannot use namespaces yet...I
	used a lyx_ prefix instead. Expect this to change when we begin
	using namespaces.

	* src/BufferView.[Ch] (BufferView::~BufferView): removed 

	* src/BackStack.h: rewrote to use std::stack. made BackStackItem
	and removed now defunct constructor and deconstructor.

	* src/BufferView.h: have backstack as a object not as a pointer.
	removed initialization from constructor. added include for BackStack 

	* development/lyx.spec.in (%build): add CFLAGS also.

	* src/screen.C (drawFrame): removed another warning.

1999-10-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* renamed WHATSNEW to NEWS (usual GNU style), CHANGES to
	OLD-CHANGES (not used anymore) and modified INSTALL, INSTALL.OS2,
	README and ANNOUNCE a bit for the next release. More work is
	needed, of course.

	* src/paragraph.C (SimpleTeXBlanks): spaces are automatically made
	unbreakable if we are in freespacing mode (LyX-Code), but not in
	latex mode.

1999-10-25  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/BackStack.h: fixed initialization order in constructor

	* Makefile.am (MAINTAINERCLEANFILES): removed po/POTFILES.in

	* acinclude.m4 (VERSION): new rules for when a version is
	development, added also a variable for prerelease.
	(warnings): we set with_warnings=yes for prereleases
	(lyx_opt): prereleases compile with same optimization as development 
	(CXXFLAGS): only use pedantic if we are a development version 

	* src/BufferView.C (restorePosition): don't do anything if the
	backstack is empty.

	* src/BackStack.h: added member empty, use this to test if there
	is anything to pop...

1999-10-25  Juergen Vigna  <jug@sad.it>

	* forms/form1.fd +
	* forms/layout_forms.fd +
	* forms/latexoptions.fd +
	* lyx.fd: changed for various form resize issues

	* src/mathed/math_panel.C +
	* src/insets/inseterror.C +
	* src/insets/insetinfo.C +
	* src/insets/inseturl.C +
	* src/insets/inseturl.h +
	* src/LaTeXLog.C +
	* src/LyXSendto.C +
	* src/PaperLayout.C +
	* src/ParagraphExtra.C +
	* src/TableLayout.C +
	* src/form1.C +
	* src/layout_forms.C +
	* src/lyx.C +
	* src/lyx_cb.C +
	* src/lyx_gui.C +
	* src/lyxfr0.C +
	* src/lyxfunc.C +
	* src/lyxvc.C +
	* src/menus.C: fixed various resize issues. So now forms can be
	resized savely or not be resized at all.
	
	* forms/form_url.fd +
	* src/insets/form_url.[Ch]: added because it's cleaner and easier
	to modify IMO.

	* src/insets/Makefile.am: added files form_url.[Ch]
	
1999-10-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* INSTALL: it is now possible to compile LyX with digital C++ 6.1
	(and presumably 6.2).

	* src/{BufferView,LyXView,combox,filedlg,intl,lyxserver,lyxvc,
	menus,minibuffer,toolbar}.{C,h}: added C_xxx wrappers around
	remaining static member callbacks. 

	* src/lyxfunc.C (Dispatch): Use _() instead of N_() fot minibuffer
	messages. 

	* src/support/lyxstring.h: declare struct Srep as friend of
	lyxstring, since DEC cxx complains otherwise.

1999-10-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

1999-10-24  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LaTeX.C (run): made run_bibtex also depend on files with
	extension ".bst"
	(runBibTeX): added scans for "\\bibstyle", now also ".bst" files
	are put into the dependency file.

	* src/spellchecker.C (create_ispell_pipe): removed old #warning,
	the code has shown itself to work
	(create_ispell_pipe): removed another warning, added a comment
	instead. 

	* src/minibuffer.C (ExecutingCB): removed code that has been
	commented out a long time

	* src/lyxfunc.C (processKeyEvent): removed some very old commented
	out code + a warning.

	* src/support/lyxstring.h: comment out the three private
	operators, when compiling with string ansi conforming compilers
	they make problems.

	* src/mathed/math_symbols.C (AddBitmap): change 6th arg to be
	unsigned char *.
	(pixmapFromBitmapData): change type of bdata to be unsigned char *
	(pixmapFromBitmapData): add a reinterpret_cast in the call to
	XCreateImage

	* src/mathed/math_panel.h: change 6th arg to AddBitmap to be
	unsigned char *

	* src/mathed/math_panel.C (create_math_panel): remove explicit
	casts

	* src/bmtable.h: change last paramter to fl_set_bmtable_data to be
	unsigned char *.

	* src/bmtable.C (struct BMTABLE_SPEC): make bdata unsigned char *
	(draw_bitmaptable): add a reinterpret_cast to sp->bdata in the call
	to XCreatePixmapFromBitmapData
	(fl_set_bmtable_data): change the last argument to be unsigned
	char *
	(fl_set_bmtable_file): change bdata to unsinged char *, change bw
	and bh to be unsigned int, remove explicit casts in call to
	XReadBitmapFileData.

	* images/arrows.xbm: made the arrays unsigned char *
	* images/varsz.xbm: ditto
	* images/misc.xbm: ditto
	* images/greek.xbm: ditto
	* images/dots.xbm: ditto
	* images/brel.xbm: ditto
	* images/bop.xbm: ditto

	* Makefile.am (MAINTAINERCLEANFILES): added po/POTFILES.in

	* acinclude.m4 (LYX_GXX_STRENGHT_REDUCE): removed. 
	(LYX_PROG_CXX): added -pedantic to g++ compile options when
	with-warnings, removed the __STRING_ANSI__ hack, seems to not be
	needed. 
	(LYX_CXX_CHEADERS): added <clocale> to the test. 

1999-10-23  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/lyx_cb.C (addNewlineAndDepth): changed to use string::append.

	* src/support/lyxstring.C (append): fixed something that must be a
	bug, rep->assign was used instead of rep->append.

	* src/support/Makefile.am (libsupport_a_SOURCES): added LIstream.h
	and LOstream.h

	* src/lyxfunc.C (processKeyEvent): removed faulty line that made
	lyx insert double chars. Fix spotted by Kayvan.

1999-10-23  Asger Alstrup Nielsen  <alstrup@alstrup.galaxy.dk>

	* Fixed the tth support. I messed up with the Emacs patch apply feature
	and omitted the changes in lyxrc.C.

1999-10-22  Juergen Vigna  <jug@sad.it>

	* src/insets/figinset.C (CallbackFig): Just changed the defines a bit.

	* src/lyx_cb.C (MenuInsertRef) + 
	* src/lyx_gui.C (create_forms): Inserted fl_set_form_minsize so that
	the form cannot be resized under it limits (fixes a segfault)
	
	* src/lyx.C (create_form_form_ref) +
	* forms/lyx.fd: Changed Gravity on name input field so that it is
 	resized correctly.

1999-10-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* configure.in: use LYX_CXX_STL_MODERN_STREAMS; check for headers
	<ostream> and <istream>.
	
	* acinclude.m4 (LYX_CXX_STL_MODERN_STREAMS): new test. Checks
	whether <fstream> provides the latest standard features, or if we
	have an oldstyle library (like in egcs).
	(LYX_CXX_STL_STRING): fix the test.

	* src/support/DebugStream.{C,h}: use L{I,O}stream.h and condition the
	code on MODERN_STL_STREAM.

	* src/support/lyxstring.h: use L{I,O}stream.h.

	* src/support/L{I,O}stream.h: new files, designed to setup
	correctly streams for our use
	  - includes the right header depending on STL capabilities
	  - puts std::ostream and std::endl (for LOStream.h) or
	  std::istream (LIStream.h) in toplevel namespace.

1999-10-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/LaTeX.C (run): added a check in 0 sumchange so that if it
	was a bib file that had been changed we ensure that bibtex is run.
	(runBibTeX): enhanced to extract the names of the bib files and
	getting their absolute path and enter them into the dep file.
	(findtexfile): static func that is used to look for tex-files,
	checks for absolute patchs and tries also with kpsewhich.
	Alternative ways of finding the correct files are wanted. Will
	probably be moved.
	(do_popen): function that runs a command using popen and returns
	the whole output of that command in a string. Should be moved to
	somewhere else.

	* src/DepTable.[Ch] (extchanged): new function that returns true if a
	file with extension ext has changed.

	* src/insets/figinset.C: added ifdef guards around the fl_free
	code that jug commented out. Now it is commented out when
	compiling with XForms == 0.89.

	* src/support/lyxstring.C: moved the definition of lyxstring::Srep
	to lyxstring.C, and only keep a forward declaration in
	lyxstring.h. Simplifies the header file a bit and should help a
	bit on compile time too. Also changes to Srep will not mandate a
	recompile of code just using string.
	(~lyxstring): definition moved here since it uses srep.
	(size): definition moved here since it uses srep.

	* src/support/lyxstring.h: removed a couple of "inline" that should
	not be there.

1999-10-21  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/insets/inseturl.C (C_InsetUrl_CloseUrlCB): forgot to pass
	the 'ob' argument.

1999-10-21  Juergen Vigna  <jug@sad.it>

	* src/table.C (SetPWidth): Just a small fix so the alignment is not
	set to left if I just remove the width entry (or it is empty).

	* src/text2.C (SetCursorIntern): Fixed a bug calculating to use wrong
	paragraph when having dummy paragraphs.

1999-10-20  Juergen Vigna  <jug@sad.it>

	* src/insets/figinset.C: just commented some fl_free_form calls
	and added warnings so that this calls should be activated later
	again. This avoids for now a segfault, but we have a memory leak!

	* src/lyxfunc.C (processKeyEvent) (Dispatch): changed
 	'const char * argument' to 'string argument', this should
	fix some Asserts() in lyxstring.C.

	* src/lyxfunc.h: Removed the function argAsString(const char *)
	as it is not used anymore.

1999-10-20  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (getline): reads now _all_ chars. uses
	get instead of >>

	* src/Literate.h: some funcs moved from public to private to make
	interface clearer. Unneeded args removed.

	* src/Literate.C (scanLiterateLogFile): rewritten to use iostream
	instead of lyxlex.
	(scanBuildLogFile): ditto

	* src/LaTeX.C (scanLogFile): merged LaTeX Error handling into
	normal TeX Error. Still room for improvement.

	* src/LaTeX.[Ch]: removed scanError. Wrong place and not needed.

	* src/buffer.C (insertErrors): changes to make the error
	desctription show properly.

	* src/LaTeX.C (deplog): removed the test for file in lyx doc dir.
	could never happen

	* src/support/lyxstring.C (helper): changed to use
	sizeof(object->rep->ref).
	(operator>>): changed to use a pointer instead.

	* src/support/lyxstring.h: changed const reference & to value_type
	const & lets see if that helps.

1999-10-19  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Makefile.am (rpmdist): fixed to have non static package and
	verison.

	* src/support/lyxstring.C: removed the compilation guards

	* src/vspace.C (nextToken): use i + 1  instead of ++i. Maks things
	a bit clearer.

	* src/support/Makefile.am (LYXSTRING): bruker USE_LYXSTRING for
	conditional compile of lyxstring.Ch

	* acinclude.m4 (LYX_CXX_STL_STRING): new and improved, still a
	stupid check, but it is a lot better than the bastring hack. 
	(LYX_CXX_STL_STRING): bruker nå AM_CONDITIONAL(USE_LYXSTRING  

	* several files: changed string::erase into string::clear. Not
	really needed.
	
	* src/chset.C (encodeString): use a char temporary instead

	* src/table.C (TexEndOfCell): added tostr around
	column_of_cell(fcell+i)+1 and around right_column_of_cell(fcell+i)+1
	(TexEndOfCell): ditto
	(TexEndOfCell): ditto
	(TexEndOfCell): ditto
	(DocBookEndOfCell): ditto
	(DocBookEndOfCell): ditto
	(DocBookEndOfCell): ditto
	(DocBookEndOfCell): ditto

	* src/paragraph.C (TeXEnvironment): added tostr around foot_count -1

	* src/lyxfr1.C (SearchReplaceAllCB): added tostr around replace_count

	* src/lyx_cb.C (MenuRunLaTeX): added tostr around ret
	(MenuBuildProg): added tostr around ret
	(MenuRunChktex): added tostr around ret
	(DocumentApplyCB): added tostr around ret

	* src/chset.C (encodeString): added tostr around t->ic

	* src/buffer.C (makeLaTeXFile): added tostr around secnumdepth
	(makeLaTeXFile): added tostr around tocdepth
	(makeLaTeXFile): added tostr around ftcound - 1

	* src/insets/insetbib.C (setCounter): added tostr around counter.

	* src/support/lyxstring.h: added an operator+=(int) to catch more
	mistakes. 

	* src/support/lyxstring.C (lyxstring): We DON'T allow NULL pointers.
	(lyxstring): We DON'T allow NULL pointers.

1999-10-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/mathed/math_macro.C (MathMacroArgument::Write,
	MathMacroTemplate::WriteDef): add tostr() around macro arg numbers
	when writing them out.

	* src/LString.C: remove, since it is not used anymore.
	
	* src/support/lyxstring.C: condition the content to
	USE_INCLUDED_STRING macro.

	* src/mathed/math_symbols.C, src/support/lstrings.C,
	src/support/lyxstring.C: add `using' directive to specify what
	we need in <algorithm>. I do not think that we need to
	conditionalize this, but any thought is appreciated.

	* many files: change all callback functions to "C" linkage
	functions to please strict C++ compilers like DEC cxx 6.1 in mode
	strict_ansi. Those who were static are now global. 
  	    The case of callbacks which are static class members is
	trickier, since we have to make C wrappers around them (see
	InsetError, InsetInfo and InsetUrl). The same holds for friends. I
	did not finish this yet, since it defeats the purpose of
	encapsulation, and I am not sure what the best route is.

1999-10-19  Juergen Vigna  <jug@sad.it>

	* src/support/lyxstring.C (lyxstring): we permit to have a null
	pointer as assignment value and just don't assign it.

	* src/vspace.C (nextToken): corrected this function substituting
	find_first(_not)_of with find_last_of.

	* src/TableLayout.C (UpdateLayoutTable) (TableOptionsCB)
 		(TableOptCloseCB) (TableSpeCloseCB):
	inserted fl_set_focus call for problem with fl_hide_form() in
 	xforms-0.89.

1999-10-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyx_cb.C (LayoutsCB): fix bug where int was added to a
	string. 

1999-10-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/lyxrc.C (Read): RC_PRINTEXSTRAOPTIONS now uses
	LyXLex::next() and not eatline() to get its argument.

1999-10-17  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/DepTable.[Ch]: rewritten to store the dependencies in a map
	instead, use fstreams for io of the depfile, removed unneeded
	functions and variables. 

	* src/LaTeX.[Ch] (class TeXErrors): rewrote to store the errors in a
	vector instead, removed all functions and variables that is not in
	use.

1999-10-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/buffer.C (insertErrors): use new interface to TeXError

	* Makefile.am (rpmdist): added a rpmdist target

	* lib/reLyX/Makefile.am: added RelyxFigure.pm and Verbatim.pm as
	per Kayvan's instructions.

1999-10-15  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/Makefile.am: add a definition for localedir, so that locales
	are found after installation (Kayvan)

1999-10-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* development/.cvsignore: new file.

1999-10-14  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* acinclude.m4 (LYX_CXX_CHEADERS): New macro. Checks whether the
	C++ compiler provides wrappers for C headers and use our alternate
	version otherwise.

	* configure.in: use LYX_CXX_CHEADERS.

	* src/cheader/: new directory, populated with cname headers from
	libstdc++-2.8.1. They are a bit old, but probably good enough for
	what we want (support compilers who lack them).
	
	* src/insets/Makefile.am, src/mathed/Makefile.am: remove src/support
	from includes. It turns out is was stupid.
 
1999-10-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/Makefile.am (install-data-local): forgot a ';'
	(install-data-local): forgot a '\'
	(libinstalldirs): needed after all. reintroduced.

1999-10-13  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* configure.in (AC_OUTPUT): added lyx.spec

	* development/lyx.spec: removed file

	* development/lyx.spec.in: new file

	* po/*.po: merged with lyx.pot becuase of make distcheck
	
	* lib/Makefile.am (dist-hook): added dist-hook so that
	documentation files will be included when doing a make
	dist/distdir/distcheck. Requires cvs export -r HEAD lyxdoc to run.
	(pkgdata_SCRIPTS): added configure.cmd for now, we can use som
	conditional later.
	more: tried to make install do the right thing, exclude CVS dirs
	etc.

	* src/LaTeXLog.C (ShowLatexLog): reordered som statements so that
	Path would fit in more nicely.

	* all files that used to use pathstack: uses now Path instead.
	This change was a lot easier than expected.
	
	* src/support/path.h: new file

	* src/support/Makefile.am (libsupport_a_SOURCES): added path.h

	* src/Makefile.am (lyx_SOURCES): removed pathstack.[Ch]

	* src/support/lyxstring.C (getline): Default arg was given for
	para 3. removed.

	* Configure.cmd: removed file 

1999-10-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/support/DebugStream.[Ch]: remove the explicit std:: before
	streams classes and types, add the proper 'using' statements when
	MODERN_STL is defined.
	
	* src/debug.h: move the << operator definition after the inclusion
	of DebugStream.h

	* src/support/filetools.C: include "LAssert.h", which is needed
	later. 

	* src/insets/Makefile.am, src/mathed/Makefile.am: add src/support
	to includes. 

	* src/lyxfont.h, src/commandtags.h, src/mathed/math_defs.h:
	include "debug.h" to define a proper ostream.

1999-10-12  Asger Alstrup Nielsen  <alstrup@alstrup.galaxy.dk>

	* src/sys*: Cleaned up the Systemcall stuff a bit. Added "kill(int)"
	  method to the SystemCall class which can kill a process, but it's
	  not fully implemented yet.

	* src/*.C: Changed Systemcalls::Startscript() to startscript()

	* src/support/FileInfo.h: Better documentation	

	* src/lyxfunc.C: Added support for buffer-export html
	
	* src/menus.C: Added Export->As HTML...
	
	* lib/bind/*.bind: Added short-cut for buffer-export html

	* src/lyxrc.*: Added support for new \tth_command
	
	* lib/lyxrc.example: Added stuff for new \tth_command

1999-10-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* lib/Makefile.am (IMAGES): removed images/README
	(pkgdata_SCRIPTS): use this instead of bin_SCRIPTS to that it
	installes in correct place. Check permisions is installed
	correctly.

	* src/LaTeX.C: some no-op changes moved declaration of some
	variables around.

	* src/LaTeX.h (LATEX_H): changed include guard name

1999-10-12  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lib/reLyX/Makefile.am: install noweb2lyx.

	* lib/Makefile.am: install configure. 

	* lib/reLyX/configure.in: declare a config aux dir; set package
	name to lyx (not sure what the best solution is); generate noweb2lyx.

	* lib/layouts/egs.layout: fix the bibliography layout.

1999-10-08  Jürgen Vigna <jug@sad.it>

	* src/support/filetools.C (FileOpenSearch): Fixed a bug where
	when in the PATH was something like /usr/bin;;/bin (note: the ;;)
	it returned without continuing to search the path.
	
1999-10-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/insets/insetquotes.C (Draw): Simplified a gread deal. This
	also fixes a bug. It is not allowed to do tricks with std::strings
	like: string a("hei"); &a[e]; this will not give what you
	think... Any reason for the complexity in this func?

1999-10-06  Asger Alstrup Nielsen  <alstrup@diku.dk>

	* Updated README and INSTALL a bit, mostly to check that my
	CVS rights are correctly set up.

1999-10-06  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/lyxstring.C (helper): removed bogus Assert. strlen
	does not allow '\0' chars but lyxstring and std::string does.

1999-10-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* autogen.sh (AUTOCONF): let the autogen script create the
	POTFILES.in file too. POTFILES.in should perhaps now not be
	included in the cvs module.

	* some more files changed to use C++ includes instead of C ones.

	* src/filedlg.C (Reread): fixed a bug wrt Time. It was appended
	not assigned.
	(Reread): added tostr to nlink. buggy output otherwise.
	(Reread): added a string() around szMode when assigning to Buffer,
	without this I got a log of garbled info strings.

	* acconfig.h: commented out the PTR_AS_INT macros. They should not
	be needed.

	* I have added several ostream & operator<<(ostream &, some_type)
	functions. This has been done to avoid casting and warnings when
	outputting enums to lyxerr. This as thus eliminated a lot of
	explicit casts and has made the code clearer. Among the enums
	affected: kb_action, InsetLatexAccent::ACCENT_TYPE, a couple of
	mathed enums, some font enum the Debug::type enum. 

	* src/support/lyxstring.h (clear): missing method. equivalent of
	erase(0, npos).

	* all files that contained "stderr": rewrote constructs that used
	stderr to use lyxerr instead. (except bmtable)

	* src/support/DebugStream.h (level): and the passed t with
	Debug::ANY to avoid spurious bits set.

	* src/debug.h (Debug::type value): made it accept strings of the
	type INFO,INIT,KEY.

	* configure.in (Check for programs): Added a check for kpsewhich,
	the latex generation will use this later to better the dicovery of
	all used files. 

	* src/BufferView.C (create_view): we don't need to cast this to
	(void*) that is done automatically.
	(WorkAreaButtonPress): removed some dead code.

1999-10-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/minibuffer.C (Init): make sure that the "Welcome to LyX!"
	is not overwritten when translated (David Sua'rez de Lis).

	* lib/CREDITS: Added David Sua'rez de Lis

	* lib/reLyX/configure.in: setup LYX_DIR correctly in reLyX.

	* src/bufferparams.C (BufferParams): default input encoding is now
	"latin1" 

	* acinclude.m4 (cross_compiling): comment out macro
	LYX_GXX_STRENGTH_REDUCE. 

	* acconfig.h: make sure that const is not defined (to empty) when
	we are compiling C++. Remove commented out code using SIZEOF_xx
	macros.
	
	* configure.in : move the test for const and inline as late as
	possible so that these C tests do not interefere with C++ ones.
	Remove the call to LYX_GXX_STRENGTH_REDUCE, since its usefulness
	has not been proven. 

1999-10-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* src/table.C (getDocBookAlign): remove bad default value for
	isColumn parameter.

	* src/menus.C (ShowFileMenu): add a missing tostr() for lastfiles
	shortcut. 
	(ShowFileMenu2): ditto.

	* lib/reLyX/.cvsignore: add configure and aclocal.m4 to the list
	of files to ignore.

1999-10-04  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Most files: finished the change from the old error code to use
	DebugStream for all lyxerr debugging. Only minor changes remain
	(e.g. the setting of debug levels using strings instead of number) 

1999-10-02  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/layout.C (Add): Changed to use compare_no_case instead of
	strcasecmp.

	* src/FontInfo.C: changed loop variable type too string::size_type.

1999-10-01  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/Makefile.am: added -I${srcdir}/../ to INCLUDES and
	set ETAGS_ARGS to --c++ 

1999-09-30  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/table.C (DocBookEndOfCell): commented out two unused variables

	* src/paragraph.C: commented out four unused variables. 

	* src/lyx_cb.C (TocUpdateCB): moved variable i and added a new i
	insed a if clause with type string::size_type.

	* src/lyxfr1.C (IsSearchStringInText): changed iSrch from int to
	string::size_type.

	* src/lyxfunc.C (Dispatch): use string::size_type as loop variable.

	* src/lyx_cb.C (ReplaceWord): use string::size_type as loop
	variable, also changed loop to go from 0 to lenght + 1, instead of
	-1 to length. This should be correct.

	* src/LaTeX.C (scanError): use string::size_type as loop variable
	type.

	* src/BufferView.C (WorkAreaButtonPress): moved #if 0 up two lines
	(l.896) since y_tmp and row was not used anyway.

	* src/insets/insetref.C (escape): use string::size_type as loop
	variable type.

	* src/insets/insetquotes.C (Width): use string::size_type as loop
	variable type.
	(Draw): use string::size_type as loop variable type.

	* src/insets/insetlatexaccent.C (checkContents): use
	string::size_type as loop variable type.

	* src/insets/insetlabel.C (escape): use string::size_type as loop
	variable type.

	* src/insets/insetinfo.C: added an extern for current_view.

	* src/insets/insetcommand.C (scanCommand): use string::size_type
	as loop variable type.

	* most files: removed the RCS tags. With them we had to recompile
	a lot of files after a simple cvs commit. Also we have never used
	them for anything meaningful. 

	* most files: tags-query-replace NULL 0. As adviced several plases
	we now use "0" instead of "NULL" in our code. 

	* src/support/filetools.C (SpaceLess): use string::size_type as
	loop variable type.

1999-09-29  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/paragraph.C: fixed up some more string stuff.

1999-09-28  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* src/support/filetools.h: make modestr a std::string.

	* src/filetools.C (GetEnv): made ch really const.

	* src/lyxlib.h: removed the Maximum and Minimum inline functions,
	made code that used these use max/min from <algorithm> instead.

	* changed several c library include files to their equivalent c++
	library include files. All is not changed yet.

	* created a support subdir in src, put lyxstring and lstrings
	there + the extra files atexit, fileblock, strerror. Created
	Makefile.am. edited configure.in and src/Makefile.am to use this
	new subdir. More files moved to support.

	* imported som of the functions from repository lyx, filetools
	
	* ran tags-query-replace on LString -> string, corrected the bogus
	cases. Tried to make use of lstrings.[hC], debugged a lot. There
	is still some errors in there. This is errors where too much or
	too litle get deleted from strings (string::erase, string::substr,
	string::replace), there can also be some off by one errors, or
	just plain wrong use of functions from lstrings. Viewing of quotes
	is wrong. 

	* LyX is now running fairly well with string, but there are
	certainly some bugs yet (see above) also string is quite different
	from LString among others in that it does not allow null pointers
	passed in and will abort if it gets any.
	
        * Added the revtex4 files I forgot when setting up the repository.

1999-09-27  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* All over: Tried to clean everything up so that only the files
	  that we really need are included in the cvs repository.
	* Switched to use automake.
	* Generaton of reLyX is not perfect, LYX_DIR does not get substituted.
	* Install has not been checked.

1999-09-22  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* po/pt.po: Three errors:
	       l.533 and l.538 format specification error
	       l. 402 duplicate entry, I just deleted it.

