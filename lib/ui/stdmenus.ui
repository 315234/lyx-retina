Menuset

    Menubar
# Make the first 4 menus be as much as expected as possible
	Submenu "File|F" "file"
	Submenu "Edit|E" "edit"
	Submenu "View|V" "view"
	Submenu "Insert|I" "insert"
	Submenu "Navigate|N" "navigate"
	Submenu "Document|D" "document"
	Submenu "Tools|T" "tools"
	Submenu "Help|H" "help"
    End

#
# FILE MENU
#

    Menu "file"
	Item "New|N" "buffer-new"
	Item "New from Template...|T" "buffer-new-template"
	Item "Open...|O" "file-open"
# This seems a much more sensible place to me
	Submenu "Open recent|t" "lastfiles"
	Separator
	Item "Close|C" "buffer-close"
	Item "Save|S" "buffer-write"
	Item "Save As...|A" "buffer-write-as"
	Item "Revert|R" "buffer-reload"
	Submenu "Version Control|V" "file_vc"
	Separator
	Submenu "Import|I" "file_import"
	Submenu "Export|E" "file_export"
	Item "Print...|P" "buffer-print"
	OptItem "Fax...|F" "buffer-export fax"
	Separator
	Item "Exit|x" "lyx-quit"
    End

    Menu "lastfiles"
	Lastfiles
    End
 
    Menu "file_vc"
	OptItem "Register...|R" "vc-register"
	OptItem "Check In Changes...|I" "vc-check-in"
	OptItem "Check Out for Edit|O" "vc-check-out"
	OptItem "Revert to Last Version|L" "vc-revert"
	OptItem "Undo Last Check In|U" "vc-undo-last"
	OptItem "Show History|H" "vc-history"
    End

    Menu "file_import"
	ImportFormats
    End

    Menu "file_export"
	ExportFormats
	Item "Custom...|C" "buffer-export custom"
    End

#
# EDIT MENU
#

    Menu "edit"
	Item "Undo|U" "undo"
	Item "Redo|d" "redo"
	Separator
	Item "Cut|C" "cut"
	Item "Copy|o" "copy"
	Item "Paste|a" "paste"
	Item "Find & Replace...|F" "find-replace"
	Separator
	Item "Text Style...|S" "layout-character"
	Item "Paragraph Settings...|a" "layout-paragraph"
	Separator
# Mathed b0rkage means these don't work properly
	OptSubmenu "Table|T" "edit_tabular"
	OptSubmenu "Math|M" "edit_math"
	Separator
	OptItem "Increase List Depth|I" "depth-increment"
	OptItem "Decrease List Depth|D" "depth-decrement"
# This is where the context-specific stuff is supposed to go.
# The idea is that everything on here can disappear and should
# only appear when relevant (getStatus). Only stuff that needs
# a right-click to bring up the dialog should appear here (it is not
# obvious what the context is for the others)
	OptItem "Table Settings..." "dialog-show-next-inset tabular"
	OptItem "TeX Code Settings..." "dialog-show-next-inset ert"
	OptItem "Float Settings..." "dialog-show-next-inset float"
	OptItem "Minipage Settings..." "dialog-show-next-inset minipage"
	OptItem "Text Wrap Settings..." "dialog-show-next-inset wrap"
    End

# not much we can do to help here
    Menu "edit_tabular"
	Item "Add Row|A" "tabular-feature append-row"
	Item "Delete Row|w" "tabular-feature delete-row"
	Separator
	Item "Add Column|u" "tabular-feature append-column"
	Item "Delete Column|D" "tabular-feature delete-column"
	Separator
	Item "Multicolumn|M" "tabular-feature multicolumn"
	Separator
	Item "Top Line|T" "tabular-feature toggle-line-top"
	Item "Bottom Line|B" "tabular-feature toggle-line-bottom"
	Item "Left Line|L" "tabular-feature toggle-line-left"
	Item "Right Line|R" "tabular-feature toggle-line-right"
	Separator
	Item "Left aligned|e" "tabular-feature align-left"
	Item "Centered|C" "tabular-feature align-center"
	Item "Right aligned|i" "tabular-feature align-right"
	Separator
	Item "Top aligned|o" "tabular-feature valign-top"
	Item "Vertically Centered|V" "tabular-feature valign-center"
	Item "Bottom aligned|g" "tabular-feature valign-bottom"
    End

    Menu "edit_math"
	Item "Toggle Numbering|N" "math-number"
	Item "Toggle Numbering of Line|u" "math-nonumber"
	Submenu "Change Limits Type|L" "edit_math_limits"
	Separator
	Submenu "Change Formula Type|F" "edit_math_mutate"
	Separator
	Submenu "Use Computer Algebra System|S" "edit_math_extern"
	Separator
	Submenu "Alignment|A" "edit_math_align"
	Separator
	Item "Add Row|R" "tabular-feature append-row"
	Item "Delete Row|D" "tabular-feature delete-row"
	Item "Copy Row" "tabular-feature copy-row"
	Item "Swap Rows" "tabular-feature swap-row"
	Separator
	Item "Add Column|C" "tabular-feature append-column"
	Item "Delete Column|e" "tabular-feature delete-column"
	Item "Copy Column" "tabular-feature copy-column"
	Item "Swap Columns" "tabular-feature swap-column"
    End

    Menu "edit_math_limits"
	 Item "Default|t"  "math-limits empty"
	 Item "Display|D"  "math-limits limits"
	 Item "Inline|I"  "math-limits nolimits"
    End

    Menu "edit_math_extern"
	Item "Octave" "math-extern octave"
	Item "Maxima" "math-extern maxima"
	Item "Mathematica" "math-extern mathematica"
	Separator
	Item "Maple, simplify" "math-extern maple simplify"
	Item "Maple, factor" "math-extern maple factor"
	Item "Maple, evalm" "math-extern maple evalm"
	Item "Maple, evalf" "math-extern maple evalf"
    End

    Menu "edit_math_mutate"
	Item "Inline Formula|I" "math-mutate simple"
	Item "Displayed Formula|D" "math-mutate equation"
	Item "Eqnarray Environment|q" "math-mutate eqnarray"
	Item "Align Environment|A" "math-mutate align"
	Item "AlignAt Environment" "math-mutate alignat"
	Item "Flalign Environment|f" "math-mutate flalign"
	Item "Gather Environment" "math-mutate gather"
	Item "Multline Environment" "math-mutate multline"
    End

    Menu "edit_math_align"
	Item "Left-aligned|L" "tabular-feature align-left"
	Item "Centered|C" "tabular-feature align-center"
	Item "Right-aligned|R" "tabular-feature align-right"
	Separator
	Item "Top-aligned|T" "tabular-feature valign-top"
	Item "Centered Vertically|e" "tabular-feature valign-center"
	Item "Bottom-aligned|B" "tabular-feature valign-bottom"
    End

#
# VIEW MENU
#

    Menu "view"
	Item "Open Float|O" "inset-toggle"
# A common feature request JMarc wants to see
#	Item "Open All Footnotes|F" "open-footnotes"
#	Item "Close All Footnotes|C" "close-footnotes"
# FIXME: better in Document menu ? Not sure.
	Item "Remove All Error Boxes|E" "error-remove-all"
	Item "Display Tooltips|D" "toggle-tooltips"
	Separator
	Submenu "Update|U" "document_update"
	ViewFormats
	Separator
        Documents
    End
 
    Menu "document_update"
	UpdateFormats
    End

#
# INSERT MENU
#
    Menu "insert"
# Try and group things a little better, and percolate the most
# commonly used to good positions (exception being mathed, but
# most people using mathed learn key shortcuts quite quickly anyway)
	Item "Citation Reference...|C" "dialog-show-new-inset citation"
	Item "Cross Reference...|R" "dialog-show-new-inset ref"
	Item "Label...|L" "label-insert"
	Item "Index Entry|I" "index-insert"
	Separator
	Submenu "Math|h" "insert_math"
	Submenu "Special Character|S" "insert_special"
	Submenu "Float|a" "insert_float"
	Submenu "List / TOC|O" "insert_toc"
# YUCK
	Submenu "File|e" "insert_file"
	Submenu "Note|N" "insert_note"
	Separator
# I'm going to kill this dumb dialog, but for now ...
	Item "Table...|T" "tabular-insert"
	Item "Minipage|p" "minipage-insert"
	Item "Graphics...|G" "dialog-show-new-inset graphics"
	Item "URL...|U" "url-insert"
	Item "Short Title" "optional-insert"
	Item "TeX|X" "ert-insert"
	Item "External Material...|x" "dialog-show-new-inset external"
	Item "Child document...|d" "dialog-show-new-inset include"
    End

# Not great, but the main Insert menu is seriously unwieldly
    Menu "insert_note"
	Item "Footnote|F" "footnote-insert"
	Item "Marginal Note|M" "marginalnote-insert"
	Item "Note|N" "note-insert"
    End

    Menu "insert_special"
	Item "Superscript|S" "command-sequence math-mode ; math-superscript ; font-free-apply; "
	Item "Subscript|u" "command-sequence math-mode ; math-subscript ; font-free-apply; "
	Item "Horizontal Fill|H" "hfill-insert"
	Item "Hyphenation Point|P" "hyphenation-point-insert"
	Item "Ligature Break|k" "ligature-break-insert"
	Item "Protected Blank|B" "protected-space-insert"
	Item "Linebreak|L" "break-line"
	Item "Ellipsis|i" "dots-insert"
	Item "End of Sentence|E" "end-of-sentence-period-insert"
	Item "Ordinary Quote|Q" "self-insert \""
	Item "Menu Separator|M" "menu-separator-insert"
    End

    Menu "insert_math"
	Item "Inline Formula|I" "math-mode"
	Item "Display Formula|D" "math-display"
	Item "Eqnarray Environment|E" "command-sequence math-mode; math-mutate eqnarray;"
	Item "AMS align Environment|A" "command-sequence math-mode; math-mutate align;"
	Item "AMS alignat Environment|t" "command-sequence math-mode; math-mutate alignat;"
	Item "AMS flalign Environment|f" "command-sequence math-mode; math-mutate flalign;"
	Item "AMS gather Environment" "command-sequence math-mode; math-mutate gather;"
	Item "AMS multline Environment" "command-sequence math-mode; math-mutate multline;"
	Separator
	Item "Array Environment|y" "math-matrix 2 2"
	Item "Cases Environment|C" "math-insert \cases"
	Separator
	Submenu "Font Change|f" "insert_math_font"
	Item "Math Panel|l" "math-panel"
    End

    Menu "insert_math_font"
	Item "Math normal font" "math-insert \mathnormal"
	Separator
	Item "Math calligraphic family" "math-insert \mathcal"
	Item "Math fraktur family" "math-insert \mathfrak"
	Item "Math roman family" "math-insert \mathrm"
	Item "Math sans serif family" "math-insert \mathsf"
	Separator
	Item "Math bold series" "math-insert \mathbf"
	Separator
	Item "Text normal font" "math-insert \textnormal"
	Separator
	Item "Text roman family" "math-insert \textrm"
	Item "Text sans serif family" "math-insert \textsf"
	Item "Text typewriter family" "math-insert \texttt"
	Separator
	Item "Text bold series" "math-insert \textbf"
	Item "Text medium series" "math-insert \textmd"
	Separator
	Item "Text italic shape" "math-insert \textit"
	Item "Text small caps shape" "math-insert \textsc"
	Item "Text slanted shape" "math-insert \textsl"
	Item "Text upright shape" "math-insert \textup"
		End

    Menu "insert_float"
	FloatInsert
# This has got to be better than "Wrap", anyway
	Item "Text Wrap Float|W" "wrap-insert figure"
    End

    Menu "insert_toc"
	Item "Table of Contents|C" "toc-insert"
	FloatListInsert
	Item "Index List|I" "index-print"
	Item "BibTeX Reference...|B" "dialog-show-new-inset bibtex"
    End

    Menu "insert_file"
	Item "LyX Document...|X" "file-insert"
	Item "ASCII as Lines...|L" "file-insert-ascii"
	Item "ASCII as Paragraphs...|P" "file-insert-ascii-para"
    End

#
# DOCUMENT MENU
#
 
    Menu "document"
	OptItem "Build Program|B" "build-program"
	Item "LaTeX Log File...|L" "latex-view-log"
	Item "Table of Contents...|T" "toc-view"
	Separator
	Submenu "Change tracking|C" "edit_change"
	Item "LaTeX Preamble...|P" "layout-preamble"
	Item "Settings...|S" "layout-document"
	Item "Start Appendix Here|A" "appendix"
    End
 
    Menu "edit_change"
	Item "Track changes|T" "track-changes"
	Item "Merge changes...|M" "merge-changes"
	Item "Accept all changes|A" "accept-all-changes"
	Item "Reject all changes|R" "reject-all-changes"
    End

#
# NAVIGATE MENU
#
    Menu "navigate"
	Submenu "Bookmarks|B" "navigate_bookmarks"
	Item "Error|E" "error-next"
	Item "Note|N" "note-next"
	Item "Refs|R" "reference-goto"
	Separator
	Toc
    End

    Menu "navigate_bookmarks"
	Item "Save Bookmark 1|S" "bookmark-save 1"
	Item "Save Bookmark 2" "bookmark-save 2"
	Item "Save Bookmark 3" "bookmark-save 3"
	Separator
	Item "Go to Bookmark 1|1" "bookmark-goto 1"
	Item "Go to Bookmark 2|2" "bookmark-goto 2"
	Item "Go to Bookmark 3|3" "bookmark-goto 3"
    End

#
# TOOLS MENU
#
 
    Menu "tools"
	Item "Spellchecker...|S" "spellchecker"
	OptItem "Thesaurus...|T" "thesaurus-entry"
	OptItem "Check TeX|h" "buffer-chktex"
	Separator
	Item "View Child Processes...|C" "show-forks"
	Item "TeX Information...|I" "help-Texinfo"
	Separator
# A LOT of applications have Tools->Prefs. Remember this
# should be rarely used - Edit menu is not a good place to
# have it.
	Item "Preferences...|P" "dialog-preferences"
	Item "Reconfigure|R" "reconfigure"
    End
 
#
# HELP MENU
#
    Menu "help"
	Item "Introduction|I" "help-open Intro"
	Item "Tutorial|T" "help-open Tutorial"
	Item "User's Guide|U" "help-open UserGuide"
	Item "Extended Features|E" "help-open Extended"
	Item "Customization|C" "help-open Customization"
	Item "FAQ|F" "help-open FAQ"
	Item "Table of Contents|a" "help-open TOC"
	Item "LaTeX Configuration|L" "help-open LaTeXConfig"
	Separator
	Item "About LyX...|X" "help-aboutlyx"
    End

End
