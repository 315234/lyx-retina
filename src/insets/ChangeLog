2002-03-27  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetspecialchar.C (isLineSeparator): disable the nice code to
	allow linebreaks after hyphenation and menu separators.

2002-03-26  Herbert Voss  <voss@lyx.org>

	* insetgraphics.C (figinsetRead): set the right lyxview

2002-03-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphicsParams.C (latexify): use \textbackslash in preference to
	$\backslash$ and pass a "string const &" to the function.
	(prepareFile, latex): use Path rather than MakeAbsPath.

2002-03-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphicsParams.C (Read): revert Herbert's fix and apply the
	proper fix to the graphics cache.
	(latex): "really" nice output if the file is not found ;-)

2002-03-26  Juergen Vigna  <jug@sad.it>

	* insettext.C (setText): added a LyXFont param and call reinitLyXText()
	(collapseParagraphs): fixed inserting of separator ' '

	* insettabular.C (insertAsciiString): only check for buffer lenght
	not if we have \t or \n inside the buffer as if we don't have we only
	have 1 cell and that's it!

	* insetert.C (close): don't collapse if inlined.

2002-03-25  Herbert Voss  <voss@lyx.org>

	* insetgraphicsParams.C (Read): prevent LyX from hanging if the
	graphics file does not exist.

2002-03-25  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphics.C (prepareFile): ensure that the file has an absolute
	path when preparing export.

	* insetgraphicsParams.[Ch] (Write): no longer passed Buffer *, as we
	no longer MakeRelPath.

2002-03-22  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphics.[Ch] (c-tor, setParams, updateInset): passed filepath.
	Used to determine the absolute path to the graphics file in the
	graphics cache and only in the graphics cache.
	(readInsetGraphics, readFigInset) : no longer passed buffer. Do not
	make graphics file name absolute if it is stored as a relative path.

	* insetgraphicsParams.[Ch] (Read): no longer passed buffer. Do not
	make graphics file name absolute if it is stored as a relative path.

	* insettext.C (edit): emit an updateParagraph signal on entering a text
	inset. Needs to be emitted when leaving the inset also.

2002-03-21  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* all files: ws cleanup

	* Makefile.am: remove ld -r stuff

2002-03-21  Juergen Vigna  <jug@sad.it>

	* insettext.C (appendParagraphs): new function added to append
	the paragraphs to this insets paragraphs.

2002-03-20  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* Makefile.am: special rules if partial linking

2002-03-19  Juergen Vigna  <jug@sad.it>

	* insetgraphics.C (draw): fixed the setting of CHANGED_IN_DRAW!

2002-03-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphics.C: Clean up Baruch's comments a little.
	(c-tor): remove code setting id_, as it's set in the Inset c-tor.

2002-03-14  John Levon  <moz@compsoc.man.ac.uk>

	* insettabular.C:
	* insettheorem.C: wrap warnings

	* insetgraphics.C: improve messages, move cached_status_
	  setting to safer place

2002-03-18  Juergen Vigna  <jug@sad.it>

	* insettabular.C (unlockInsetInInset): removed unneeded showCursor
	calls.
	(localDispatch): ditto

	* insettext.C (edit): removed unneeded showCursor calls.
	(localDispatch): ditto.

2002-03-13  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetgraphics.h: remove display() method.

2002-03-11  Juergen Vigna  <jug@sad.it>

	* insetgraphics.C (draw): hack to fix the redrawing bug.
	(draw): seems this fixes #268 (force redraw of row if we changed).

	* insettext.C (updateInsetInInset): fixed for updates in insets inside
	this inset text (don't know why I missed this earlier).

2002-03-08  Juergen Vigna  <jug@sad.it>

	* insettabular.C (updateLocal): do a FULL update if we're not locked
	and only a CELL update is asked.

	* insettext.C (updateInsetInInset): update insets inside inset also
	if it isn't inside the_locking_inset.

	* insettabular.C (updateInsetInInset): ditto.

2002-03-06  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetexternal.C (doSubstitution): check whether we are using a
	temp dir for defining $$FPath

2002-03-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettabular.C:
	* insettext.C: remove #include "WorkArea.h".

2002-03-06  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): fixed frame redrawing.
	(clear): forgot to set the inset_owner of the paragraph.

	* insetert.C (status): pay attention the bv can be 0 here!
	(getMaxWidth): add the default leftMargin

2002-03-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C (getMaxWidth): make w unsigned int.

2002-03-05  Juergen Vigna  <jug@sad.it>

	* insetert.C (status): change behaviour of Inlined.
	(getMaxWidth): added for new inlined behaviour.

2002-03-05  José Abílio Oliveira Matos  <jamatos@novalis.fc.up.pt>

	* insetnote.h (linuxdoc, docbook): add empty methods.
	* insetinclude.C (validate): fix a case where buffer->niceFile was used
	before being initialized.

2002-03-05  Juergen Vigna  <jug@sad.it>

	* insettext.C (insetButtonPress): don't call exit on a InsetButtonPress
	only that one in the inset. Should be enough.
	(updateLocal): set the selection cursor always if we don't have a
	selection to be sure it's set!

	* insettabular.C (insetButtonPress): don't hit a sub inset 2 times.

2002-03-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (clear): a gross hack to set layout on a newly
	created paragraph.

2002-03-04  Juergen Vigna  <jug@sad.it>

	* insettabular.C (localDispatch): inserted handling of
	LFUN_FILE_INSERT_ASCII_PARA and LFUN_FILE_INSERT_ASCII.
	(insertAsciiString): new helper function.

2002-03-04  Jose Abilio Oliveira Matos  <jamatos@novalis.fc.up.pt>

	* insetinclude.C (linuxdoc, docbook): deal correctly with the niceFile
	argument.

2002-03-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (InsetText): initalize newly created par with
	default layout. add bufferparams parameter
	first -> first_y

	* insetcaption.[Ch] (InsetCaption): add BufferParams parameter
	* insetcollapsable.[Ch] (InsetCollapsable): ditto
	* insetert.[Ch] (InsetERT): ditto
	* insetfloat.[Ch] (InsetFloat): ditto
	* insetfoot.[Ch] (InsetFoot): ditto
	* insetfootlike.[Ch] (InsetFootLike): ditto
	* insetmarginal.[Ch] (InsetMarginal): ditto
	* insetminipage.[Ch] (InsetMinipage): ditto
	* insetnote.[Ch] (InsetNote): ditto
	* insettabular.[Ch] (InsetTabular): ditto + adjust for tabular changes

2002-03-02  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C: layout as string

	* insetinclude.C: layout as string

	* insetert.C: layout as string

	* insetbib.C: layout as string

2002-02-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetert.C:
	* insettabular.C: remove #include "lyx_gui_misc.h".

2002-02-26  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* figinset.h:
	* figinset.C:
	* inset.h: remove figinset, yahoo !

2002-02-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphics.C (c-tors): initialise parent classes explicitly in
	copy c-tor and initialise member variables in the correct order.

2002-02-28  Juergen Vigna  <jug@sad.it>

	* insettabular.C (localDispatch): clear selection on PgUp/Down.

2002-02-28  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* inset.h: ... and add a better one here.

	* insetcommand.C (insetButtonRelease): remove that one which was a
	bit broken...

2002-02-27  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetcommand.C (insetButtonRelease): ... and move it here.

	* inseturl.h: remove insetButtonRelease from there...

2002-02-26  Juergen Vigna  <jug@sad.it>

	* inseturl.h: Added a insetButtonRelease call returning true as
	prove of concept.

	* insetlabel.C (edit): Fixed wrong update handling after change I
	leave in the wrong code for the one who wrote it to remove and have
	a look what he did wrong.

	* insettabular.C (localDispatch): force a SELECTION update if we
	had a selection and we passed the event down to the inset (fix #213)
	(localDispatch): handle font changing stuff when we have a cell
	selection so that the selection is not rewoked. I don't really like
	this fix, but it's the only way I see to do it right now.

2002-02-22  Juergen Vigna  <jug@sad.it>

	* insettext.C (insetUnlock): set the cursor to the second paragraph
	if available and if the first one is empty (fix #191).

2002-02-20  Juergen Vigna  <jug@sad.it>

	* insettext.C (getDrawFont): implemented this function to call the
	one of the owner if present as the owner normally knows what to do
	with us.

	* insetert.C: implement getDrawFont() function and comment out all
	the crap for setting a special latex font inside this inset.
	(InsetERT): added a Lanugage parameter to this constructor.

	* inset.h: added function getDrawFont(LyXFont & font) to be able to
	change the font for being drawn on screen (used only in InsetERT for
	now).

	* insettabular.C (draw): clear the parts around a cellinset ALWAYS
	and also above (was missing).
	(updateLocal): don't remove the cell selection if we have one this
	should be done where we really want to remove it.

2002-02-20  José Matos  <jamatos@fep.up.pt>

	* insetinclude.h: include_label made string const.

	* insetinclude.C (InsetInclude): moved include_label initialization.
	(linuxdoc):
	(docbook):
	(validate): fix support for temporary directory, for docbook and
	linuxdoc.

	* insetgraphics.h : new private member, graphic_label, that holds
	the entity name that defines the graphics location (SGML).

	* insetgraphics.C (unique_id): new function to give a unique label
	for graphic.
	(docbook):
	(validate): the file locatation is given by an entity reference.

2002-02-18  Herbert Voss  <voss@lyx.org>

	* insetgraphics.C: use [Debug::GRAPHICS] for lyxerr

2002-02-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetexternal.C Changes due to the renaming of support/syscall.[Ch]
	as support/systemcall.[Ch] and of class Systemcalls as class SystemCall.

2002-02-18  José Matos  <jamatos@fep.up.pt>

	* insetinclude.C (validate): some code only applies to latex buffers,
	it was made conditional.

2002-02-12  Herbert Voss  <voss@lyx.org>

	* insetgraphics.C: (prepareFile) do not check at this time
	if the file is present.

2002-02-12  Herbert Voss  <voss@lyx.org>

	* insetgraphics.C: latex(), return the correct newlines

2002-02-13  José Matos  <jamatos@fep.up.pt>

	* inseturl.C (docbook): escape & in url.

2002-02-13  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetspecialchar.C (isLineSeparator): line breaking is allowed
	after HYPHENATION and MENU_SEPARATOR

	* inset.h (isLineSeparator): new method, returns false by default.

2002-02-12  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetert.C (status): do not update the text inset, but the ERT
	inset.

2002-02-11  John Levon  <moz@compsoc.man.ac.uk>

	* insetnote.C: use notebg for background

2002-02-08  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C:
	* insetgraphicsParams.[Ch]: adding new Option noUnzip to
	prevent LyX from unzipping when this should be handled
	by latex vis the graphic.cfg.
	clean up the code

2002-02-08  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C: prepareFile(): fix bug when file doesn't
	exists, than return filename with extension

2002-02-06  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C: prepareFile(): don't convert the file, when
	it's not viewed in LyX. Saves a lot of time when opening a
	document!

2002-02-05  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C:
	* insetgraphicsParams.[Ch]: some cosmetic changes to latex output
	and adding a rotate bool similiar to subcaption

2002-02-04  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C:
	* insetgraphicsParams.[Ch]: add a LyXView-scale to have a
	similiar view to the LaTeX one. Get zipped files work.

2002-02-04  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphicsParams.C (init): set display to DEFAULT.
	No longer #include "lyxrc.h".

2002-02-04  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphics.C (readFigInset): comment out the "zippedFile" stuff
	for now (so that the code compiles).

2002-02-02  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C: delete inVariant() and some minor changes
	* insetgraphicsParams.[C]:

2002-02-01  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphics.C (updateInset): if params.display == DEFAULT,
	interogate lyxrc.display_graphics before diaplaying the graphic.

	* insetgraphicsParams.[Ch]: respect the new DEFAULT state of
	InsetGraphicsParams::DisplayType.

2002-01-31  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C: (readfigInset) set display to pref-default

2002-01-30  Herbert Voss  <voss@lyx.org>

	* insetgraphic.C: get the filetyp from it's contents
	* insetgraphicparams.C: add token scale and lyxrc.display when
	creating a new inset

2002-01-30  Angus Leeming  <a.leeming@ic.ac.uk>

	* figinset.C: added using std::ios directive.

2002-01-30  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* figinset.C (runqueue): open translation file in binary mode (for
	cygwin).

2002-01-27  Herbert Voss  <voss@lyx.org>

	* insetgraphic.[Ch]: mostly newritten to support graphicx with
	all options and to be sure that the old figinsets are correct
	converted.
	* insetgraphicParams.[Ch]: a lot of chamges to have a clean data-
	structure and to support all lengths as LyXLength. The Parameter
	structure changed again, but reading of "old" 1.2 graphic insets
	is no problem.

2002-01-20  Dekel Tsur  <dekelts@tau.ac.il>

	* insetert.h (forceDefaultParagraphs): Added

2002-01-20  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insettabular.C (getMaxWidth):
	(forceDefaultParagraphs): use Tabular::GetCellFromInset

2002-01-19  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insettabular.C (getMaxWidthOfCell): adapt to the new definition
	of LyXLength::inPixels

	* inset.C (latexTextWidth):
	* insetminipage.C (latexTextWidth): new method, which implements
	the equivalent of the LaTeX macro \textwidth

	* insetminipage.C (getMaxWidth): use latexTextWidth

2002-01-18  Juergen Vigna  <jug@sad.it>

	* inset.C (getMaxWidth): try to fix fluctuation of collapsable insets.

2002-01-17  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insettabular.C (getMaxWidthOfCell): use LyXLength::inPixels

	* insetminipage.[Ch]: change width_ and height_ to be LyXLength
	instead of string

2002-01-17  Juergen Vigna  <jug@sad.it>

	* insettabular.C (lockInsetInInset): same change as in insettext.

	* insettext.C (draw): width() function was called without setting
	the right top_x which could lead to wrong insetWidth setting!
	(lockInsetInInset): call edit instead of calling lockInset if we
	have to lock an inset inside!
	(edit): we have to also tell the inset that we have to redraw the
	frame on an edit call if this inset draws a frame only if locked.

2002-01-16  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetbib.C (getFiles): uncomment Path variable.

2002-01-16  Juergen Vigna  <jug@sad.it>

	* insettabular.C (forceDefaultParagraphs): fixed bug returning value
	of wrong cell.

2002-01-16  Allan Rae  <rae@lyx.org>

	* insetinclude.C (docbook): someone forgot a ";"

2002-01-16  José Matos  <jamatos@fep.up.pt>

	* figinset.C (docbook): removed a old place holder "@".
	* insetgraphics.C (docbook): remove the file sufix if graphic is eps.
	* insetinclude.C (linuxdoc): if include is verbatim, then export the
	ascii text version, clearly guarded inside a CDATA section.
	(docbook): in docbook 4, inlinegraphics is empty.
	* insettabular.C (linuxdoc): export the ascii version of the table
	inside a CDATA section.

2002-01-14  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetparent.C (InsetParent):
	* insetgraphicsParams.C (Write):
	(Read):
	* insetgraphics.C (prepareFile):
	(readFigInset):
	(docbook):
	* insetexternal.C (executeCommand):
	(doSubstitution): use Buffer::filePath

	* insetbib.C (getFiles): add a #warning for Angus

	* insetgraphics.C: Add a remark about how filenames should be
	considered to be relative to buffer (but absolute is still allowed)
	(draw): do not try to get status if lyxrc.use_gui is false

2002-01-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* inset.[Ch]:
	* insetcollapsable.[Ch]:
	* insettabular.[Ch] (searchForward, searchBackward): change the
	bool const & params to bool.

	* insetminipage.[Ch] (width, height): renamed as pageWidth, pageHeight
	to avoid the name clash with InsetCollapsable's methods of the same
	names but different functionality.

2002-01-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettext.C (ascii): use lyx::count rather than countChar.

2002-01-14  John Levon  <moz@compsoc.man.ac.uk>

	* insettabular.C: return early for the LFUN_*BUF[SEL] funcs too

2002-01-13  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetgraphics.C (updateInset): do not try to render image if
	lyxrc.use_gui is false (bug #104)

	* insetinclude.C (loadIfNeeded): do not call bufferlist.readFile
	if file does not exist

	* figinset.C (browseFile): add shortcuts to directory buttons

	* insettext.C (updateLocal): update menubar and toolbar here too.

2002-01-13  Allan Rae  <rae@lyx.org>

	* insettabular.C (InsetTabular): Both constructors now initialise
	all class variables.

2002-01-11  Juergen Vigna  <jug@sad.it>

	* insettext.C (insetButtonPress): set the_locking_inset to 0.

2002-01-11  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insettabular.C (getStatus): add forgotten brace around multiline
	if statement.

2002-01-09  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetfloat.C (validate): require "float" instead of "floats".

2002-01-08  Martin Vermeer  <martin.vermeer@hut.fi>

	* insettabular.C (getStatus): use FuncStatus

2002-01-08  Juergen Vigna  <jug@sad.it>

	* insettabular.C (insetButtonRelease): now this should work too
	correctly.

	* insetminipage.C (getMaxWidth): fixed for minipage inside insets and
	if the width is a percentage.

	* inset.h: added isChar() function and implemented this for
	insetspecialchar insetquotes and insetlatexaccent.
	added forceDefaultParagraphs() and implemented it for insettabular.

2002-01-07  Juergen Vigna  <jug@sad.it>

	* insettext.C (getLyXText): Fixed this function. An insert into the
	map is only done if we REALLY have a new BufferView.

2002-01-07  Martin Vermeer  <martin.vermeer@hut.fi>

	* insettext.C: fix bug illustrated by attachment #37 of bug #59

2002-01-05  John Levon  <moz@compsoc.man.ac.uk>

	* insetinclude.C: fix use of FileInfo

2002-01-07  Juergen Vigna  <jug@sad.it>

	* insettabular.C (draw): fixed clearing of cell around inset.

2002-01-05  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): move the calls so that insetWidth/Asc/Desc
	variables are updated.

	* insettabular.C (resetPos): set always the inset_y as it may be
	needed in another function.
	(searchBackward): don't draw while searching.

2002-01-04  Juergen Vigna  <jug@sad.it>

	* insettext.C (lockInsetInInset): forgot to set a cursor.

2002-01-02  Juergen Vigna  <jug@sad.it>

	* insettext.C (insertInset): make the correct undo informations on
	inserting new insets.

2001-12-31  John Levon  <moz@compsoc.man.ac.uk>

	* insettabular.C: correct single-cell select vertically

2001-12-27  Juergen Vigna  <jug@sad.it>

	* insettabular.C (ascii): export as tab-separated-values if the
	function was not called from export (f.ex.: clipboard).

	* insetcollapsable.h: added default support for ascii, linuxdoc and
	docbook export (the insettext is exported by default!)

	* insettabular.C (copySelection): suff the clipboard with the tabular
	data in a tab separated format, seems more naturals then with all the
	formating.

2001-12-24  Juergen Vigna  <jug@sad.it>

	* insettext.C (insetMotionNotify): added a mouse_x & mouse_y position
	to check for REAL mouseMotion.

2001-12-20  Juergen Vigna  <jug@sad.it>

	* inset.C (cursor): return the owners cursor if available instead of
	always only the bv->text->cursor.

	* insettabular.C (checkLongtableSpecial): works now.

2001-12-19  Juergen Vigna  <jug@sad.it>

	* insettabular.C (tabularFeatures): fix the row setting of ltt as
	this has to be always row + 1 as 0 means not selected!
	(checkLongtableSpecial): added
	(tabularFeatures): better longtable options support

	* insettext.C (resizeLyXText): reinit the text always also on a
	empty insettext!

2001-12-18  Juergen Vigna  <jug@sad.it>

	* insettext.C (updateInsetInInset): look if we have to autocollapse
	paragraps and return if the update is requested for ourself.

	* insetert.C (status): update the insettext not myself as that is what
	we need.

	* insetcollapsable.C (updateInsetInInset): always call the InsetText's
	function only return if the update was requested with myself.

	* insettext.C (insetButtonPress): fixed stupid bug.
	(various functions): pay attention that lt is cleared BEFORE calling
	updateLocal() and try to use it in the right manner (don't use it
	if it's not really neccessary!)
	(collapseParagraphs): insert a blank between collapsing paragraphs
	if neccessary (not already there!).

2001-12-18  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettabular.C: move includes around a bit, add a couple of
	consts.

	* insettext.[Ch]: move includes around a bit, other ws changes and
	small stuff.

2001-12-17  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insettext.C (insetButtonRelease): fix compile problem

2001-12-17  Juergen Vigna  <jug@sad.it>

	* insettext.C (insetButtonPress): set the selection cursor!
	(insetButtonPress): clear the selection (and set with that the
	selection.cursor) if we only hit an inset!

	* insetert.C (read): removed piece of compatibility code only needed
	for 1.2.0.

	* insettabular.C (insetButtonRelease): fixed so that sub-dialogs
	can be opened.

	* insetcollapsable.C (insetButtonRelease): changed so that it can
	open eventual existing popup dialogs on mousebutton==3.

	* insetfloat.C (insetButtonRelease): removed not needed anymore!

	* insetminipage.C (insetButtonRelease): removed not needed anymore!

	* inset.C (insetButtonRelease): return a bool for telling the outer
	world that we opened a dialog.

2001-12-07  Juergen Vigna  <jug@sad.it>

	* insettext.C (paragraph): remove the deleteing of paragraphs as
	it was a WRONG move!

2001-12-06  John Levon  <moz@compsoc.man.ac.uk>

	* insettabular.h:
	* insettabular.C: use new setSelection(). Allow
	  selection of single cells.

2001-12-12  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insetquotes.C (latex): fix to use the local language setting at
	the point where the inset is inserted (different macros for
	different french packages)

2001-12-11  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* inset.h: add par_owner_ member variable and parOwner
	setter/accessor.

2001-12-10  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insettabular.C (everywhere): adapt because widths are now real
	widths and not strings

	* insettext.C (draw): re-introduce the calls to width(), ascent()
	and descent() to initialize the caching variables.

2001-12-09  Jean-Marc Lasgouttes  <lasgouttes@freesurf.fr>

	* insettext.C (draw):
	(drawFrame): use insetWidth instead of last_width

	* insettext.h: remove variable last_width (insetWidth is exactly
	the same) and last_height (computed but never used!)

2001-12-10  Allan Rae  <rae@lyx.org>

	* insettabular.C (localDispatch): cleanup unlockInsetInInset calls

2001-12-05  John Levon  <moz@compsoc.man.ac.uk>

	* insettext.C (insetAllowed): add comment

2001-12-05  Juergen Vigna  <jug@sad.it>

	* insettext.C (insetAllowed): fixed for the case that we directly
	ask the insettext from its LyXText.
	(paragraph): fixed the crash when assigning the par->next() from
	the EmptyParagraphMechanism!

2001-12-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetbib.C:
	* insettabular.C:
	* insettext.C: change "while(" to "while ("

2001-12-04  Juergen Vigna  <jug@sad.it>

	* insetert.C (edit): handle Inlined status.

	* insettext.C (insertInset): trying John's fix for the trailing cursor

	* insetert.C (insetButtonPress): added to handle inlined status
	(insetMotionNotify): ditto.

	* insettext.C (clearInset): changed Painter & in BufferView * param,
	to be able to call ascent,descent methods.

2001-12-03  Juergen Vigna  <jug@sad.it>

	* insettext.C (updateInsetInInset): use lt variable to forbid
	changes of LyXText in an update call.
	(updateInsetInInset): fixed updating of non locked insets!

2001-12-01  John Levon  <moz@compsoc.man.ac.uk>

	* insettabular.C: capture some more functions to prevent
	selection drawing problems. Bug #451274

2001-12-01  John Levon  <moz@compsoc.man.ac.uk>

	* insetgraphics.C:
	* insetgraphicsParams.C: fix inverted sense of float_equal

2001-11-30  Juergen Vigna  <jug@sad.it>

	* insettabular.C (InsetTabular): use the save_id flag to create also
	the tabular with the same id's.

	* insettext.C (setParagraphData): added a same_id function for undo
	to set the same paragraph id's as of the paragraph we are setting.

2001-11-30  José Matos <jamatos@fep.up.pt>

	* inseturl.[Ch]:
	* insettoc.[Ch]: DocBook -> docbook.

2001-11-29  André Pönitz <poenitz@gmx.net>

	* inseterror.C:
	* insettext.C: further reduction of header dependencies by using
	lyx::layout_type and lyx::textclass_type from support/types.h

2001-11-29  Juergen Vigna  <jug@sad.it>

	* insettext.C: inserted a reinitLyXText function everywhere I delete
	the paragraphs! This should fixe the crashes we had.
	Also use the new function firstRow() instead of getRowNearY(dummy_y)
	(paragraph): set the InsetOwner() of the new paragraphs!

2001-11-28  André Pönitz <poenitz@gmx.net>

	* insetnote.C: add pos initialization that I removed without
	  knowing what I did.

2001-11-28  Juergen Vigna  <jug@sad.it>

	* insettabular.C (resetPos): hack to not crash with infinite paints.

	* insettabular.h: insert missing function allowSpellcheck()!

	* insetcollapsable.C (draw): fixed wrong width of collapsed inset!

2001-11-04  John Levon  <moz@compsoc.man.ac.uk>

	* insetfloatlist.h:
	* insetfloatlist.C: derive from InsetCommand so gui can use it
	  easily

2001-11-26  André Pönitz <poenitz@gmx.net>

	* insettext.[Ch]:
	* insetert.C:
	* insetnote.C: reduce header dependencies, introduce type for
	positions

2001-11-23  John Levon  <moz@compsoc.man.ac.uk>

	* various: update for Alert.h

2001-11-22  John Levon  <moz@compsoc.man.ac.uk>

	* inset.h: fix comment

	* insettext.C: use par->isInset()

2001-11-22  Allan Rae  <rae@lyx.org>

	* insetcollapsable.h:
	* inset.h: Changes to checkInsertChar() behaviour.
	Now return value indicates whether chars can be inserted.

2001-11-11  Michael A. Koziarski <michael@koziarski.org>

	* various:  updated to use the new LaTeXFeatures

2001-11-14  José Matos  <jamatos@fep.up.pt>

	* insetspecialchar.C (linuxdoc):
	(docbook): don't give a name to a unused variable.

	* insettext.C (docbook): removed unused variable.

2001-11-13  Herbert Voss  <voss@perce.de>

	* insetgraphic.C: fix scale bug

2001-11-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* inset.h (isSpace):
	(isLetter): new virtual methods.

	* insetspecialchar.C (isSpace):
	(isLetter): implement here.

2001-11-04  John Levon  <moz@compsoc.man.ac.uk>

	* inset.h: new inline helpers

	* insettext.C: use new helpers

2001-11-07  José Matos  <jamatos@fep.up.pt>

	* insettext.C (docbook): full support for paragraphs inside insettext.

2001-11-06  José Matos  <jamatos@novalis.fc.up.pt>

	* insetindex.C: added header file for std::ostream.

2001-11-03  José Matos  <jamatos@fep.up.pt>

	* insetindex.C: added using std::ostream that I forgot yesterday.

2001-11-02  Ben Guillon  <nicolas.marsgui@libertysurf.fr>

	* insetindex.h (docbook):
	* insetindex.C (docbook): added support for docbook export.

2001-11-02  José Matos  <jamatos@fep.up.pt>

	* insetcaption.C(docbook): added support for docbook export.

2001-11-02  Dekel Tsur  <dekelts@tau.ac.il>

	* insetexternal.C (updateExternal): Do not run update command if
	result file exists and is up to date.

	* ExternalTemplate.C (readFormat): Support the updateresult token.

2001-10-31  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* insetexternal.C (doSubstitution): Fix filepath ($$FPath in
	external_templates) to use the buffer->fileName() but only if
	previewing. Generating a TeX file should make FPath return
	"".

2001-10-30  John Levon  <moz@compsoc.man.ac.uk>

	* insetert.h:
	* insetert.C: fix some problems

2001-10-30  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* insetexternal.C (doSubstitution): Added $$FPath token
	to list of usable substitutions in external inset templates.

2001-10-24  Juergen Vigna  <jug@sad.it>

	* insettabular.C: use new ltType struct for setting longtable
	header and footers also new UNSET enums.

2001-10-24  José Matos  <jamatos@fep.up.pt>

	* insettabular.C (linuxdoc): Now exports the ascii's table version.
	(docbook): If the table is not inside a float then wrap it inside
	<informaltable>...</informaltable>.

2001-10-23  José Matos  <jamatos@fep.up.pt>

	* insetref.C (docbook): removed / terminator to conform SGML.

	* insetspecialchar.C (linuxdoc):
	(docbook): Added support for special chars, more than ascii export.

2001-10-22  Juergen Vigna  <jug@sad.it>

	* insettext.C (checkInsertChar): added for REALLY checking the
	font of the inserted char in the right inset!

2001-10-19  Juergen Vigna  <jug@sad.it>

	* inset.h: added method allowSpellcheck() so that insets who do
	not have anything to spellcheck can tell and so they are over-jumped.
	Implemented for InsetText and co.

2001-10-18  Juergen Vigna  <jug@sad.it>

	* inset.C (getMaxWidth): use LyXText::workWidth(BufferView, Inset *).

2001-10-15  José Matos  <jamatos@fep.up.pt>

	* insetert.C: allow export for docbook and linuxdoc

2001-10-07  Adrien Rebollo <adrien.rebollo@gmx.fr>

	* insetquotes.C (dispString): handles latin3 and latin4 quotes

2001-10-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetquotes.C (dispString): fix handling of latin9 quotes

2001-10-03  Juergen Vigna  <jug@sad.it>

	* insetert.C: ditto

	* insetcollapsable.C: change updateInset calls to not tell BV that
	we have changed status.

2001-10-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insettabular.C (deletable): make const

2001-09-28  Dekel Tsur  <dekelts@tau.ac.il>

	* insetert.C (latex): Fix the returned value

2001-09-24  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetert.[Ch] (selectNextWordToSpellcheck): new method.
	Returns string(), so nothing in an ERT inset is spellchecked.

	* insetgraphics.C (draw): print the filename if not displaying the
	image.
	(width): make sure that the width and draw methods are consistent.
	(updateInset): don't even load the image into cache if not displaying
	it.

2001-09-21  Angus Leeming  <a.leeming@ic.ac.uk>

	* various files (selectNextWord): renamed as
	selectNextWordToSpellcheck.

	* insetgraphics.C (draw): remove the previous change. Right place
	is in imageLoaderXPM.C.
	(draw): don't display the image if params.display == NONE.

2001-09-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* figinset.C (runqueue):
	* insetgraphics.C (draw): set background colour of inset from
	background to the user-configurable graphicsbg.

2001-09-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetquotes.C (InsetQuotes): when trying to decide the side of
	the quote, choose `left' only after a space or '('

2001-09-04  José Matos  <jamatos@fep.up.pt>
	* figinset.C
	* figinset.h
	* insetcaption.C
	* insetcaption.h
	* insetcollapsable.h
	* insetcommand.C
	* insetcommand.h
	* inseterror.h
	* insetert.C
	* insetert.h
	* insetexternal.C
	* insetexternal.h
	* insetfloat.C
	* insetfloat.h
	* insetfloatlist.h
	* insetgraphics.C
	* insetgraphics.h
	* inset.h
	* insetinclude.C
	* insetinclude.h
	* insetlabel.C
	* insetlabel.h
	* insetlatexaccent.C
	* insetlatexaccent.h
	* insetquotes.C
	* insetquotes.h
	* insetref.C
	* insetref.h
	* insetspecialchar.C
	* insetspecialchar.h
	* insettabular.C
	* insettabular.h
	* insettext.C
	* insettext.C (docbook): rename docBook method to docbook.

2001-09-02  Dekel Tsur  <dekelts@tau.ac.il>

	* inset.h (getFirstParagraph): New virtual method.

2001-08-20  Herbert Voss  <voss@perce.de>
	* insetbib.C: added a option bibtotoc which is from "BIB to TOC"
	in the the bibtex-database-gui for inserting a line
	\addcontentsline...

	If no style is given than there is no tex-output.

2001-08-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetbib.[Ch] (getFiles): new method, returning the BibTeX database
	files as a vector.
	(getKeys): use it.

2001-08-18  Dekel Tsur  <dekelts@tau.ac.il>

	* insetert.C (latex): Fix output for multiple paragraphs.
	(write): New code for writing paragraph data.
	(read): Set font after reading the inset.
	(localDispatch): Call set_latex_font() for more cases.

	* insetnote.h: Add empty validate method.
	* insetert.h: Ditto

	* insetnote.C (InsetNote): Set language to the language of the
	document.

2001-08-16  Juergen Vigna  <jug@sad.it>

	* insettext.C: implemented the new FINISHED states.

	* insettabular.C: ditto

	* inset.h: added more FINISHED states for cursor right,up,down

2001-08-16  John Levon  <moz@compsoc.man.ac.uk>

	* insetfloatlist.C: use "FloatName List"

2001-08-14  Juergen Vigna  <jug@sad.it>

	* insetert.C (edit): forgot to set status_ in edit calls!

2001-08-14  Dekel Tsur  <dekelts@tau.ac.il>

	* insettext.C: Compilation fix

2001-08-13  Juergen Vigna  <jug@sad.it>

	* inset.C (getMaxWidth): fixed bug of returning the wrong max width.

	* insetcollapsable.C (edit): don't recollapse an already open inset.

	* insettext.C: fixed problem when reinitializing LyXText by not doing
	it while lt is in use and post this to the next possible time in
	getLyXText().
	(searchForward): fixed not unlocking of inset if nothing found.
	(edit): set cursor behind right (was set -1 pos).

	* insetert.C (InsetERT): init status_ also in the 3rd constructor.

	* insettabular.C (tabularFeatures): fixed fix where deleting the
	last row didn't get the right actcell!

2001-08-11  Dekel Tsur  <dekelts@tau.ac.il>

	* insettext.C (localDispatch): Change language only when the inset
	becomes empty.

2001-08-10  Juergen Vigna  <jug@sad.it>

	* insettabular.C (selectNextWordInt): use the front using edit call.

	* insetcollapsable.C (getMaxWidth): rename inset to in to not have
	the parameter overwrite class variable inset.

	* inset.C (getMaxWidth): fix the setting of the minwidth = 10.

	* insettext.C (saveLyXTextState): check for invalid cursor-par.
	(reinitLyXText): remove wrong_cursor bool as not needed anymore!

	* insettabular.C (calculate_dimensions_of_cells): let's try to call
	update only for fixed with cells.
	(resetPos): try to fix the lockup on spellchecking or s&r.

	* insettext.C (update): comment this out as it seems first wrong
	and second not needed anymore!
	(some functions): call reinitLyXText() only in update() in all other
	positions set only need_update = INIT.

2001-08-08  Juergen Vigna  <jug@sad.it>

	* insettabular.C (setPos): fixed wrong actrow < rows() check.

	* insettext.C (insetUnlock): remove double-space on inset unlock.

	* insetcollapsable.C (draw): fix returned x when label > inset-width.

	* insettabular.C (update): fixed cursor positon after an insert.
	(insetAllowed): do not allow to insert insets when not inside the
	inset!
	(draw): clear below an inset too as it could have changed height.

	* inset.C (getMaxWidth): fixed width for inset in inset.

	* insettext.C (update): small fix.

	* insettabular.C (tabularFeatures): added selection support to
	DELETE_ROW/DELETE_COLUMN.

2001-08-07  Juergen Vigna  <jug@sad.it>

	* inset.C (getMaxWidth): recoded and all it's implementations!

	* insettext.C (init,setParagraph+constructors): cleanups
	(reinitLyXText): fixed problem with wrong cursor when all paragraphs
	are new and I want do a save/restore of the cursor position which is
	not possible anymore.

	* insetcollapsable.C (searchBackward): recollapse inset if not found.
	(searchBackward): ditto
	(selectNextWord): ditto

2001-08-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetlatexaccent.C (checkContents): Add some debug messages

2001-08-07  Juergen Vigna  <jug@sad.it>

	* insetert.C (read): don't use InsetCollapsable::read as we don't
	write the collapsed status anymore only the status.
	(write): ditto.

2001-08-06  Juergen Vigna  <jug@sad.it>

	* insetert.C (set_latex_font): use LyXText's setFont directly.

	* insettext.C (drawFrame): fixed one time more the right position
	and size of the frame!

	* insetert.C (~InsetERT): hide the dialog.
	(showInsetDialog): added implementation
	(open): ditto
	(close): ditto
	(status): new function for the status of the ERT inset (3-state).
	(write): output also the status of the inset for readback!
	(read): readback the status if available otherwise use collapsed_.

	* insettext.C (edit): small fix of setting the position, which could
	have gone < 0.

	* insetert.C (width): implement this function for inlined viewing.
	Added minimum width of 10 pixels!

	* insetminipage.C (InsetMinipage): just change the colors a bit so
	that border/background is a bit more visible. We will remove this
	anyway for 1.2.0!

	* insettext.C (textWidth): add a 'bool fordraw' parameter and use this
	function for getting the important widths for drawing in various
	functions and in LyXText.
	(draw): fixed up a bit (frame drawing/clearing)

2001-08-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* inset.C (convertFont): delete method. not used.

2001-08-03  Juergen Vigna  <jug@sad.it>

	* insettext.C (setFont): don't call for a draw update if we're just
	changing the cursor font!

2001-08-02  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): clear the background with the right color if
	needed. Update myself if x&max-width changed and return without doing
	anything. Let the update code handle the right stuff.

	* insetminipage.C (getMaxWidth): fixed returning of maxwidth when
	inside another inset.

2001-08-01  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (update): added an in_update bool so we avoid
	reentering.

	* insettabular.C (update): added an in_update bool so we avoid
	reentering.

	* insettext.C (insetButtonPress): hopefully fixed setselection/clear
	selection problem.
	(update): added an in_update bool so we avoid reentering.

	* insettabular.C (localDispatch): clear col/row selection when doing
	something else inside an inset.

	* insettext.C (getLyXText): fixed bug when requesting a recursive
	insettext!

2001-08-01  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcite.C (latex): Paranoia check. Make sure that there is no
	whitespace between the citation keys.

2001-07-31  Juergen Vigna  <jug@sad.it>

	* inset.h (nodraw): make the set function also const so that this
	can be called from inside other const functions.

	* insetcollapsable.h: removed inline variable and moved it over
	to the only user InsetERT.

	* insetcollapsable.C (insetButtonRelease): fixed uncollpasing the
	inset opening immediately therein lying insets dialogs!

	* insetert.C (localDispatch): set the font also if we don't have any
	chars in this paragraph, otherwise if we delete all of em and start
	writing we have the wrong font.
	(inlined): added
	(draw): implemented for inline support
	(insetButtonRelease): ditto.

2001-07-30  Juergen Vigna  <jug@sad.it>

	* insettext.C (reinitLyXText): new function to reinit the insets
	text after lot's of paragraph changes. Use this instead of the
	cache.clear() which is VERY dangerous.

	* insetfloat.C (insetButtonRelease): we should only show the dialog
	if we press on the label otherwise we have problems to open mouse
	button 3 dialogs inside this float (f.ex. of a tabular!)

2001-07-30  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C: change back to "ERT"

	* insetfloat.C: handliign of RMB on label added.

2001-07-30  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetgraphicsParams.C: #include LOstream.h here.

	* insetfoot.h: remove InsetFoot:: qualifier.

2001-07-29  Baruch Even  <baruch@lyx.org>

	* ChangeLog: Hiding time travel evidence.

	* insetgraphicsParams.h:
	* insetgraphicsParams.C:
	* insetgraphics.C: Added horizontal scale option, it actually scales both
	directions since it keeps image proportions.

	* insetgraphics.C: Fixed EPS detection to be non-hacky.

2001-07-29  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C (decideOutputImageFormat): when doing postscript output
	convert PNG/GIF/JPG to EPS, assume the rest are EPS already.

	HACKY! Will need to add an EPS detection routine like old InsetFig does!

2001-07-29  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C: Added EPSI to be an alias of EPS.

2001-07-29  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C: Change GRAPHICS to Graphics.
	Changed image conversion rules (documented at the beginning of file).

2001-07-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetert.C (get_new_label): int -> Paragraph::size_type to get
	std::min working.

	* insetgraphics.C: added a using std::endl directive.

	* insetcommand.h (getScreenLabel): removed pure virtual function,
	as it duplicates that in InsetButton.

	* insetbib.[Ch] (getScreenLabel):
	* insetbutton.[Ch] (getScreenLabel):
	* insetcite.[Ch] (getScreenLabel):
	* insetert.[Ch] (getScreenLabel):
	* insetexternal.[Ch] (getScreenLabel):
	* insetfloatlist.[Ch] (getScreenLabel):
	* insetinclude.[Ch] (getScreenLabel):
	* insetindex.[Ch] (getScreenLabel):
	* insetlabel.h (getScreenLabel):
	* insetparent.[Ch] (getScreenLabel):
	* insetref.[Ch] (getScreenLabel):
	* insettoc.[Ch] (getScreenLabel):
	* inseturl.[Ch] (getScreenLabel): passed a Buffer const * parameter.

	* insetcite.C (getScreenLabel): use this Buffer parameter in creating
	the label.
	(validate): remove check on "cite" when using natbib.

2001-07-26  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C (draw): changed casting to be in one place rather than
	all over the function.

	* insetgraphics.h:
	* insetgraphics.C (read): Added compatibility reads of InsetFig.

	* insetgraphicsParams.h:
	* insetgraphicsParams.C:
	* insetgraphics.C: Removed inline option and changed rotateAngle to float.

2001-07-28  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* insetfoot.C (validate): Added method to ensure that the
	right bit of LaTeX is emitted.

	* insetfoot.h: Added validate method to set the correct
	LaTeXFeatures bit for the special footnote code.

2001-07-26  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* insetquotes.C (dispString): display the right ISO8859-{1,9,15}
	quotes

2001-07-27  Juergen Vigna  <jug@sad.it>

	* inset.h: remove not used font variable in parameter.
	removed checkInsertChar in UpdatableInset as it was equal to
	the one in Inset and so not needed.

	* insetert.C (checkInsertChar): implementation of function
	checkInsertChar.

	* inset.h: added new function checkInsertChar.

	* various files: added c-tor and clone() function.

	* insetcollapsable.h: removed clone function here as this should
	be only realized in REAL insets and added it to all collapsable
	insets! (with the copy-constructor).

2001-07-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetminipage.C (read): handle missing parameters more gracefully

	* insetcollapsable.C (read): handel missing collapsed more gracefully

2001-07-25  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloat.C (read): handle missing parameters.

	* insettext.C (read): handle old latex end_inset

	* insetert.C (setButtonLabel): new method
	(init): use it, to set the dynamic label correctly
	(read): use it

	* Makefile.am (EXTRA_DIST): add files that is not part or the
	binary here.

	* insetcollapsable.h: remove autocollapsable (no users), remove
	draw_label, change_label_with_text and companion code. Remove args
	from some methods.
	* insetert.[Ch]: move here instead (only user)

	* inset.h: rename private variable name to name_, make
	selectNextWord return a const string. make getInsetName return a
	string const &. Remove bool from open, add close.

	* Makefile.am: don't compile insetlist, insetsection
	and insettheorem

2001-07-24  Juergen Vigna  <jug@sad.it>

	* insetert.C (InsetERT): put init after the paragraph initialization,
	as otherwise we don't set the draw_label right.

	* insetcollapsable.C (insetMotionNotify): fixed opening/closing the
	insets with the mouse without having strange selections.
	(edit): if the inset was collapsed and we open it here then put the
	cursor always at the beginning of the inset.
	(get_new_label): 15 instead of 10 max chars in the label.

	* insetert.C (localDispatch): added and handle various stuff we
	need to handle here (font setting on paragraph break, not permitted
	layout setting, etc.).

	* inset.h: added default copy-consturctor and implemented this in
	various insets with the change to use this in the clone function!

2001-07-24  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetminipage.C (InsetMinipage): set background color to red :)

2001-07-23  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insettext.C (insetUnlock): only set update to CLEAR_FRAME if
	draw frame mode is LOCKED.

	* insetcollapsable.C (edit):
	(insetButtonRelease): set update status to full when
	opening inset.

	* insettext.C (clearInset):
	* insettabular.C (draw):
	* insetlatexaccent.C (draw): honor background color.

	* inset.h: new member background_color_, initialized to
	LColor::inherit.

	* inset.C (backgroundColor): new method.
	(setBackgroundColor): new method.

	* insetert.C (init): new method, called by the ctors.
	(InsetERT): when inserting contents, make sure the font is
	ALL_INHERIT.

	* insetnote.C (InsetNote): when inserting content, remove trailing
	newline
	(init): set background color to LColor::note

2001-07-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetcollapsable.C: adjust

	* insetbutton.C: adjust

2001-07-23  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.h: removed widthCollapsed variable, LyXFont
	parameter on the _collapsed function (was not needed) and call
	always width_collapsed().

	* insetert.C (InsetERT): use setLabel with "true" flag.

	* insetcollapsable.C: modified various functions to set the draw_label
	string right in any condition.
	(setLabel): added a bool parameter to set change_label_with_text.

	* insetcollapsable.h: added draw_label string which is set to the
	actual drawn label-string, while label is the original static label
	of this collapsable inset. Added bool change_label_with_text to set
	if we want that the label changes to the start of the InsetText's
	text when collabpsed. You can set this flag with the setLabel funciton.
	Added bool inlined for inlined collapsable insets, but not handled
	yet.

	* insetcollapsable.C (get_new_label): added should get a new label
	from the InsetText beginning (for now 10 chars).

2001-07-21  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* insetquotes.C (latex): fix the handling of french double quotes
	when not using the french pachage.

2001-07-22  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetcollapsable.h: make WidthCollapsed mutable.

	* insetindex.C (lyxCode): InsetIndex returns INDEX_CODE,
	InsetPrintIndex returns INDEX_PRINT_CODE.

	* inset.h: add INDEX_PRINT_CODE

	* insetcollapsable.C (draw): init widthCollapsed if necessary
	(width): ditto.

	* insetquotes.C (width): use the local language, not the document
	language.
	(draw): ditto.
	(dispString): add additional spacing for all french languages,
	like fr_CA.
	(validate): make it work when there is no default language

	* insetspecialchar.h: rename kind to kind_; add kind() accessor.

	* insetnote.C (init): new method, called by the constructors
	(InsetNote): new constructor with contents passed as a string

2001-07-21  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetfootlike.C (insetAllowed): disallow float in footlike.

	* insetert.C (InsetERT): add collapsed argument to the constrctor
	with contents.

2001-07-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetindex.h: shut off warning

2001-07-20  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (update): recoded hopefully works now!

2001-07-19  Juergen Vigna  <jug@sad.it>

	* most files: implemented the below new introduced function.

	* inset.h: added new edit(BufferView *, bool front) method to be able
	to enter an inset from the front/back without knowing x/y positions
	and baselines inside the inset. So I just can tell the inset activate
	me and set the cursor on the front/back of yourself.

2001-07-18  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (edit): fixed hopefully the y parameter which
	is given to the InsetText.
	(insetButtonPress): ditto
	(insetButtonRelease): ditto
	(insetMotionNotify): ditto

2001-07-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetspecialchar.[Ch]: change HYPHENATION_BREAK to
	LIGATURE_BREAK, since the name is so stupid.

2001-07-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetnote.[Ch]: (insertInset, insetAllowed): removed. Note now uses
	the default InsetCollapsable methods. I.e., it can insert anything.
	(write) output the name of the inset, not some silly hack for
	compatability with the old InsetInfo.

	* insetinfo.[Ch]: removed.
	* insetnote.[Ch]: new files. InsetNote replaces InsetInfo. The inset is
	now collapsable, but functionality is otherwise identical to InsetInfo.

	* Makefile.am: removed insetinfo.[Ch]. Added insetnote.[Ch].

2001-07-19  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetspecialchar.[Ch]: add support for HYPHENATION_BREAK. some
	reformatting

	* insetquotes.C: general cleanup
	(dispString): add spaces inside french double quotes.
	(latex): ditto. Moreover, treat first the case where the frenchb
	or french options have been given.

2001-07-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcite.[Ch] (latex, validate): new methods, required for natbib
	support.

2001-07-19  Dekel Tsur  <dekelts@tau.ac.il>

	* figinset.C (RegisterFigure): Print debug message only when
	current_view is available.

2001-07-18  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* many files: update to match the change below

	* inset.h (insetAllowed): renamed from insertInsetAllowed;
	implement the version which takes an inset here.

	* insetcollapsable.[Ch]: implement open and isOpen

	* inset.h: remove insertInsetAllowed from Inset
	(open): new method, to open or close an inset
	(isOpen): returns the status of an inset
	(isCollapsable, colapse): removed

2001-07-13  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* insetquotes.C (dispString): display french guillemets when using
	ISO8859-15.

2001-07-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcollapsable.h: remove bogus return statements

2001-07-18  Juergen Vigna  <jug@sad.it>

	* insettabular.C (selectNextWord): fixed spellchecking for the
	first cell of a tabular (wasn't entered!)
	(getLyXText): changed to enter automatically insettext and return
	it's LyXText if we're locked.

2001-07-17  Juergen Vigna  <jug@sad.it>

	* various files: implemented the below functions.

	* inset.h: added functions
	- virtual string selectNextWord(BufferView *, float & value) const;
	- virtual void selectSelectedWord(BufferView *) { return; }
	- virtual void toggleSelection(BufferView *, bool /*kill_selection*/)
	needed for spellchecking correctly!

2001-07-16  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C (latex): write out all paragraphs.

2001-07-17  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C (draw): Removed unneeded casts.

2001-07-16  Juergen Vigna  <jug@sad.it>

	* insettext.C (update): fixed small oversight (reset lt to 0).

2001-07-14  Baruch Even  <baruch@lyx.org>

	* insetgraphics.h:
	* insetgraphics.C: Added a copy c-tor and handled the same_id case.

2001-07-13  Angus Leeming  <a.leeming@ic.ac.uk>

	Consistent use of Lsstream.h:
	* figinset.C: removed using std::ostringstream directive.

	* insetgraphics.C (createLatexOptions):
	* insetinclude.C (unique_id):
	std::ostringstream -> ostringstream.
	* insettext.C (localDispatch): std::istringstream -> istringstream.

2001-07-13  Juergen Vigna  <jug@sad.it>

	* insetfloat.C (insertInsetAllowed): added missing const_cast.

	* insetcollapsable.C (getLockingInset): ditto.

2001-07-12  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.h: added implementation of new function for
	collapsable status.

	* various files: added implementation of new insertInsetAllowed-func
	and redone the function a bit more.

	* inset.h: added isCollapsable(), bool collapsed(),
	collapsed(BufferView *, bool) and insertInsetAllowed(Inset::Code).

	* insetfloat.C (insertInsetAllowed): make a bit more checks.

	* insettext.C (getLyXText): use 'lt' to assure we're not erasing the
	LyXText which is marked for removal while we're using it!

	* insettext.h: added private LyXText * lt to use it to assure we are
	not deleting our LyXText while we're using it!

2001-07-11  Juergen Vigna  <jug@sad.it>

	* insettext.C (insertInset): check if we are before the inset after
	inserting it! This check IS needed. Remove the Undo-Call as it is
	called in LyXText::insertInset!

	* insettext.h: added struct InnerCache.

	* insettext.C (deleteLyXText): insert a new InnerCache mechanism so
	that we ONLY delete the LyXText in the getLyXText() routine. So we
	are sure we don't delete LyXText while someone is working with it!

2001-07-12  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetexternal.C: (*it). -> it->
	* insettext.C: ditto

2001-07-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcollapsable.C (edit): always open collapsed insets (even if
	they are not autocollapsable)

	* insetcommand.C (operator=): simplify.

2001-07-10  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C (latex): handle META_NEWLINE

2001-07-09  Juergen Vigna  <jug@sad.it>

	* insetert.h: a normal InsetText can insert insets, but we won't.

	* inset.h: return default "false" on insertInsetAllowed and implement
	this function where a returnvalue != "false" is needed.

2001-07-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C (InsetERT): new contructor

2001-07-06  Juergen Vigna  <jug@sad.it>

	* a lot of files: added implementation of the below new functions
	and the change to clone(). Also the call of the new undo-functions
	where needed.

	* inset.h: added an inset_id, added functions getParFromID,
	getInsetFromID, firstParagraph, cursor and id functions, added
	bool same_ids to clone function.

2001-07-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.[hC]: make cached_text a shared_ptr, make Cache be a map
	of BufferView * and shared_ptr<LyXText>

2001-07-05  Juergen Vigna  <jug@sad.it>

	* insettext.C (clear): deleted also the cache not only LyXText.
	(setParagraphData): ditto.

2001-07-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloat.C (latex): let the specific placement take presedence
	if set, otherwise choose document placement if set, otherwise just
	use float default placement.

2001-07-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (localDispatch): call CutAndPaste::'s static method
	directly.

2001-07-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetbib.C: no meed to include forms.h here.

2001-07-03  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettext.C: added using std::make_pair directive.

2001-07-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (getLyXText): avoid multiple lookups, and simplify
	slightly
	(deleteLyXText): ditto
	(resizeLyXText): ditto

2001-07-02  Juergen Vigna  <jug@sad.it>

	* insettext.C (getLyXText): introduce a cache in getLyXText so that
	following calls are only returned the right pointer without the over
	head to search in the map.
	(various funcs): reset the cached_bview variable as this signs that
	the cache is not valid anymore.

2001-06-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insettabular.C (clone): do not copy the LyXTabular twice

2001-06-29  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.h (TEXT): delete method

2001-06-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetmarginal.C (latex):
	* insetfoot.C (latex): fix spacing of notes in LaTeX

	* insettext.C (localDispatch): use .c_str() on istringstream
	constructor argument.

2001-06-29  John Levon  <moz@compsoc.man.ac.uk>

	* insettoc.h:
	* insettoc.C:
	* inseturl.h:
	* inseturl.C: fix method names in these to begin
	  with small char too, so they inherit

2001-06-28  Juergen Vigna  <jug@sad.it>

	* insettext.C (setFont): fixed font settings using toggleFree()
	instead of setFont().

2001-06-28  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* Change a lot of method names to begin with a small char.
	Changes to a lot of files because of this.

2001-06-27  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloatlist.C (Write): std:: qualify ostream
	(Latex): ditto

2001-06-26  The LyX Project  <lyx@violet.home.sad.it>

	* figinset.C:
	* inset.C:
	* insetgraphics.C: send debug output to Debug::INFO instead of
	Debug::ANY.

2001-06-26  The LyX Project  <lyx@rose.home.sad.it>

	* insettabular.h:
	* insettabular.C (getStatus): update to use func_status

2001-06-26  ben <nicolas.marsgui@libertysurf.fr>

	* insetref.C (DocBook): added support for cross-references without
	a name.

2001-06-26  The LyX Project  <jug@sad.it>

	* insetref.C:
	* insetref.h:
	* insetlabel.C:
	* insetlabel.h: removed escape method and moved it to
	support/lstrings.h.

2001-06-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettabular.C (getMaxWidth): do the speedup in a different way,
	remove dead code

2001-06-24  The LyX Project  <Asger>

	* insettabular.C (getMaxWidth): We cache a mapping from
	inset to cell in order to speed this method up.

2001-06-24  The LyX Project  <Asger>

	* insettext.C: Optimized InsetText::draw or something.

2001-06-23  The LyX Project  <lyx@rose.home.sad.it>

	* insettext.C (LocalDispatch): fixed inserting of 'normal chars'

2001-06-23  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* inset.h: name change from lyxinset.h

2001-06-22  Dekel Tsur  <dekelts@tau.ac.il>

	* insetfloat.C (Validate): Add a call to InsetCollapsable::Validate

2001-06-14  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): removed warnings.

2001-06-13  Juergen Vigna  <jug@sad.it>

	* insettabular.C (nodraw): only go down the tree if we don't have
	that flag set otherwise it's obvious that we don't want to draw.
	(LocalDispatch): do also an update if we have an undispached result.

2001-06-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcite.C:
	* insetgraphicsParams.C:
	* insettext.C: removed // -*- C++ -*- as first line.

2001-06-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxinset.h (resizeLyXText): shut off warning about unused
	parameter "force"

2001-06-07  Juergen Vigna  <jug@sad.it>

	* insettext.C (resizeLyXText): honor the new force flag.

	* lyxinset.h: add 'bool force' parameter to resizeLyXText(...)

	* insettabular.C (deleteLyXText): new function

2001-06-02  John Levon  <moz@compsoc.man.ac.uk>

	* insettheorem.C:
	* insetminipage.C:
	* insetlist.C:
	* insetfootlike.C:
	* insetfloat.C:
	* insetert.C:
	* insetcollapsable.C:
	* insetcaption.C: LColor tidy

2001-06-01  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* figinset.C: fix typo

2001-06-01  Juergen Vigna  <jug@sad.it>

	* insettabular.C (resetPos): small hack so that scroll is not set to
	0 when we are in the last column of a tabular. This is a problem we
	have because of constats 20 offset on both directions, so this can
	cause on the limit an endless loop.

	* insettext.C (SetFont): forgot that we can have locking insets ;)

2001-05-31  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): small fix for LFUN_TAB.

2001-05-31  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* figinset.C: add using std:: directive for the C functions which
	need that.

2001-05-31  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloat.C (Write): write out wide info
	(Read): read the wide info
	(Latex): use the wide info when creating latex.

	* insettext.C: adjust

	* insetgraphics.[Ch] (statusMessage): change to return string
	(width): adjust
	(draw): adjust

	* figinset.C (runqueue): add std::
	(Recompute): ditto

2001-05-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcite.C (Ascii): add std:: qualifier

2001-05-28  Juergen Vigna  <jug@sad.it>

	* insettext.C (resizeLyXText): clear LyXText ONLY if we don't have
	a endless-width inset (maxWidth < 0).
	(Edit): change language only if not equal.

	* insettabular.C (resetPos): call UpdateLocal only on REAL scroll!

	* insettext.C (draw): fixed draw/clear of InsetText-Frame

2001-05-16  Juergen Vigna  <jug@sad.it>

	* insettext.C (selectAll): added
	(clearSelection): added

	* insettabular.C (SetFont): now we may set a font on a whole selection!
	(getSelection): added helper function.

2001-05-27  Dekel Tsur  <dekelts@tau.ac.il>

	* insetcite.C (Ascii): Add method.

2001-05-16  Ruurd Reitsma  <r.a.reitsma@wbmt.tudelft.nl>

	* figinset.C:
	* insetbib.C: fix path for OS/2 & Win32

2001-05-10  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfoot.C (Latex): don't use % after footnote.

2001-05-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (Read): use clear
	(SetParagraphData): use LyXParagraph copy constructor instead of clone

2001-05-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetfloatlist.h: add a bunch of std:: qualifiers.

2001-05-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxinset.h: remve LOF_CODE, LOT_CODE, LOA_CODE, add
	FLOAT_LIST_CODE, renumber code list.

	* insettoc.C (getScreenLabel): remove support for float lists
	(LyxCode): ditto
	(Ascii): ditto

	* insetfloatlist.[Ch]: new files

	* Makefile.am (libinsets_la_SOURCES): add insetfloatlist.[Ch]

2001-04-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettabular.C (LocalDispatch):
	* insettext.C (LocalDispatch): getClipboard() is now a BufferView
	method

2001-05-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C: remvoe !NEW_INSETS cruft

	* insettabular.C: remove !NEW_INSETS cruft

	* insetcollapsable.h: remove !NEW_INSETS cruft

	* insetbib.C: remove !NEW_INSETS cruft

2001-04-27  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettoc.C: hack to make listof algorithm work

2001-04-20  Juergen Vigna  <jug@sad.it>

	* insettext.C (Edit): call checkAndActivateInset with y=0 if y < 0.

2001-04-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetquotes.C (Latex): improve the guard against
	unwanted !` and ?` ligatures. This should really be done in
	another place (to catch all this ligatures at low-level).

2001-04-17  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (init): remvoe leftovers from cursor_visible change
	(draw): use c++ cast
	(LocalDispatch): dispatch LFUN_MESSAGE

	* insettabular.C (InsetTabular): remove leftovers from
	cursor_visible, and scoped_ptr changes
	(draw): use c++ cast

	* insetcollapsable.C (draw): use c++ cast

	* ExternalTemplate.h: inherit privaely from noncopyable
	* insetcommand.h: ditto
	* insetinclude.h: ditto

2001-04-16  Allan Rae  <rae@lyx.org>

	* insettoc.C (Ascii):
	* insettext.C (draw):
	* insettabular.C (setPos):
	* insetminipage.C (Read):
	* insetfloat.C (placement):
	* insetcaption.C (Ascii, DocBook):
	* figinset.C (runqueue): #warning triggers an error on Sun CC 6.0 as
	an unrecognised preprocessor directive.  So ensure they're wrapped.

2001-04-06  John Levon  <moz@compsoc.man.ac.uk>

	* insetexternal.h:
	* insetexternal.C: set view on Clone. Add _ to private members.

2001-04-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (InsetText): fix new
	(InsetText): reindent some, simplify deletion of par list
	(clear): simplify deletion of par list, fix new
	(SetParagraphData): simplify deletion of par list

	* insettabular.[Ch] (getLabelList): implement new method

2001-04-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxinset.h: do not include gettext.h...

	* inset.C:
	* insetcaption.C:
	* insetexternal.C:
	* insetgraphics.C:
	* insetindex.C:
	* insetlabel.C:
	* insetlatexaccent.C:
	* insetminipage.C:
	* insetquotes.C:
	* insettabular.C:
	* inseturl.C: ... and do it here instead

2001-04-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetcollapsable.[Ch] (getLabelList): add std:: on vector<string>

	* insettext.[Ch] (getLabelList): add std:: on vector<string>

	* insetcollapsable.[Ch] (getLabelList): implement

	* insettext.[Ch] (getLabelList): implement

	* insettext.h: reindent

	* insettabular.h: make tabular a scoped_ptr

	* insettext.C (init): adjust for cursor_visible
	(ToggleInsetCursor): constify asc and desc, font, adjust for
	cursor_visible
	(ShowInsetCursor): constify asc and desc, font, adjust for
	cursor_visible
	(HideInsetCursor): adjust for cursor_visible

	* insettabular.C: reindent some
	(InsetTabular): adjust for scoped_ptr and cursor_visible
	(InsetTabular): ditto
	(~InsetTabular): delete delete
	(Clone): adjust for scoped_ptr
	(Read): constify old_format, adjust for scoped_ptr, move init of
	token
	(draw): constify tx, localize loop vars.
	some other localization of variables, remove double initilizatons.

	* insetfoot.C: remove using std::ostream, add ostream where needed

2001-04-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxinset.h: some reindentaion, use initializer list for
	constructro.
	UpdatableInset: make cursor_visible a private var add
	public isCursorVisible(), add protected toggleCursorVisible() and
	proctected setCursorVisible(bool), make scroll call the Inset::scroll

	* insettoc.C: remvoe using decl
	(getScreenLabel): make cmdname donst
	(LyxCode): ditto
	(Ascii): ditto
	(Ascii): don't use endl

	* insetfootlike.C: remove using decl at file scope and add std::
	where needed
	* insetmarginal.C: ditto

	* insetfoot.C: some reformatting

	* insetfloat.C (InsetButtonRelease): adjust the hit area

	* insetert.C (SetFont): some reformatting

	* insetcollapsable.C: some reformatting and constification
	(Clone): comment out.
	* insetcollapsable.h: some reformatting
	(Clone): comment out.

	* inset.C: reindent
	(scroll): simplify

2001-03-30  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.h: changen *inset to be a InsetText inset.

	* some files: changed to reflect the above change.

2001-03-29  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetexternal.[Ch]: renamed InsetExternal::InsetExternalParams as
	InsetExternal::Params.
	Added operator==() and operator!=() for the Params struct.

2001-03-29  Juergen Vigna  <jug@sad.it>

	* lyxinset.h: changed parameter of getMaxWidth from Painter & to
	BufferView *.

	* insetminipage.C: removed widthp_ and all it's functions and changed
	to use new %-lengths of LyXLength.

2001-03-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* figinset.[Ch]: changed headers lyx.h, form1.h -> figure_form.h.

2001-03-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphicsParams.C (operator!=): new function, needed by the
	ControlGraphics class.

2001-03-28  Juergen Vigna  <jug@sad.it>

	* insettext.C (InsetButtonPress): only enter !inset if button == 2
	(checkAndActivateInset): don't use the values returned from
	call to bv->checkInsetHit.

	* insetminipage.C (Clone): set special minipage values.

	* insetcollapsable.C (draw): changed to draw the button in the
	upper left corner outside the textinset.
	(ascent): changed because of different drawing
	(descent): ditto
	(width): ditto
	(Edit): ditto
	(InsetButtonPress): ditto
	(InsetButtonRelease): ditto
	(InsetMotionNotify): ditto

2001-03-27  Dekel Tsur  <dekelts@tau.ac.il>

	* figinset.C (GetPSSizes): Fix for the case when filename doesn't
	contain a suffix.
	(Clone): ditto

2001-03-26  Juergen Vigna  <jug@sad.it>

	* lyxinset.h: added ShowInsetDialog() function in UpdatableInset.

	* insettext.C (ShowInsetDialog): implemented above function.

	* insettabular.C (ShowInsetDialog): ditto

	* insetminipage.C (ShowInsetDialog): ditto

2001-03-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetinclude.[Ch]: rename InsetInclude::InsetIncludeParams as
	InsetInclude::Params. Don't store a buffer * in Params. Store the
	master file name instead.

2001-03-23  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (InsetMotionNotify):
	(InsetButtonRelease):
	(InsetButtonPress): fixed y-offset (minipages).

	* insettext.C (draw): force a FULL update if cleared == true.

	* insetcollapsable.C (draw): Lars forgotten entry for changing this
	routine to draw the minipages on its position-flag.
	(InsetInInsetY): give back the right y position, because of minipage
	position-flag.

2001-03-23  José Abílio Matos  <jamatos@fep.up.pt>

	* insetfloat.h
	* insetfloat.C (DocBook): docbook export code.

2001-03-22  Juergen Vigna  <jug@sad.it>

	* insetminipage.C (getMaxWidth): added function to set the drawing
	width!
	(Read): should work now!

	* insetcollapsable.C (InsetCollapsable): default is now NOT collapsed
	if we create a new inset.

2001-03-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* figinset.C (fl_set_preemptive_callback): moved definition outside
	of namespace anon.

2001-03-20  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.C (Read): prepare for reading of minipage arguments.

2001-03-18  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C: Minor cleanups of the comments and code.

2001-03-17  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.C (InsetMinipage): default to not collapsed

2001-03-16  Juergen Vigna  <jug@sad.it>

	* insetminipage.C (width): modified with to be a string
	(widthp): added widthp (for % width) support functions.
	(InsetButtonRelease): added to open the options dialog on button==3.
	(~InsetMinipage): added to hide the dialog.

	* insetminipage.h: added hideDialog signal

2001-03-15  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.h: change the order or Position to match
	LyXParagraph::MINIPAGE_ALIGNMENT

	* several files: remvoe CXX_WORKING_NAMESPACES

	* ExternalTemplate.h: noncopyable is in namespace boost
	* insetinclude.h: ditto
	* insetcommand.h: ditto

2001-03-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettext.C (Edit): #else# -> #else.
	* insettoc.C: added using directive.

2001-03-14  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.h: add pos, inner_pos, width and height. + getters
	and setters for all of them.

2001-03-13  Dekel Tsur  <dekelts@tau.ac.il>

	* insetinclude.C (Latex): Do not exit when the textclass of the
	included file differ from the textclass of the parent file.

2001-03-12  Angus Leeming  <a.leeming@ic.ac.uk>

	* ExternalTemplate.C (read): the reading of external insets now checks
	for \end_inset and removes it form the input stream.

2001-03-09  John Levon  <moz@compsoc.man.ac.uk>

	* ExternalTemplate.h:
	* ExternalTemplate.C:
	* insetexternal.h:
	* insetexternal.C: move form to GUII

2001-03-12  John Levon  <moz@compsoc.man.ac.uk>

	* insetinclude.h:
	* insetinclude.C: add InsetIncludeParams, use
	composition rather than derivation of InsetCommand

2001-03-12  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insettoc.C (Ascii): use the Buffer typedefs

2001-03-11  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insettoc.C (Ascii): implement for dynamic number of lists

	* insetcaption.[Ch]: update from new_insets branch
	* insetfloat.[Ch]: ditto

2001-03-06  John Levon  <moz@compsoc.man.ac.uk>

	* insetexternal.C:
	* figinset.C: use new File Dialog

2001-03-06  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insettext.C: changes becuase of ParagraphParameters.

2001-02-28  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.C (updateInset): Changed due to the change in
	GraphicsCache.

2001-02-26  Juergen Vigna  <jug@sad.it>

	* insettext.C (SetFont): Set Undo only if we have selection (as it is
	handled in LyXText).

2001-02-23  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): some small repainting fixes.
	(LocalDispatch): put the sel_cursor stuff after the insert of chars.

	* inset.C (LocalDispatch): changed action to be a kb_action (as it
	should be) and not an int.

	* insettabular.C (LocalDispatch): ditto

	* insettext.C (LocalDispatch): ditto

	* insetcollapsable.C (LocalDispatch): ditto

2001-02-22  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): return DISPATCHED if we cannot
	DISPATCH it and we don't have a locking_inset.

2001-02-21  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.[Ch]: Changed to use boost::shared_ptr<GraphicsCacheItem>
	instead of GraphicsCacheItem *.

2001-02-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcollapsable.C (getLyXText): add const qualifier to second
	parameter.

2001-02-22  Juergen Vigna  <jug@sad.it>

	* insettext.C (getLyXText): honor the recursive parameter.
	(SetUpdateStatus): set need_update to CURSOR_PAR if LyXText needs it.

	* inset.C (getLyXText): added bool recursive parameter.

	* insettext.C (SetUpdateStatus): or the update codes.
	(draw): check need_update with &.
	(InsetButtonPress): set no_selection to not put a selection when
	entering an inset and it is redraws in another spot.

	* insettext.h: made need_update an int.

2001-02-20  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.h:
	* insetgraphisc.C: Changed to use better semantics when loading images
	for inline view. Now it doesn't keep the pixmap itself but it's holder.

2001-02-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcommand.h:
	* inseterror.h:
	* insetgraphics.C: change name of "hide" signal to "hideDialog",
	consistent with InsetTabular.

2001-02-19  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): implement PAGE up/down.

	* insettext.C (draw): clear all of it on need_update==INIT too!

	* insettabular.C (InsetUnlock): always clear the selection.

	* inset.C (scroll): normally we only want to scroll the inset until
	it is fully visible so if top_x + offset > 20 then just set scx to 0.

2001-02-14  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): remove x_fix as it is not used.
	(resetPos): fixed scroll behaviour.
	(LocalDispatch): do an update if moving cursor inside a table cell
	requests a scroll of the tabular.

2001-02-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* insettext.C (textWidth): constify local var

	* insettabular.C: small cleanup.

	* insetfoot.C (Latex): constify local var

	* insetcollapsable.C: small cleanup.

	* figinset.C (runqueue): use compare instead of strcmp

2001-02-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* insettext.C:
	* insetinfo.C: remove cruft

2001-02-14  Juergen Vigna  <jug@sad.it>

	* insettext.C (SetUpdateStatus): added a BufferView * parameter.

2001-02-13  Juergen Vigna  <jug@sad.it>

	* insettext.C (InsertInset): don't move left (is this right?)

	* insettabular.C (LocalDispatch): use of the no_draw variable

	* insettabular.h: new no_draw variable to stop redraw

	* insettabular.C (TabularFeatures): fixed update for alignment change

2001-02-12  John Levon  <moz@compsoc.man.ac.uk>

	* insetinclude.C:
	* insetbib.h:
	* insetbib.C: move dialogs to frontends/

2001-02-10  Dekel Tsur  <dekelts@tau.ac.il>

	* insettext.C (LocalDispatch): Restore the language if the inset
	becomes empty.

2001-02-09  Dekel Tsur  <dekelts@tau.ac.il>

	* insettext.C (moveRightIntern): Update the selection cursor.
	(moveLeftIntern): Ditto.

2001-02-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* Makefile.am: remove BoundingBox.h

	* BoundingBox.h: removed

2001-02-08  Dekel Tsur  <dekelts@tau.ac.il>

	* insettext.C (LocalDispatch): Update selection cursor when moving
	cursor to the right.
	(moveRightIntern): Call to CursorRight with 2 argument eqaul to false.
	(moveLeftIntern): Ditto.

2001-02-05  Baruch Even  <baruch.even@writeme.com>

	* insetgraphics.C: Updated automatic image conversion, it now goes into
	temporary directory instead of with the image itself.

2001-01-21  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.C: Added Docbook support. Added Automatic image conversion
	to EPS or PNG when needed (support bitmap graphics).

2000-11-02  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.C:
	* insetgraphiscParams.C: Some cleaning up, changing from std::endl to '\n'
	and removal of commented out code.

2001-01-31  Dekel Tsur  <dekelts@tau.ac.il>

	* insetbib.C (callback): Update citations if the key has changed.

2001-01-31  Dekel Tsur  <dekelts@tau.ac.il>

	* insetbib.C (InsetBibKey): Better computation of default key.
	(getScreenLabel) Show both the key and the label.
	(getBibLabel): New method.
	(callback): Force a redraw if the inset have been changed.

2001-01-26  Dekel Tsur  <dekelts@tau.ac.il>

	* insetref.C (getType, getName): Move methods from
	src/frontends/xforms/FormRef.C.

2001-01-12  Dekel Tsur  <dekelts@tau.ac.il>

	* insettabular.C: Various improvements (use only one dummy position).

2001-01-25  Dekel Tsur  <dekelts@tau.ac.il>

	* insetbib.C (bibitemWidest): Use lyxfont::width instead of
	par->bibkey->width. This fixes the crashes when running without
	gui or when having included documents.

2001-01-22  Dekel Tsur  <dekelts@tau.ac.il>

	* insetcommand.C (getAsString, setFromString): Cleanup.

2001-01-21  Dekel Tsur  <dekelts@tau.ac.il>

	* insetref.C: Add the array InsetRef::types that contains
	information about all supported reference types.

2001-01-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxinset.h: remove trailing comma in enum.

2001-01-17  John Levon  <moz@compsoc.man.ac.uk>

	* insettext.C: kill LyXBell.
