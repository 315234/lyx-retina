2001-08-10  Juergen Vigna  <jug@sad.it>

	* insettabular.C (calculate_dimensions_of_cells): let's try to call
	update only for fixed with cells.

	* insettext.C (update): comment this out as it seems first wrong
	and second not needed anymore!
	(some functions): call reinitLyXText() only in update() in all other
	positions set only need_update = INIT.

2001-08-08  Juergen Vigna  <jug@sad.it>

	* insettabular.C (setPos): fixed wrong actrow < rows() check.

	* insettext.C (insetUnlock): remove double-space on inset unlock.

	* insetcollapsable.C (draw): fix returned x when label > inset-width.

	* insettabular.C (update): fixed cursor positon after an insert.
	(insetAllowed): do not allow to insert insets when not inside the
	inset!
	(draw): clear below an inset too as it could have changed height.

	* inset.C (getMaxWidth): fixed width for inset in inset.

	* insettext.C (update): small fix.

	* insettabular.C (tabularFeatures): added selection support to
	DELETE_ROW/DELETE_COLUMN.

2001-08-07  Juergen Vigna  <jug@sad.it>

	* inset.C (getMaxWidth): recoded and all it's implementations!

	* insettext.C (init,setParagraph+constructors): cleanups
	(reinitLyXText): fixed problem with wrong cursor when all paragraphs
	are new and I want do a save/restore of the cursor position which is
	not possible anymore.

	* insetcollapsable.C (searchBackward): recollapse inset if not found.
	(searchBackward): ditto
	(selectNextWord): ditto

2001-08-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetlatexaccent.C (checkContents): Add some debug messages

2001-08-07  Juergen Vigna  <jug@sad.it>

	* insetert.C (read): don't use InsetCollapsable::read as we don't
	write the collapsed status anymore only the status.
	(write): ditto.

2001-08-06  Juergen Vigna  <jug@sad.it>

	* insetert.C (set_latex_font): use LyXText's setFont directly.

	* insettext.C (drawFrame): fixed one time more the right position
	and size of the frame!

	* insetert.C (~InsetERT): hide the dialog.
	(showInsetDialog): added implementation
	(open): ditto
	(close): ditto
	(status): new function for the status of the ERT inset (3-state).
	(write): output also the status of the inset for readback!
	(read): readback the status if available otherwise use collapsed_.

	* insettext.C (edit): small fix of setting the position, which could
	have gone < 0.

	* insetert.C (width): implement this function for inlined viewing.
	Added minimum width of 10 pixels!

	* insetminipage.C (InsetMinipage): just change the colors a bit so
	that border/background is a bit more visible. We will remove this
	anyway for 1.2.0!

	* insettext.C (textWidth): add a 'bool fordraw' parameter and use this
	function for getting the important widths for drawing in various
	functions and in LyXText.
	(draw): fixed up a bit (frame drawing/clearing)

2001-08-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* inset.C (convertFont): delete method. not used. 

2001-08-03  Juergen Vigna  <jug@sad.it>

	* insettext.C (setFont): don't call for a draw update if we're just
	changing the cursor font!

2001-08-02  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): clear the background with the right color if
	needed. Update myself if x&max-width changed and return without doing
	anything. Let the update code handle the right stuff.

	* insetminipage.C (getMaxWidth): fixed returning of maxwidth when
	inside another inset.

2001-08-01  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (update): added an in_update bool so we avoid
	reentering.

	* insettabular.C (update): added an in_update bool so we avoid
	reentering.

	* insettext.C (insetButtonPress): hopefully fixed setselection/clear
	selection problem.
	(update): added an in_update bool so we avoid reentering.

	* insettabular.C (localDispatch): clear col/row selection when doing
	something else inside an inset.

	* insettext.C (getLyXText): fixed bug when requesting a recursive
	insettext!

2001-08-01  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcite.C (latex): Paranoia check. Make sure that there is no
	whitespace between the citation keys.

2001-07-31  Juergen Vigna  <jug@sad.it>

	* inset.h (nodraw): make the set function also const so that this
	can be called from inside other const functions.

	* insetcollapsable.h: removed inline variable and moved it over
	to the only user InsetERT.

	* insetcollapsable.C (insetButtonRelease): fixed uncollpasing the
	inset opening immediately therein lying insets dialogs!

	* insetert.C (localDispatch): set the font also if we don't have any
	chars in this paragraph, otherwise if we delete all of em and start
	writing we have the wrong font.
	(inlined): added
	(draw): implemented for inline support
	(insetButtonRelease): ditto.

2001-07-30  Juergen Vigna  <jug@sad.it>

	* insettext.C (reinitLyXText): new function to reinit the insets
	text after lot's of paragraph changes. Use this instead of the
	cache.clear() which is VERY dangerous.

	* insetfloat.C (insetButtonRelease): we should only show the dialog
	if we press on the label otherwise we have problems to open mouse
	button 3 dialogs inside this float (f.ex. of a tabular!)

2001-07-30  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C: change back to "ERT"

	* insetfloat.C: handliign of RMB on label added.

2001-07-30  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetgraphicsParams.C: #include LOstream.h here.

	* insetfoot.h: remove InsetFoot:: qualifier.

2001-07-29  Baruch Even  <baruch@lyx.org>

	* ChangeLog: Hiding time travel evidence.

	* insetgraphicsParams.h:
	* insetgraphicsParams.C: 
	* insetgraphics.C: Added horizontal scale option, it actually scales both
	directions since it keeps image proportions.

	* insetgraphics.C: Fixed EPS detection to be non-hacky.

2001-07-29  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C (decideOutputImageFormat): when doing postscript output
	convert PNG/GIF/JPG to EPS, assume the rest are EPS already. 

	HACKY! Will need to add an EPS detection routine like old InsetFig does!

2001-07-29  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C: Added EPSI to be an alias of EPS.

2001-07-29  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C: Change GRAPHICS to Graphics.
	Changed image conversion rules (documented at the beginning of file).

2001-07-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetert.C (get_new_label): int -> Paragraph::size_type to get
	std::min working.

	* insetgraphics.C: added a using std::endl directive.

	* insetcommand.h (getScreenLabel): removed pure virtual function,
	as it duplicates that in InsetButton.

	* insetbib.[Ch] (getScreenLabel):
	* insetbutton.[Ch] (getScreenLabel):
	* insetcite.[Ch] (getScreenLabel):
	* insetert.[Ch] (getScreenLabel):
	* insetexternal.[Ch] (getScreenLabel):
	* insetfloatlist.[Ch] (getScreenLabel):
	* insetinclude.[Ch] (getScreenLabel):
	* insetindex.[Ch] (getScreenLabel):
	* insetlabel.h (getScreenLabel):
	* insetparent.[Ch] (getScreenLabel):
	* insetref.[Ch] (getScreenLabel):
	* insettoc.[Ch] (getScreenLabel):
	* inseturl.[Ch] (getScreenLabel): passed a Buffer const * parameter.

	* insetcite.C (getScreenLabel): use this Buffer parameter in creating
	the label.
	(validate): remove check on "cite" when using natbib.

2001-07-26  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C (draw): changed casting to be in one place rather than 
	all over the function.

	* insetgraphics.h:
	* insetgraphics.C (read): Added compatibility reads of InsetFig.
	
	* insetgraphicsParams.h:
	* insetgraphicsParams.C: 
	* insetgraphics.C: Removed inline option and changed rotateAngle to float.

2001-07-28  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* insetfoot.C (validate): Added method to ensure that the
	right bit of LaTeX is emitted.

	* insetfoot.h: Added validate method to set the correct
	LaTeXFeatures bit for the special footnote code.

2001-07-26  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* insetquotes.C (dispString): display the right ISO8859-{1,9,15}
	quotes

2001-07-27  Juergen Vigna  <jug@sad.it>

	* inset.h: remove not used font variable in parameter.
	removed checkInsertChar in UpdatableInset as it was equal to
	the one in Inset and so not needed.

	* insetert.C (checkInsertChar): implementation of function
	checkInsertChar.

	* inset.h: added new function checkInsertChar.

	* various files: added c-tor and clone() function.
	
	* insetcollapsable.h: removed clone function here as this should
	be only realized in REAL insets and added it to all collapsable
	insets! (with the copy-constructor).

2001-07-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetminipage.C (read): handle missing parameters more gracefully

	* insetcollapsable.C (read): handel missing collapsed more gracefully

2001-07-25  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloat.C (read): handle missing parameters.

	* insettext.C (read): handle old latex end_inset

	* insetert.C (setButtonLabel): new method
	(init): use it, to set the dynamic label correctly
	(read): use it

	* Makefile.am (EXTRA_DIST): add files that is not part or the
	binary here.

	* insetcollapsable.h: remove autocollapsable (no users), remove
	draw_label, change_label_with_text and companion code. Remove args
	from some methods.
	* insetert.[Ch]: move here instead (only user)

	* inset.h: rename private variable name to name_, make
	selectNextWord return a const string. make getInsetName return a
	string const &. Remove bool from open, add close.

	* Makefile.am: don't compile insetlist, insetsection
	and insettheorem

2001-07-24  Juergen Vigna  <jug@sad.it>

	* insetert.C (InsetERT): put init after the paragraph initialization,
	as otherwise we don't set the draw_label right.

	* insetcollapsable.C (insetMotionNotify): fixed opening/closing the
	insets with the mouse without having strange selections.
	(edit): if the inset was collapsed and we open it here then put the
	cursor always at the beginning of the inset.
	(get_new_label): 15 instead of 10 max chars in the label.

	* insetert.C (localDispatch): added and handle various stuff we
	need to handle here (font setting on paragraph break, not permitted
	layout setting, etc.).

	* inset.h: added default copy-consturctor and implemented this in
	various insets with the change to use this in the clone function!

2001-07-24  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetminipage.C (InsetMinipage): set background color to red :)

2001-07-23  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insettext.C (insetUnlock): only set update to CLEAR_FRAME if
	draw frame mode is LOCKED.

	* insetcollapsable.C (edit): 
	(insetButtonRelease): set update status to full when
	opening inset.

	* insettext.C (clearInset): 
	* insettabular.C (draw): 
	* insetlatexaccent.C (draw): honor background color.

	* inset.h: new member background_color_, initialized to
	LColor::inherit.

	* inset.C (backgroundColor): new method.
	(setBackgroundColor): new method.

	* insetert.C (init): new method, called by the ctors.
	(InsetERT): when inserting contents, make sure the font is
	ALL_INHERIT.

	* insetnote.C (InsetNote): when inserting content, remove trailing
	newline
	(init): set background color to LColor::note

2001-07-24  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetcollapsable.C: adjust

	* insetbutton.C: adjust

2001-07-23  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.h: removed widthCollapsed variable, LyXFont
	parameter on the _collapsed function (was not needed) and call
	always width_collapsed().

	* insetert.C (InsetERT): use setLabel with "true" flag.

	* insetcollapsable.C: modified various functions to set the draw_label
	string right in any condition.
	(setLabel): added a bool parameter to set change_label_with_text.

	* insetcollapsable.h: added draw_label string which is set to the
	actual drawn label-string, while label is the original static label
	of this collapsable inset. Added bool change_label_with_text to set
	if we want that the label changes to the start of the InsetText's
	text when collabpsed. You can set this flag with the setLabel funciton.
	Added bool inlined for inlined collapsable insets, but not handled
	yet.

	* insetcollapsable.C (get_new_label): added should get a new label
	from the InsetText beginning (for now 10 chars).

2001-07-21  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* insetquotes.C (latex): fix the handling of french double quotes
	when not using the french pachage.

2001-07-22  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetcollapsable.h: make WidthCollapsed mutable.

	* insetindex.C (lyxCode): InsetIndex returns INDEX_CODE,
	InsetPrintIndex returns INDEX_PRINT_CODE.

	* inset.h: add INDEX_PRINT_CODE

	* insetcollapsable.C (draw): init widthCollapsed if necessary
	(width): ditto.

	* insetquotes.C (width): use the local language, not the document
	language.
	(draw): ditto.
	(dispString): add additional spacing for all french languages,
	like fr_CA.
	(validate): make it work when there is no default language

	* insetspecialchar.h: rename kind to kind_; add kind() accessor.

	* insetnote.C (init): new method, called by the constructors
	(InsetNote): new constructor with contents passed as a string

2001-07-21  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetfootlike.C (insetAllowed): disallow float in footlike.

	* insetert.C (InsetERT): add collapsed argument to the constrctor
	with contents.

2001-07-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetindex.h: shut off warning

2001-07-20  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (update): recoded hopefully works now!

2001-07-19  Juergen Vigna  <jug@sad.it>

	* most files: implemented the below new introduced function.
	
	* inset.h: added new edit(BufferView *, bool front) method to be able
	to enter an inset from the front/back without knowing x/y positions
	and baselines inside the inset. So I just can tell the inset activate
	me and set the cursor on the front/back of yourself.

2001-07-18  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (edit): fixed hopefully the y parameter which
	is givven to the InsetText.
	(insetButtonPress): ditto
	(insetButtonRelease): ditto
	(insetMotionNotify): ditto

2001-07-20  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetspecialchar.[Ch]: change HYPHENATION_BREAK to
	LIGATURE_BREAK, since the name is so stupid.

2001-07-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetnote.[Ch]: (insertInset, insetAllowed): removed. Note now uses
	the default InsetCollapsable methods. I.e., it can insert anything.
	(write) output the name of the inset, not some silly hack for
	compatability with the old InsetInfo.
	
	* insetinfo.[Ch]: removed.
	* insetnote.[Ch]: new files. InsetNote replaces InsetInfo. The inset is
	now collapsable, but functionality is otherwise identical to InsetInfo.

	* Makefile.am: removed insetinfo.[Ch]. Added insetnote.[Ch].

2001-07-19  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* insetspecialchar.[Ch]: add support for HYPHENATION_BREAK. some
	reformatting

	* insetquotes.C: general cleanup
	(dispString): add spaces inside french double quotes.
	(latex): ditto. Moreover, treat first the case where the frenchb
	or french options have been given.

2001-07-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcite.[Ch] (latex, validate): new methods, required for natbib
	support.

2001-07-19  Dekel Tsur  <dekelts@tau.ac.il>

	* figinset.C (RegisterFigure): Print debug message only when
	current_view is available.

2001-07-18  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* many files: update to match the change below

	* inset.h (insetAllowed): renamed from insertInsetAllowed;
	implement the version which takes an inset here.

	* insetcollapsable.[Ch]: implement open and isOpen

	* inset.h: remove insertInsetAllowed from Inset
	(open): new method, to open or close an inset
	(isOpen): returns the status of an inset
	(isCollapsable, colapse): removed

2001-07-13  Yves Bastide  <stid@libd-pc11.univ-bpclermont.fr>

	* insetquotes.C (dispString): display french guillemets when using
	ISO8859-15.

2001-07-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcollapsable.h: remove bogus return statements

2001-07-18  Juergen Vigna  <jug@sad.it>

	* insettabular.C (selectNextWord): fixed spellchecking for the
	first cell of a tabular (wasn't entered!)
	(getLyXText): changed to enter automatically insettext and return
	it's LyXText if we're locked.

2001-07-17  Juergen Vigna  <jug@sad.it>

	* various files: implemented the below functions.
	
	* inset.h: added functions
	- virtual string selectNextWord(BufferView *, float & value) const;
	- virtual void selectSelectedWord(BufferView *) { return; }
	- virtual void toggleSelection(BufferView *, bool /*kill_selection*/)
	needed for spellchecking correctly!

2001-07-16  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C (latex): write out all paragraphs.

2001-07-17  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C (draw): Removed unneeded casts.

2001-07-16  Juergen Vigna  <jug@sad.it>

	* insettext.C (update): fixed small oversight (reset lt to 0).

2001-07-14  Baruch Even  <baruch@lyx.org>

	* insetgraphics.h:
	* insetgraphics.C: Added a copy c-tor and handled the same_id case. 

2001-07-13  Angus Leeming  <a.leeming@ic.ac.uk>

	Consistent use of Lsstream.h:
	* figinset.C: removed using std::ostringstream directive.

	* insetgraphics.C (createLatexOptions):
	* insetinclude.C (unique_id):
	std::ostringstream -> ostringstream.
	* insettext.C (localDispatch): std::istringstream -> istringstream.

2001-07-13  Juergen Vigna  <jug@sad.it>

	* insetfloat.C (insertInsetAllowed): added missing const_cast.

	* insetcollapsable.C (getLockingInset): ditto.

2001-07-12  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.h: added implementation of new function for
	collapsable status.

	* various files: added implementation of new insertInsetAllowed-func
	and redone the function a bit more.
	
	* inset.h: added isCollapsable(), bool collapsed(),
	collapsed(BufferView *, bool) and insertInsetAllowed(Inset::Code).

	* insetfloat.C (insertInsetAllowed): make a bit more checks.

	* insettext.C (getLyXText): use 'lt' to assure we're not erasing the
	LyXText which is marked for removal while we're using it!

	* insettext.h: added private LyXText * lt to use it to assure we are
	not deleting our LyXText while we're using it!

2001-07-11  Juergen Vigna  <jug@sad.it>

	* insettext.C (insertInset): check if we are before the inset after
	inserting it! This check IS needed. Remove the Undo-Call as it is
	called in LyXText::insertInset!

	* insettext.h: added struct InnerCache.

	* insettext.C (deleteLyXText): insert a new InnerCache mechanism so
	that we ONLY delete the LyXText in the getLyXText() routine. So we
	are sure we don't delete LyXText while someone is working with it!

2001-07-12  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetexternal.C: (*it). -> it->
	* insettext.C: ditto

2001-07-11  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcollapsable.C (edit): always open collapsed insets (even if
	they are not autocollapsable)

	* insetcommand.C (operator=): simplify.

2001-07-10  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C (latex): handle META_NEWLINE

2001-07-09  Juergen Vigna  <jug@sad.it>

	* insetert.h: a normal InsetText can insert insets, but we won't.

	* inset.h: return default "false" on insertInsetAllowed and implement
	this function where a returnvalue != "false" is needed.

2001-07-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetert.C (InsetERT): new contructor

2001-07-06  Juergen Vigna  <jug@sad.it>

	* a lot of files: added implementation of the below new functions
	and the change to clone(). Also the call of the new undo-functions
	where needed.
	
	* inset.h: added an inset_id, added functions getParFromID,
	getInsetFromID, firstParagraph, cursor and id functions, added
	bool same_ids to clone function.

2001-07-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.[hC]: make cached_text a shared_ptr, make Cache be a map
	of BufferView * and shared_ptr<LyXText>

2001-07-05  Juergen Vigna  <jug@sad.it>

	* insettext.C (clear): deleted also the cache not only LyXText.
	(setParagraphData): ditto.

2001-07-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloat.C (latex): let the specific placement take presedence
	if set, otherwise choose document placement if set, otherwise just
	use float default placement.

2001-07-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (localDispatch): call CutAndPaste::'s static method
	directly. 

2001-07-03  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetbib.C: no meed to include forms.h here.

2001-07-03  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettext.C: added using std::make_pair directive.

2001-07-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (getLyXText): avoid multiple lookups, and simplify
	slightly
	(deleteLyXText): ditto
	(resizeLyXText): ditto

2001-07-02  Juergen Vigna  <jug@sad.it>

	* insettext.C (getLyXText): introduce a cache in getLyXText so that
	following calls are only returned the right pointer without the over
	head to search in the map.
	(various funcs): reset the cached_bview variable as this signs that
	the cache is not valid anymore.

2001-06-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insettabular.C (clone): do not copy the LyXTabular twice

2001-06-29  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.h (TEXT): delete method

2001-06-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetmarginal.C (latex): 
	* insetfoot.C (latex): fix spacing of notes in LaTeX

	* insettext.C (localDispatch): use .c_str() on istringstream
	constructor argument.

2001-06-29  John Levon  <moz@compsoc.man.ac.uk>

	* insettoc.h:
	* insettoc.C:
	* inseturl.h:
	* inseturl.C: fix method names in these to begin
	  with small char too, so they inherit
 
2001-06-28  Juergen Vigna  <jug@sad.it>

	* insettext.C (setFont): fixed font settings using toggleFree()
	instead of setFont().

2001-06-28  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* Change a lot of method names to begin with a small char.
	Changes to a lot of files because of this.

2001-06-27  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloatlist.C (Write): std:: qualify ostream
	(Latex): ditto

2001-06-26  The LyX Project  <lyx@violet.home.sad.it>

	* figinset.C:
	* inset.C:
	* insetgraphics.C: send debug output to Debug::INFO instead of
	Debug::ANY.

2001-06-26  The LyX Project  <lyx@rose.home.sad.it>

	* insettabular.h:
	* insettabular.C (getStatus): update to use func_status

2001-06-26  ben <nicolas.marsgui@libertysurf.fr>

	* insetref.C (DocBook): added support for cross-references without
	a name.

2001-06-26  The LyX Project  <jug@sad.it>

	* insetref.C:
	* insetref.h:
	* insetlabel.C:
	* insetlabel.h: removed escape method and moved it to
	support/lstrings.h.

2001-06-26  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettabular.C (getMaxWidth): do the speedup in a different way,
	remove dead code

2001-06-24  The LyX Project  <Asger>

	* insettabular.C (getMaxWidth): We cache a mapping from
	inset to cell in order to speed this method up.

2001-06-24  The LyX Project  <Asger>

	* insettext.C: Optimized InsetText::draw or something.

2001-06-23  The LyX Project  <lyx@rose.home.sad.it>

	* insettext.C (LocalDispatch): fixed inserting of 'normal chars'

2001-06-23  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* inset.h: name change from lyxinset.h

2001-06-22  Dekel Tsur  <dekelts@tau.ac.il>

	* insetfloat.C (Validate): Add a call to InsetCollapsable::Validate

2001-06-14  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): removed warnings.

2001-06-13  Juergen Vigna  <jug@sad.it>

	* insettabular.C (nodraw): only go down the tree if we don't have
	that flag set otherwise it's obvious that we don't want to draw.
	(LocalDispatch): do also an update if we have an undispached result.

2001-06-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcite.C:
	* insetgraphicsParams.C:
	* insettext.C: removed // -*- C++ -*- as first line.

2001-06-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxinset.h (resizeLyXText): shut off warning about unused
	parameter "force" 

2001-06-07  Juergen Vigna  <jug@sad.it>

	* insettext.C (resizeLyXText): honor the new force flag.

	* lyxinset.h: add 'bool force' parameter to resizeLyXText(...)

	* insettabular.C (deleteLyXText): new function

2001-06-02  John Levon  <moz@compsoc.man.ac.uk>

	* insettheorem.C:
	* insetminipage.C:
	* insetlist.C:
	* insetfootlike.C:
	* insetfloat.C:
	* insetert.C:
	* insetcollapsable.C:
	* insetcaption.C: LColor tidy
	 
2001-06-01  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* figinset.C: fix typo

2001-06-01  Juergen Vigna  <jug@sad.it>

	* insettabular.C (resetPos): small hack so that scroll is not set to
	0 when we are in the last column of a tabular. This is a problem we
	have because of constats 20 offset on both directions, so this can
	cause on the limit an endless loop.

	* insettext.C (SetFont): forgot that we can have locking insets ;)

2001-05-31  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): small fix for LFUN_TAB.

2001-05-31  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* figinset.C: add using std:: directive for the C functions which
	need that.

2001-05-31  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfloat.C (Write): write out wide info
	(Read): read the wide info
	(Latex): use the wide info when creating latex.

	* insettext.C: adjust

	* insetgraphics.[Ch] (statusMessage): change to return string
	(width): adjust
	(draw): adjust

	* figinset.C (runqueue): add std::
	(Recompute): ditto

2001-05-28  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcite.C (Ascii): add std:: qualifier

2001-05-28  Juergen Vigna  <jug@sad.it>

	* insettext.C (resizeLyXText): clear LyXText ONLY if we don't have
	a endless-width inset (maxWidth < 0).
	(Edit): change language only if not equal.

	* insettabular.C (resetPos): call UpdateLocal only on REAL scroll!

	* insettext.C (draw): fixed draw/clear of InsetText-Frame

2001-05-16  Juergen Vigna  <jug@sad.it>

	* insettext.C (selectAll): added
	(clearSelection): added

	* insettabular.C (SetFont): now we may set a font on a whole selection!
	(getSelection): added helper function.

2001-05-27  Dekel Tsur  <dekelts@tau.ac.il>

	* insetcite.C (Ascii): Add method.

2001-05-16  Ruurd Reitsma  <r.a.reitsma@wbmt.tudelft.nl>

	* figinset.C:
	* insetbib.C: fix path for OS/2 & Win32

2001-05-10  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetfoot.C (Latex): don't use % after footnote.

2001-05-08  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (Read): use clear
	(SetParagraphData): use LyXParagraph copy constructor instead of clone

2001-05-04  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetfloatlist.h: add a bunch of std:: qualifiers.

2001-05-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxinset.h: remve LOF_CODE, LOT_CODE, LOA_CODE, add
	FLOAT_LIST_CODE, renumber code list.

	* insettoc.C (getScreenLabel): remove support for float lists
	(LyxCode): ditto
	(Ascii): ditto

	* insetfloatlist.[Ch]: new files

	* Makefile.am (libinsets_la_SOURCES): add insetfloatlist.[Ch]

2001-04-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettabular.C (LocalDispatch):
	* insettext.C (LocalDispatch): getClipboard() is now a BufferView
	method 

2001-05-03  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C: remvoe !NEW_INSETS cruft

	* insettabular.C: remove !NEW_INSETS cruft

	* insetcollapsable.h: remove !NEW_INSETS cruft

	* insetbib.C: remove !NEW_INSETS cruft

2001-04-27  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettoc.C: hack to make listof algorithm work

2001-04-20  Juergen Vigna  <jug@sad.it>

	* insettext.C (Edit): call checkAndActivateInset with y=0 if y < 0.

2001-04-18  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetquotes.C (Latex): improve the guard against
	unwanted !` and ?` ligatures. This should really be done in
	another place (to catch all this ligatures at low-level).

2001-04-17  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (init): remvoe leftovers from cursor_visible change
	(draw): use c++ cast
	(LocalDispatch): dispatch LFUN_MESSAGE

	* insettabular.C (InsetTabular): remove leftovers from
	cursor_visible, and scoped_ptr changes
	(draw): use c++ cast

	* insetcollapsable.C (draw): use c++ cast

	* ExternalTemplate.h: inherit privaely from noncopyable
	* insetcommand.h: ditto
	* insetinclude.h: ditto

2001-04-16  Allan Rae  <rae@lyx.org>

	* insettoc.C (Ascii): 
	* insettext.C (draw): 
	* insettabular.C (setPos): 
	* insetminipage.C (Read): 
	* insetfloat.C (placement): 
	* insetcaption.C (Ascii, DocBook): 
	* figinset.C (runqueue): #warning triggers an error on Sun CC 6.0 as
	an unrecognised preprocessor directive.  So ensure they're wrapped. 

2001-04-06  John Levon  <moz@compsoc.man.ac.uk>

	* insetexternal.h:
	* insetexternal.C: set view on Clone. Add _ to private members.

2001-04-06  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insettext.C (InsetText): fix new
	(InsetText): reindent some, simplify deletion of par list 
	(clear): simplify deletion of par list, fix new
	(SetParagraphData): simplify deletion of par list

	* insettabular.[Ch] (getLabelList): implement new method

2001-04-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxinset.h: do not include gettext.h...

	* inset.C:
	* insetcaption.C:
	* insetexternal.C:
	* insetgraphics.C:
	* insetindex.C:
	* insetlabel.C:
	* insetlatexaccent.C:
	* insetminipage.C:
	* insetquotes.C:
	* insettabular.C:
	* inseturl.C: ... and do it here instead

2001-04-05  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* insetcollapsable.[Ch] (getLabelList): add std:: on vector<string>

	* insettext.[Ch] (getLabelList): add std:: on vector<string> 

	* insetcollapsable.[Ch] (getLabelList): implement

	* insettext.[Ch] (getLabelList): implement

	* insettext.h: reindent

	* insettabular.h: make tabular a scoped_ptr

	* insettext.C (init): adjust for cursor_visible
	(ToggleInsetCursor): constify asc and desc, font, adjust for
	cursor_visible
	(ShowInsetCursor): constify asc and desc, font, adjust for
	cursor_visible
	(HideInsetCursor): adjust for cursor_visible

	* insettabular.C: reindent some
	(InsetTabular): adjust for scoped_ptr and cursor_visible
	(InsetTabular): ditto
	(~InsetTabular): delete delete
	(Clone): adjust for scoped_ptr
	(Read): constify old_format, adjust for scoped_ptr, move init of
	token
	(draw): constify tx, localize loop vars.
	some other localization of variables, remove double initilizatons.
	
	* insetfoot.C: remove using std::ostream, add ostream where needed

2001-04-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* lyxinset.h: some reindentaion, use initializer list for
	constructro.
	UpdatableInset: make cursor_visible a private var add
	public isCursorVisible(), add protected toggleCursorVisible() and
	proctected setCursorVisible(bool), make scroll call the Inset::scroll

	* insettoc.C: remvoe using decl
	(getScreenLabel): make cmdname donst
	(LyxCode): ditto
	(Ascii): ditto
	(Ascii): don't use endl

	* insetfootlike.C: remove using decl at file scope and add std::
	where needed
	* insetmarginal.C: ditto

	* insetfoot.C: some reformatting

	* insetfloat.C (InsetButtonRelease): adjust the hit area

	* insetert.C (SetFont): some reformatting

	* insetcollapsable.C: some reformatting and constification
	(Clone): comment out.
	* insetcollapsable.h: some reformatting
	(Clone): comment out.
	
	* inset.C: reindent
	(scroll): simplify

2001-03-30  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.h: changen *inset to be a InsetText inset.
	
	* some files: changed to reflect the above change.

2001-03-29  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetexternal.[Ch]: renamed InsetExternal::InsetExternalParams as
	InsetExternal::Params.
	Added operator==() and operator!=() for the Params struct.

2001-03-29  Juergen Vigna  <jug@sad.it>

	* lyxinset.h: changed parameter of getMaxWidth from Painter & to
	BufferView *.

	* insetminipage.C: removed widthp_ and all it's functions and changed
	to use new %-lengths of LyXLength.

2001-03-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* figinset.[Ch]: changed headers lyx.h, form1.h -> figure_form.h.

2001-03-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetgraphicsParams.C (operator!=): new function, needed by the
	ControlGraphics class.

2001-03-28  Juergen Vigna  <jug@sad.it>

	* insettext.C (InsetButtonPress): only enter !inset if button == 2
	(checkAndActivateInset): don't use the values returned from
	call to bv->checkInsetHit.

	* insetminipage.C (Clone): set special minipage values.

	* insetcollapsable.C (draw): changed to draw the button in the
	upper left corner outside the textinset.
	(ascent): changed because of different drawing 
	(descent): ditto
	(width): ditto
	(Edit): ditto
	(InsetButtonPress): ditto
	(InsetButtonRelease): ditto
	(InsetMotionNotify): ditto

2001-03-27  Dekel Tsur  <dekelts@tau.ac.il>

	* figinset.C (GetPSSizes): Fix for the case when filename doesn't
 	contain a suffix.
	(Clone): ditto

2001-03-26  Juergen Vigna  <jug@sad.it>

	* lyxinset.h: added ShowInsetDialog() function in UpdatableInset.

	* insettext.C (ShowInsetDialog): implemented above function.

	* insettabular.C (ShowInsetDialog): ditto

	* insetminipage.C (ShowInsetDialog): ditto

2001-03-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetinclude.[Ch]: rename InsetInclude::InsetIncludeParams as
	InsetInclude::Params. Don't store a buffer * in Params. Store the
	master file name instead.

2001-03-23  Juergen Vigna  <jug@sad.it>

	* insetcollapsable.C (InsetMotionNotify):
	(InsetButtonRelease): 
	(InsetButtonPress): fixed y-offset (minipages).

	* insettext.C (draw): force a FULL update if cleared == true.

	* insetcollapsable.C (draw): Lars forgotten entry for changing this
	routine to draw the minipages on its position-flag.
	(InsetInInsetY): give back the right y position, because of minipage
	position-flag.

2001-03-23  José Abílio Matos  <jamatos@fep.up.pt>

	* insetfloat.h
	* insetfloat.C (DocBook): docbook export code.

2001-03-22  Juergen Vigna  <jug@sad.it>

	* insetminipage.C (getMaxWidth): added function to set the drawing
	width!
	(Read): should work now!

	* insetcollapsable.C (InsetCollapsable): default is now NOT collapsed
	if we create a new inset.

2001-03-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* figinset.C (fl_set_preemptive_callback): moved definition outside
	of namespace anon.

2001-03-20  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.C (Read): prepare for reading of minipage arguments.

2001-03-18  Baruch Even  <baruch@lyx.org>

	* insetgraphics.C: Minor cleanups of the comments and code.

2001-03-17  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.C (InsetMinipage): default to not collapsed

2001-03-16  Juergen Vigna  <jug@sad.it>

	* insetminipage.C (width): modified with to be a string
	(widthp): added widthp (for % width) support functions.
	(InsetButtonRelease): added to open the options dialog on button==3.
	(~InsetMinipage): added to hide the dialog.

	* insetminipage.h: added hideDialog signal

2001-03-15  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.h: change the order or Position to match
	LyXParagraph::MINIPAGE_ALIGNMENT

	* several files: remvoe CXX_WORKING_NAMESPACES

	* ExternalTemplate.h: noncopyable is in namespace boost
	* insetinclude.h: ditto
	* insetcommand.h: ditto

2001-03-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* insettext.C (Edit): #else# -> #else.
	* insettoc.C: added using directive.

2001-03-14  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insetminipage.h: add pos, inner_pos, width and height. + getters
	and setters for all of them.

2001-03-13  Dekel Tsur  <dekelts@tau.ac.il>

	* insetinclude.C (Latex): Do not exit when the textclass of the
	included file differ from the textclass of the parent file.

2001-03-12  Angus Leeming  <a.leeming@ic.ac.uk>

	* ExternalTemplate.C (read): the reading of external insets now checks
	for \end_inset and removes it form the input stream.

2001-03-09  John Levon  <moz@compsoc.man.ac.uk>

	* ExternalTemplate.h:
	* ExternalTemplate.C:
	* insetexternal.h:
	* insetexternal.C: move form to GUII

2001-03-12  John Levon  <moz@compsoc.man.ac.uk>

	* insetinclude.h:
	* insetinclude.C: add InsetIncludeParams, use
	composition rather than derivation of InsetCommand

2001-03-12  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insettoc.C (Ascii): use the Buffer typedefs

2001-03-11  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insettoc.C (Ascii): implement for dynamic number of lists

	* insetcaption.[Ch]: update from new_insets branch
	* insetfloat.[Ch]: ditto
	
2001-03-06  John Levon  <moz@compsoc.man.ac.uk>

	* insetexternal.C:
	* figinset.C: use new File Dialog

2001-03-06  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* insettext.C: changes becuase of ParagraphParameters.

2001-02-28  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.C (updateInset): Changed due to the change in
	GraphicsCache.

2001-02-26  Juergen Vigna  <jug@sad.it>

	* insettext.C (SetFont): Set Undo only if we have selection (as it is
	handled in LyXText).

2001-02-23  Juergen Vigna  <jug@sad.it>

	* insettext.C (draw): some small repainting fixes.
	(LocalDispatch): put the sel_cursor stuff after the insert of chars.

	* inset.C (LocalDispatch): changed action to be a kb_action (as it
	should be) and not an int.
	
	* insettabular.C (LocalDispatch): ditto

	* insettext.C (LocalDispatch): ditto

	* insetcollapsable.C (LocalDispatch): ditto

2001-02-22  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): return DISPATCHED if we cannot
	DISPATCH it and we don't have a locking_inset.

2001-02-21  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.[Ch]: Changed to use boost::shared_ptr<GraphicsCacheItem>
	instead of GraphicsCacheItem *.

2001-02-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* insetcollapsable.C (getLyXText): add const qualifier to second
	parameter. 

2001-02-22  Juergen Vigna  <jug@sad.it>

	* insettext.C (getLyXText): honor the recursive parameter.
	(SetUpdateStatus): set need_update to CURSOR_PAR if LyXText needs it.

	* inset.C (getLyXText): added bool recursive parameter.

	* insettext.C (SetUpdateStatus): or the update codes.
	(draw): check need_update with &.
	(InsetButtonPress): set no_selection to not put a selection when
	entering an inset and it is redraws in another spot.

	* insettext.h: made need_update an int.

2001-02-20  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.h:
	* insetgraphisc.C: Changed to use better semantics when loading images
	for inline view. Now it doesn't keep the pixmap itself but it's holder.

2001-02-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* insetcommand.h:
	* inseterror.h:
	* insetgraphics.C: change name of "hide" signal to "hideDialog",
	consistent with InsetTabular.
	
2001-02-19  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): implement PAGE up/down.

	* insettext.C (draw): clear all of it on need_update==INIT too!

	* insettabular.C (InsetUnlock): always clear the selection.

	* inset.C (scroll): normally we only want to scroll the inset until
	it is fully visible so if top_x + offset > 20 then just set scx to 0.

2001-02-14  Juergen Vigna  <jug@sad.it>

	* insettabular.C (LocalDispatch): remove x_fix as it is not used.
	(resetPos): fixed scroll behaviour.
	(LocalDispatch): do an update if moving cursor inside a table cell
	requests a scroll of the tabular.

2001-02-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* insettext.C (textWidth): constify local var

	* insettabular.C: small cleanup.

	* insetfoot.C (Latex): constify local var

	* insetcollapsable.C: small cleanup.

	* figinset.C (runqueue): use compare instead of strcmp

2001-02-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* insettext.C:
	* insetinfo.C: remove cruft

2001-02-14  Juergen Vigna  <jug@sad.it>

	* insettext.C (SetUpdateStatus): added a BufferView * parameter.

2001-02-13  Juergen Vigna  <jug@sad.it>

	* insettext.C (InsertInset): don't move left (is this right?)

	* insettabular.C (LocalDispatch): use of the no_draw variable

	* insettabular.h: new no_draw variable to stop redraw

	* insettabular.C (TabularFeatures): fixed update for alignment change

2001-02-12  John Levon  <moz@compsoc.man.ac.uk>

	* insetinclude.C:
	* insetbib.h:
	* insetbib.C: move dialogs to frontends/

2001-02-10  Dekel Tsur  <dekelts@tau.ac.il>

	* insettext.C (LocalDispatch): Restore the language if the inset
	becomes empty.

2001-02-09  Dekel Tsur  <dekelts@tau.ac.il>

	* insettext.C (moveRightIntern): Update the selection cursor.
	(moveLeftIntern): Ditto.

2001-02-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* Makefile.am: remove BoundingBox.h

	* BoundingBox.h: removed

2001-02-08  Dekel Tsur  <dekelts@tau.ac.il>
	
	* insettext.C (LocalDispatch): Update selection cursor when moving 
	cursor to the right.
	(moveRightIntern): Call to CursorRight with 2 argument eqaul to false.
	(moveLeftIntern): Ditto.

2001-02-05  Baruch Even  <baruch.even@writeme.com>

	* insetgraphics.C: Updated automatic image conversion, it now goes into
	temporary directory instead of with the image itself.

2001-01-21  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.C: Added Docbook support. Added Automatic image conversion
	to EPS or PNG when needed (support bitmap graphics).

2000-11-02  Baruch Even  <baruch@ev-en.org>

	* insetgraphics.C:
	* insetgraphiscParams.C: Some cleaning up, changing from std::endl to '\n'
	and removal of commented out code.

2001-01-31  Dekel Tsur  <dekelts@tau.ac.il>

	* insetbib.C (callback): Update citations if the key has changed.

2001-01-31  Dekel Tsur  <dekelts@tau.ac.il>

	* insetbib.C (InsetBibKey): Better computation of default key.
	(getScreenLabel) Show both the key and the label.
	(getBibLabel): New method.
	(callback): Force a redraw if the inset have been changed.

2001-01-26  Dekel Tsur  <dekelts@tau.ac.il>

	* insetref.C (getType, getName): Move methods from 
	src/frontends/xforms/FormRef.C.

2001-01-12  Dekel Tsur  <dekelts@tau.ac.il>

	* insettabular.C: Various improvements (use only one dummy position).

2001-01-25  Dekel Tsur  <dekelts@tau.ac.il>

	* insetbib.C (bibitemWidest): Use lyxfont::width instead of
 	par->bibkey->width. This fixes the crashes when running without
	gui or when having included documents.

2001-01-22  Dekel Tsur  <dekelts@tau.ac.il>

	* insetcommand.C (getAsString, setFromString): Cleanup.

2001-01-21  Dekel Tsur  <dekelts@tau.ac.il>

	* insetref.C: Add the array InsetRef::types that contains
	information about all supported reference types.

2001-01-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxinset.h: remove trailing comma in enum.

2001-01-17  John Levon  <moz@compsoc.man.ac.uk>

	* insettext.C: kill LyXBell.
