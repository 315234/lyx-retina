2001-08-01  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlInset.h: const and non-const forms of params().

	* helper_funcs.C (getStringFromVector,getVectorFromString): remove
	whitespace from either side of each item.

2001-07-30  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlFloat.h: add a != operator for FloatParams.
	Lars, how did you get this to compile!!!

	* ControlMinipage.[Ch]: uncommented someone's commenting out of
	operator != for MinipageParams. Who's changing stuff and not compiling?

2001-07-30  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* Makefile.am (libcontrollers_la_SOURCES): add ControlFloat.h and
	ControlFloat.C

	* GUI.h: add class GUIFloat

	* ControlFloat.[Ch]: new files

2001-07-30  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ControlPrint.C: #include Lassert.h here.

2001-07-26  Baruch Even  <baruch@lyx.org>

	* ControlGraphics.C: changed file search string to cover eps, jpeg, gif
	and png.

2001-07-26  John Levon  <moz@compsoc.man.ac.uk>

	* ControlThesaurus.h:
	* ControlThesaurus.C:
	* GUI.h:
	* Makefile.am: thesaurus support

2001-07-23  John Levon  <moz@compsoc.man.ac.uk>

	* ControlInclude.h:
	* ControlInclude.C: implement ability to load file
 
2001-07-18  Juergen Vigna  <jug@sad.it>

	* ControlSearch.C (replace): changes to lyxfind.h function calls.

2001-07-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* biblio.C (getInfo): add a .c_str() to handle the usual
	stringstream pain.

2001-07-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCitation.[Ch]: changes associated with adding natbib support.
	New public methods, usingNatbib, getCiteStrings and getCiteStyles.
	New static variable citeStyles_.

	* biblio.[Ch]: large internal rearrangement.
	New public enum CiteStyle.
	New public struct CitationStyle.
	New public functions getCitationStyle, getCiteCommand, getCiteStyles,
	getNumericalStrings, getAuthorYearStrings
	(simpleSearch, regexSearch): no longer publicly accessible.

	* helper_funcs.C (getStringFromVector): bug fix.

2001-07-16  Baruch Even  <baruch@lyx.org>

	* ControlVCLog.h: Added Lsstream.h to includes.

2001-07-17  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlSpellchecker.[Ch]: remove d-tor.

2001-07-17  Edwin Leuven  <leuven@fee.uva.nl>

	* ControlSpellchecker.[Ch]: remove member quit() and some cleaning
	
2001-07-16  Juergen Vigna  <jug@sad.it>

	* ControlSpellchecker.C (show): use the lyxrc.use_pspell flag (if
	compiled with USE_PSPELL) to be able to switch between ISpell and
	PSpell classes.

2001-07-13  Angus Leeming  <a.leeming@ic.ac.uk>

	Consistent use of Lsstream.h:
	* ControlAboutlyx.[Ch] (getCredits):
	* ControlVCLog.[Ch] (getVCLogFile): std::stringstream -> stringstream.

2001-07-13  Edwin Leuven  <leuven@fee.uva.nl>

	* ControlCredits.[Ch]: removed
	* ControlCopyright.[Ch]: removed
	* ControlAboutlyx.[Ch]: added (replaces previous)
	* GUI.h: removed credits and copyright added about lyx stuff

2001-07-13  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ControlSpellchecker.C (getSuggestion): 
	(getWord): add std:: qualifier

>001-07-13  Edwin Leuven  <leuven@fee.uva.nl>

	* ControlSpellchecker.[Ch]: added
	* ViewBase.h: added partialUpdate(int) member
	* GUI.h: added spell stuff
	
2001-07-12  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* ControlExternal.C: (*it). -> it->

2001-06-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonController.h: move some included header files out of the
	frontends and into here.

2001-06-15  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCharacter.C (c-tor): cosmetic name change of signal.

2001-06-13  Angus Leeming  <a.leeming@ic.ac.uk>

	* *.[h]: added // -*- C++ -*-
	* *.[C]: removed // -*- C++ -*-

	* ControlCharacter.[Ch]: (setParams): Check contents of font_ to
	activate Apply button.
	(clearParams): removed.
	font_ is now stored as a boost::scoped_ptr.
	font_ is no longer deleted on hide(), so it's contents can now be used
	by the Font button on the toolbar.
	Lots of new methods so that the GUI can easily get the contents of
	font_ when it update()s.

2001-06-12  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCharacter.C (apply): test that font_ exists, thereby preventing
	crash when the Font button on the Toolbar is pressed.

	* GUI.h: change policy of Character button controller to
	OkApplyCancelReadOnlyPolicy.

2001-06-11  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* ControlToc.C (getContents): don't add anything to the list if it
	is supposed to be empty.

2001-06-01  Angus Leeming  <a.leeming@ic.ac.uk>

	* helper_funcs.C (getVectorFromString): bug fix.

2001-05-30  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonController.h
	* ButtonControllerBase.[Ch] (refreshReadOnly): new method, called direct
	from ButtonControllerBase::readOnly. Updates the state of the widgets
	in the read-only list only when the read-only status of the document
	changes.
	(refresh): moved this stuff into refreshReadOnly.

2001-05-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlPrint.C (c-tor):
	* ControlPreamble.C (c-tor): initialise params_ and thereby cure crash.

2001-05-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* biblio.C:
	* character.h: small clean-ups.

2001-05-04  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* ControlToc.C (getType): remove support for old float list.

2001-04-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlButtons.h: no longer include ButtonControllerBase.h, ViewBase.h
	* ControlGraphics.h: no longer include insetgraphicsParams.h
	* ControlInset.h: no longer include LyXView.h

	* ControlBibitem.C:
	* ControlBibtex.C:
	* ControlButtons.C:
	* ControlCharacter.C:
	* ControlCitation.C:
	* ControlCommand.C:
	* ControlConnections.C:
	* ControlCopyright.C:
	* ControlCredits.C:
	* ControlError.C:
	* ControlExternal.C:
	* ControlGraphics.C:
	* ControlInclude.C:
	* ControlLog.C:
	* ControlMinipage.C:
	* ControlPreamble.C:
	* ControlPrint.C:
	* ControlRef.C:
	* ControlSearch.C:
	* ControlTabularCreate.C:
	* ControlToc.C:
	* ControlVCLog.C: they're now in here!

2001-04-17  Lars Gullik Bjønnes  <larsbj@birdstep.com>

	* ButtonControllerBase.h: C++ mode, inherit privately from
	noncopyable 
	* ButtonPolicies.h: ditto

	* ButtonController.h: C++ mode, swap init order of restore_ and
	cancel_ 

2001-04-06  John Levon  <moz@compsoc.man.ac.uk>

	* ControlTabularCreate.h:
	* ControlTabularCreate.C: make dialogs use a pair of uints
	  instead of a string

	* ControlVCLog.h:
	* ControlVCLog.C: fill a stringstream with the log contents
	and then delete it

	* ControlExternal.C: from Angus, clone the new InsetExternal
	  before acting on it

2001-04-09  Angus Leeming  <a.leeming@ic.ac.uk>

	* helper_funcs.C (getStringFromVector, getVectorFromString): fixed bugs
	and made more robust.

2001-04-05  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ControlToc.C: 
	* ControlSearch.C: 
	* ControlPrint.C: 
	* ControlPreamble.C: 
	* ControlInclude.C: 
	* ControlGraphics.C: 
	* ControlExternal.C: 
	* ControlCopyright.C: include gettext.h

	* ControlCharacter.C: 
	* character.C: include gettext.h and language.h

2001-04-03  John Levon  <moz@compsoc.man.ac.uk>

	* ButtonController.h:
	* ButtonControllerBase.h:
	* ButtonControllerBase.C:
	* ButtonPolicies.h:
	* ButtonPolicies.C:
	* ControlButton.h:
	* ControlButton.C:
	* ControlButtons.h:
	* ControlButtons.C:
	* ControlConnections.h:
	* ControlDialogs.h:
	* ControlInset.h:
	* ControlExternal.C:
	* Makefile.am:
	* README:
	* ViewBase.h: s/ControlButton/ControlButtons/
	s/popup/dialog/
	s/UndoAll/Restore/ + associated

2001-03-30  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlToc.[Ch]: new files; a controller for the TOC popup.

	* GUI.h:
	* Makefile.am: associated changes with all of the above.

2001-03-30  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlExternal.C: bug fixes. Can now apply changes to the inset
	and edit, view, update the External Material correctly. I hope!

2001-03-30  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonController.[Ch]: renamed as ButtonControllerBase.[Ch]

	* BCTemplates.h: renamed as ButtonController.h

	* ControlBase.[Ch]: renamed as ControlButton.[Ch]. Class named to match.

	* ViewBase.h:
	* ControlConnections.h: associated change in #include and class names.
	
	* ControlExternal.[Ch]: new files; a controller for the External
	Material popup.

	* GUI.h:
	* Makefile.am: associated changes with all of the above.

	* ControlGraphics.[Ch]:
	* ControlInclude.[Ch]:
	* ControlPrint.[Ch]:
	(lv): removed.
	(Browse): new method. Returns the results of a FileDialog browse.

	* helper_funcs.[Ch] (browseFile): moved from xforms_helpers.[Ch].
	(getVectorFromString): fixed bug.

	* biblio.C (simpleSearch): cleaned up.

2001-03-29  Angus Leeming  <a.leeming@ic.ac.uk>

	* A slight reworking of Baruch Even's ButtonController patch.

	* BCTemplates.h: new file; all the templates for the ButtonController.
	Including Baruch's new GuiBC class, with setCancelCloseButton() changed
	to the more generic setButtonLabel().

	* ButtonController.[Ch]: renamed cancel_label and close_label as
	cancel_label_ and close_label_.

	* Makefile.am: added BCTemplates.h

2001-03-29  Juergen Vigna  <jug@sad.it>

	* ControlMinipage.C: removed widthp_ and all it's functions and changed
	to use new %-lengths of LyXLength.

2001-03-29  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCitation.C (bibkeysInfo): removed Assert.

	* ControlCopyright.h: moved GUICopyright into GUI.h

	* GUI.h: see above.

2001-03-28  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlInset.h (clearDaughterParams): is empty by default, not pure.
	(setDaughterParams): a (by default empty) new method called in show().

	* ControlBibitem.h:
	* ControlBibtex.h:
	* ControlError.h:
	* ControlInclude.h:
	* ControlMinipage.h:
	* ControlRef.h:
	* ControlSearch.h:
	* ControlUrl.h (clearDaughterParams): removed

	* ControlMinipage.C (applyParamsToInset): update the view.
	Added namespace minipage containing a helper function getUnits.

	* GUI.h: changed Minipage policy to NoRepeatedApplyReadOnlyPolicy.

	* ControlCharacter.[Ch]: moved out all the helper functions and the
	enum into their own file.
	* character.[Ch]: new files; contain the character helper functions,
	now inside namespace character.

	* ControlCitation.[Ch]: moved out all the helper functions and the
	enums into their own file. Simplified interface.
	* biblio.[Ch]: new files; contain the citation helper functions,
	now inside namespace biblio. Will be of use also to an improved
	BibTeX popup.

	* ControlGraphics.[Ch]:
	* ControlIndex.[Ch]: new files; controllers for the Graphics and Index
	popups, respectively.

	* GUI.h:
	* Makefile.am: associated changes.

2001-03-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlMinipage.[Ch]:
	* ControlPreamble.[Ch]:
	* ControlPrint.[Ch]:
	* ControlSplash.[Ch]: new files; controllers for the Minipage, Preamble
	and Print popups and Splash screen, respectively.

	* ViewBase.h (ViewSplash): new base class for GUI-specific Splash
	screens.

	* GUI.h:
	* Makefile.am: associated changes.

2001-03-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlConnections.[Ch]: (docType): new method; returns the type
	of the buffer, LaTeX, Literate, LinuxDoc or DocBook.

	* ControlRef.[Ch]:
	* ControlSearch.[Ch]:
	* ControlTabularCreate.[Ch]: new files; controller for the Ref,
	Search and TabularCreate popups, respectively.

	* GUI.h:
	* Makefile.am: associated changes.

2001-03-26  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCitation.C (getBibkeyInfo): get nasty and assert the info map
	contains data.

	* ControlInset.h (apply): fix bug. Can now create new insets again.

	* README: describe program flow.

2001-03-24  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* Makefile.am (libcontrollers_la_SOURCES): add ControlDialogs.h

2001-03-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlDialogs.h: moved class ControlInset into its own file.

	* ControlInset.h: new file. class ControlInset has been expanded to take
	two template parameters, Inset and Params. Believe that all inset
	controllers can be derived from this with the minimum of effort.

	* ControlBibitem.[Ch]:
	* ControlBibtex.[Ch]:
	* ControlCitation.[Ch]:
	* ControlCommand.[Ch]: moved most code into ControlInset.

	* lots of files. Moved protected stuff into private where possible.

	* ControlError.[Ch]:
	* ControlInclude.[Ch]:
	* ControlUrl.[Ch]: new files; controllers for the LaTeX error,
	Include and Url popups, respectively.

	* GUI.h:
	* Makefile.am: associated changes.

2001-03-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCredits.[Ch] (getCredits): returns a stringstream not a
	vector<string>.

2001-03-23  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ControlCredits.C (getCredits): remove std:: qualifier for
	getline(). 

2001-03-23  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* ControlCredits.C (getCredits): add std:: on vector

2001-03-22  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* ControlCredits.C: remove using that is only used once, use
	std::ios instead of std::iosbase, add some annoying comments.

2001-03-22  Angus Leeming  <a.leeming@ic.ac.uk>

	* lots of header files: improved explanatory notes.

	* ControlBase.[Ch]: removed LyXView & lv_ and methods using it.
	ControlBase is now a class that only controls the interaction of the
	View with the ButtonController.

	* ControlConnections.[Ch]: added LyXView & lv_ and associated methods
	to ControlConnectBase. The class controls the connection/disconnection
	of signals from the LyX kernel and makes available the kernel (through
	lv_) to daughter controller classes.
	Moved out class ControlConnectInset to a new file ControlDialogs.h.

	* ControlDialogs.h: new file. Contains the definition of two template
	controller classes, ControlDialog and ControlInset (was
	ControlConnectInset). ControlInset is a parent class for controllers
	of inset-popups. ControlDialogs is the rather uninspired name for
	the base class of all non-inset popups. (Eg, Document and Paragraph.)
	ControlDialogs is reaching a state of maturity as several popups now use
	it and its functionality becomes clear. ControlInset is still in a state
	of flux. It is likely that functionality will be moved out of
	ControlCommands and into it.

	* GUI.h: new file. Moved all the template GUIXXX classes out of the
	individual Controller header files and into one place. These classes
	serve only as convenient wrappers to simplify code in the respective
	frontends' Dialogs::c-tor. Now all derived from a templatised parent.

	* ControlCharacter.[Ch] (show, update, hide):
	* ControlLog.[Ch] (show, update, hide):
	* ControlVCLog.[Ch] (show, update, hide): moved back into
	the ControlDialogs base class.
	(setParams, clearParams): new methods containing controller-specific
	code to set/reset the parameters manipulated by the view.

	* ControlCommand.[Ch] (clearParams): a new virtual method, by default
	empty.
	(hide): calls clearParams.

	* ControlCitation.[Ch] (hide): renamed as clearParams, a method called
	by ControlCommand::hide().

	* ControlCopyright.[Ch]:
	* ControlCredits.[Ch]: new files; controllers for the copyright and
	credits popups, respectively.

2001-03-21  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* ControlCharacter.C: fix typo

2001-03-21  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCharacter.[Ch]: new files; controller for the character popup.

	* ControlCitation.[Ch] (getStringFromVector, getVectorFromString):
	moved to new files helper_funcs.[Ch].

	* helper_funcs.[Ch]: new files. Some useful helper functions and
	functors.

	* Makefile.am: added new files.

2001-03-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCitation.C (getBibkeyInfo): parse non-BibTeX entries correctly.

2001-03-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlLog.[Ch]:
	* ControlVCLog.[Ch]: new files; controllers for LaTeX and Version
	Control log files, respectively.

	* Makefile.am: added new files.

2001-03-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlBibtex.[Ch]: new files; controller for an InsetBibtex popup.

	* Makefile.am: added ControlBibtex.[Ch].

2001-03-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlBibitem.C:
	* ControlCitation.C: added "using SigC::slot" declaration.

	* ControlCitation.C (getStringFromVector): re-apply Dekel's recent fix
	to FormCitation.C prior to the merger: "Do not put space between
	multiple keys".

2001-03-15  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* several files: remove CXX_WORKING_NAMESPACES

	* ButtonController.h: noncopyable is in namespace boost
	* ButtonPolicies.h: ditto

2001-03-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* Merging changes from BRANCH_MVC back into HEAD.

2001-03-12  Angus Leeming  <a.leeming@ic.ac.uk>

	* Makefile.am: add ControlBibitem.[Ch].

	* ControlBibitem.[Ch]: new files that together define the Controller
	for a Bibitem popup.

	* ControlCommand.h (c-tor): give  kb_action a default value of
	LFUN_NOACTION.
	
	* ControlCommand.C (apply): do nothing if kb_action is LFUN_NOACTION.
	
	* ControlCitation.[Ch]: moved search functions out of class.
	(bibkeysInfo): new method. Returns const reference to private data.
	(searchKeys): added case-sensitive switch. Used only by simpleSearch
	for now.

2001-03-09  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCitation.[Ch]: added Search functions to the class,
	(shamelessly lifted from Marco's gnome code). I think that these would
	be better as helper functions outside the class, but this is a first
	stab at it.

2001-03-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* ControlCitation.[Ch]: (getBibkeyList): removed from class
	ControlCitation.
	(getBibkeys, getBibkeyInfo): added to class ControlCitation.
	(getStringFromVector, getVectorFromString, parseBibTeX): new helper
	funcs. parseBibTeX() is lifted staraight out of Marco's gnome
	implementation of FormCitation.

2001-03-05  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonPolicies.h: add SMI_NOOP to enum.

	* ButtonPolicies.C (nextState): add if-statement for SMI_NOOP.

	* ButtonController.C (input): add "optimising" if-statement. Actually,
	things don't work correctly without it...

2001-03-02  John Levon  <moz@compsoc.man.ac.uk>

	* ViewBase.h: remove #pragma directive

	* ControlConnection.[Ch] (ControlConnectBI c-tor): add explicit c-tor
	to make g++ happy.

2001-03-02  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonPolicies.[Ch]: moved from ../ButtonPolicies.[Ch]

	* Makefile.am: added ButtonPolicies.[Ch]

	* ButtonController.[Ch]: ButtonController is split into
	ButtonControllerBase and a template ButtonController class. The base
	class no longer stores a pointer to a ButtonPolicy, but instead
	accesses the actual instantiation of the policy through a pure virtual
	method bp(). This method and the ButtonPolicy itself are instantiated
	in the templatised ButtonController class. This class is derived from
	the GUI-specific GUIBC class, meaning that the frontends know
	nothing about the actual policy decided upon by the controllers.

	* ControlBase.[Ch]: No longer store the View or the ButtonController.
	Instead the actual instantiations are accessed through pure virtual
	methods view() and bc(). The daughter classes are responsible for the
	actual View and ButtonController.

	* ControlCitation.h: the templatised class GUICitation instantiates
	the methods view() and bc(). It also stores the instances of the
	View and ButtonController.
	
2001-02-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonControllerBase.[Ch]: renamed as ButtonController.[Ch]. Class
	also changed to ButtonController.

	* ControlBase.[Ch]:
	* ControlConnections.[Ch]:
	* ControlCommand.[Ch]:
	* ControlCitation.[Ch]:
	* ViewBase.h: Changes associated with this.

2001-01-15  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonControllerBase.[Ch]: new files. Split Allan's original
	xforms/ButtonController class into a GUI-I class (here) and an
	xforms-specific derived class, to be found in xforms/xformsBC.[Ch].

	* ControlBase.[Ch]: new files. ControlBase is an abstract base class
	from which all Dialog Controllers should be derived. the Controllers
	are GUI-independent, but are designed to control the behaviour of
	GUI-specific implementaions of each dialog.

	* ControlConnections.[Ch]: new files. Classes controlling the
	connections of buffer-independent, buffer-dependent and Inset dialogs
	with the LyX kernel.

	* ControlCommand.[Ch]: new files. A controller for all dialogs for the
	InsetCommand subset of insets.

	* ControlCitation.[Ch]: new files. The test specialisation! A
	controller for the Citation dialog.

	* ViewBase.h: new file. ViewBase is an abstract base class from which
	GUI-specific dialogs should be derived. The functionality that the GUIs
	must now implement is much reduced.
