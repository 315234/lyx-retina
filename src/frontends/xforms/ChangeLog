2001-03-20  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBase.[Ch] (input): no longer pure virtual. Has defualt state of
	SMI_NOOP.
	(FormBase2): split into two template classes, FormDB (DialogBase) and
	FormCB (ControllerBase) for greater flexibility.

	* FormBibitem.[Ch]:
	* FormBibtex.[Ch]:
	* FormCitation.[Ch]: associated changes.

	* FormBrowser.[Ch]:
	* FormLog.[Ch]:
	* FormVCLog.[Ch]:
	* forms/form_browser.fd: implemented controller-view split.

	* Dialogs.C: associated changes.

2001-03-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBibtex.[Ch]:
	* forms/form_bibtex.fd: implemented controller-view split.

	* Dialogs.C: associated changes.

2001-03-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBibtex.[Ch]:
	* forms/form_bibtex.fd: implemented controller-view split.

	* Dialogs.C: associated changes.

2001-03-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBaseDeprecated.[Ch]: rename title as title_.
	
	* FormBaseDeprecated.C: restore John's trick to give the dialog a border
	with limited functionality. It got lost in the MVC merge.

	* FormBaseDeprecated.C:
	* FormBase.C (show): moved initialisation of minw_, minh_ here.

	* FormBibitem.C (build):
	* FormBibtex.C (build):
	* FormBrowser.C (build):
	* FormCharacter.C (build):
	* FormCitation.C (build):
	* FormCopyright.C (build):
	* FormCredits.C (build):
	* FormDocument.C (build):
	* FormError.C (build):
	* FormExternal.C (build):
	* FormGraphics.C (build):
	* FormInclude.C (build):
	* FormIndex.C (build):
	* FormMinipage.C (build):
	* FormParagraph.C (build):
	* FormPreamble.C (build):
	* FormPreferences.C (build):
	* FormPrint.C (build):
	* FormRef.C (build):
	* FormSearch.C (build):
	* FormTabular.C (build):
	* FormTabularCreate.C (build):
	* FormToc.C (build):
	* FormUrl.C (build): removed initialisation of minw_, minh_.
	
	* The Maths Panel stuff no longer causes a crash on exit from LyX.

	* FormMaths.[Ch]:
	* forms/form_maths.fd: removed.

	* forms/form_maths_delim.fd:
	* forms/form_maths_deco.fd:
	* forms/form_maths_matrix.fd:
	* forms/form_maths_space.fd:
	* forms/form_maths_panel.fd: new files.
	Split contents of form_maths.fd into 5 new files, one for each form.

	* MathsSymbols.[Ch]: remove class BitmapMenu, renamed and reworked as
	class FormMathsBitmap in FormMathsBitmap.[Ch].

	* FormMathsPanel.[Ch]:
	* FormMathsBitmap.[Ch]:
	* FormMathsDeco.[Ch]:
	* FormMathsDelim.[Ch]:
	* FormMathsMatrix.[Ch]:
	* FormMathsSpace.[Ch]: Split contents of FormMaths into new files,
	one for each popup. Rewrite so that all the new classes are derived from
	FormBaseBD. Clean up the logic in the process (I hope!).

	* Makefile.am: added new fils, removed redundant ones.

2001-03-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* FormMinipage.C (FormMinipage): add SigC:: namespace specifier.
	(showInset): ditto
	(updateInset): ditto

2001-03-16  Juergen Vigna  <jug@sad.it>

	* Dialogs.C (Dialogs): create minipage options dialog.

	* forms/form_minipage.fd: 
	* form_minipage.C: 
	* form_minipage.h: 
	* FormMinipage.C: 
	* FormMinipage.h: new files for the minipage options dialog.

2001-03-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormMaths.[Ch]: make the FD_ structs private. Create appropriate
	callback methods.

	* forms/form_maths.fd: change C_FormBaseCancelCB to
	FormBaseDeprecatedCancelCB and so fix crash on closing the panel.

2001-03-16  John Levon  <moz@compsoc.man.ac.uk>

	* FormMaths.C: quash warnings

2001-03-16  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* FormMaths.C (C_FormMathsDelimCB): add usual .c_str() for lyxstring
	compatibility. 

2001-03-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* Form_various.h: cleaned up #includes and forward declarations.

	* Form_various.C: added "using SigC::slot" declaration.

	* FormMaths.[Ch]: moved to boost::scoped_ptrs.

	* FormDocument.C (CheckChoiceClass): removed string tct as the
	compiler warned that it was defined but never used.
	removed USE_CLASS_COMBO.

2001-03-13  John Levon  <moz@compsoc.man.ac.uk>

	* Dialogs.C:
	* FormMaths.h:
	* FormMaths.C:
	* MathsSymbols.h:
	* MathsSymbols.C:
	* Makefile.am:
	* Toolbar_pimpl.C:
	* form_*.C:
	* forms/makefile:
	* forms/form_maths.fd:
	* forms/fdfixc.sed:
	* forms/fdfix.sh: add maths panel

	* bmtable.h:
	* bmtable.c: moved from src/

2001-03-16  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* FormParagraph.h: NO_PEXTRA
	* FormParagraph.C (input): NO_PEXTRA

2001-03-15  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* several files: remove CXX_WORKING_NAMESPACES

2001-03-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* Merging changes from BRANCH_MVC back into HEAD.

2001-03-12  Angus Leeming  <a.leeming@ic.ac.uk>

	* Dialogs.C (c-tor): Changes associated with storing a vector of
	boost::shared_ptrs.
	Use MVC Bibitem popup.

	* FormBase.h: add a new template class FormBase2, derived from FormBase
	to make life creating MVC popups even easier ;-)

	* FormBibitem.[Ch]:
	* forms/form_bibitem.fd: moved over to the MVC way of doing things.
	Proof that a simple popup should be easy to implement!

	* FormCitation.[Ch]: now derived from FormBase2.

	* FormToc.C: added using std::vector directive.

2001-03-09  Dekel Tsur  <dekelts@tau.ac.il>

	* FormSearch.C: Add missing #pragma

2001-03-09  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormCitation.C:
	* forms/form_citation.fd: added the ability to Search, both Simply and
	for Regular Expressions. Use the Search code in the controller() to do
	the actual searching.

2001-03-08  Angus Leeming  <a.leeming@ic.ac.uk>

	* Makefile.am: added FormCredits.[Ch] and form_credits.[Ch]
	* forms/makefile: added form_credits.fd
	
	* Dialogs.C: added FormCredits and removed ShowCredits.
	
	* FormCredits.[Ch]:
	* forms/form_credits.fd:
	* forms/form_search.fd: ported to the MVC way.
	
2001-03-07  Angus Leeming  <a.leeming@ic.ac.uk>

	* xforms_helpers.h (formatted): now has default arguments for size and
	style.

	* FormCitation.[Ch]: moved code out of this class and into
	ControlCitation and associated helper funcs.
	
2001-03-05  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBase.[Ch]: (InputCB): use ButtonController::input() rather than
	ButtonController::valid() to check state of input. The buttons are
	now controlled correctly.

	* Form*.[Ch]: use boost::scoped_ptr for the remaining few classes.

2001-03-05  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Form*.[Ch]: use boost::scoped_ptr for dialog_ et al.

	* FormBase.[Ch]: rename title as title_.

2001-03-02  John Levon  <moz@compsoc.man.ac.uk>

	* FormBase.C (c-tor): initialise variables in correct order.

	* FormCitation.C: add #include <algorithm>

2001-03-02  Angus Leeming  <a.leeming@ic.ac.uk>

	* xformsBC.[Ch]: Changes associated with the changes to
	controllers/ButtonController.[Ch]. Ie, the class is now derived from
	ButtonControllerBase and the ButtonPolicy is accessed through a method
	bp() rather than the instance bp_.

	* FormBaseDeprecated.[Ch]: no longer store a ButtonController, but
	rather use a pure virtual method bc() to access the controller
	instantiated by the daughter classes.

	* F*.[Ch]: changes associated with the above.

2001-02-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBase.[Ch]: renamed as FormBaseDeprecated.[Ch]

	* ViewXforms.[Ch]: renamed as FormBase.[Ch]

2001-02-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonController.[Ch]: deleted. The class is split into two
	(with identical functionality), the code being found in
	../controllers/ButtonController.[Ch] and xformsBC.[Ch]

	* xformsBC.[Ch]: new files. Xforms specific part of Allan's original
	ButtonController class.

	* FormBase.[Ch]: changes associated with the above split.

	* ViewXforms.[Ch]: Base class for xforms dialogs derived from ViewBase
	(../controllers/ViewBase.h). Ie, for Dialogs with GUI-I controllers
	controlling all interaction to/from the LyX kernel.

	* FormCitation.[Ch]:
	* forms/form_citation.fd: An xforms-specific implementation of the
	Citation dialog, controlled by the GUI-I ControlCitation.

	* Dialogs.C: Use the controlled Citation dialog.

2001-03-15  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* combox.h:
	* combox.C: moved from src/

2001-03-09  Angus Leeming  <a.leeming@ic.ac.uk>

	* forms/fdfix.sh:
	* forms/form_filedialog.C.patch: I hate having to make these patches,
	but on reflection I think it's probably better than hacking fdfix.sh.

2001-03-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* forms/fdfix.sh: test whether bmtable.h is needed before #including it.

2001-03-13  John Levon  <moz@compsoc.man.ac.uk>

	* FormGraphics.C: remove unnecessary hack

2001-03-13  Dekel Tsur  <dekelts@tau.ac.il>

	* FormCitation.C (apply): Do not put space between multiple keys.

2001-03-12  Dekel Tsur  <dekelts@tau.ac.il>

	* Menubar_pimpl.C (add_toc): Remove debug message.

2001-03-09  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* Dialogs.C:
	* FormExternal.C:
	* FormExternal.h:
	* form_external.C:
	* form_external.h:
	* xforms/forms/makefile:
	* forms/form_external.fd: add FormExternal

2001-03-12  John Levon  <moz@compsoc.man.ac.uk>

	* Dialogs.C: add destroySplash()

	* form_splash.h:
	* form_splash.C:
	* forms/form_splash.fd:
	* FormSplash.h:
	* FormSplash.C: make independent of FormBase, tidy
	
	* Menubar_pimpl.C: destroy splash on interaction

2001-03-12  John Levon  <moz@compsoc.man.ac.uk>

	* FormInclude.h:
	* FormInclude.C:
	* form_include.h:
	* form_include.C:
	* forms/form_include.fd: rework, clean up

2001-03-12  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* FormToc.h: use Buffer::typedef

	* Menubar_pimpl.C (add_toc): use the Buffer::typedefs
	* FormToc.C (build): ditto
	(updateToc): ditto

2001-03-11  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* FormToc.C (build): implement for dynamic number of lists
	(updateToc): ditto
	* Menubar_pimpl.C (add_toc): ditto

2001-03-07  Edwin Leuven  <leuven@fee.uva.nl>

        * added credits:
	* Dialogs.C:
	* Makefile.am:
	* FormCredits.[Ch]:
	* form_credits.[Ch]:
	* forms/form_credits.fd:

2001-03-07  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* Menubar_pimpl.h: make Pipl::ItemInfo::item_ a boost::shared_ptr,
	make ButtonList contain boost::shared_ptr<ItemInfo>

	* Menubar_pimpl.C (~Pimpl): remove destructor 

2001-03-06  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* FileDialog.C:
	* FormFiledialog.C:
	* FormFiledialog.h:
	* form_filedialog.C:
	* form_filedialog.h:
	* FormGraphics.C:
	* FormInclude.C:
	* FormPreferences.C:
	* FormPrint.C:
	* xforms_helpers.C:
	* xforms_helpers.h:
	* forms/fdfix.sh:
	* forms/makefile:
	* form/form_filedialog.fd: add File Dialog
	* Toolbar_pimpl.h:
	* Toolbar_pimpl.C: move LayoutsCB to here

2001-03-06  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* FormParagraph.C: changes because of ParagraphParameters.

2001-03-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* FormSearch.C (Replace): remove default argument
	(Find): ditto

2001-03-05  Edwin Leuven  <leuven@fee.uva.nl>

	* added find/replace dialog:
	* FormSearch.*: added
	* form_search.*: added
	* forms/form_search.fd: added

2001-03-05  Angus Leeming  <a.leeming@ic.ac.uk>

	* xform_helpers.[Ch]: renamed as xforms_helpers.[Ch].

	* various: in a rush of delayed guilt, I've renamed all instances of
	xform as xforms. Jean-Marc sowed this seed a long, long time ago and it
	finally sprouted.

	* xforms_helpers.[Ch] (setEnabled): a little wrapper function to
	activate/deactivate an FL_OBJECT.

	* FormCitation.C:
	* FormDocument.C:
	* FormInclude.C:
	* FormParagraph.C:
	* FormPreamble.C:
	* FormPreferences.C:
	* FormRef.C:
	* FormTabular.C: used it.

2001-03-05  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormPreferences.C: removed three unused using directives.

2001-03-05  Edwin Leuven  <leuven@fee.uva.nl>

	* added find/replace dialog:
	* FormSearch.*: added
	* form_search.*: added
	* forms/form_search.fd: added

2001-02-27  Dekel Tsur  <dekelts@tau.ac.il>

	* FormRef.C: Fixed the behaviour of Goto-Ref.

2001-02-27  Angus Leeming  <a.leeming@ic.ac.uk>

	* forms/makefile: added character and preamble dialogs

2001-02-27  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* FormCharacter.C (FormCharacter): change order of deletion,
	change combo_language2 to combo_language2_

2001-02-26  Dekel Tsur  <dekelts@tau.ac.il>

	* FormRef.C (apply): Update bookmark #0 after inserting a reference.

2001-02-23  Edwin Leuven <leuven@fee.uva.nl>

	* Dialogs.C: added layoutcharacter
	* FormCharacter.C: added
	* FormCharacter.h: added
	* form_character.C: added
	* form_character.h: added
	* forms/form_character.fd: added
               
2001-02-23  Dekel Tsur  <dekelts@tau.ac.il>
 
	* FormPreferences.C: Handle lyxrc.language_use_babel and
	lyxrc.language_global_options.

2001-02-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormPreferences(GetFrom, GetTo): use size_type rather than int.

2001-02-23  John Levon  <moz@compsoc.man.ac.uk>

	* FormBase.C: no longer transient dialogs, XMapWindow()
	  in attempt to de-iconify

	* FormDocument.C: remove DO_USE_DEFAULT_LANGUAGE

2001-02-21  Dekel Tsur  <dekelts@tau.ac.il>

	* FormDocument.C (checkMarginValues): Activate "use geometry" button 
	if using custom paper size/margin.

2001-02-21  Allan Rae  <rae@lyx.org>

	* forms/form_preferences.fd: larger, bold font for outer tabfolder

2001-02-20  Edwin Leuven <leuven@fee.uva.nl>

        * src/frontends/xforms/Dialogs.C: added preamble
        * src/frontends/xforms/FormPreamble.C: added
        * src/frontends/xforms/FormPreamble.h: added
        * src/frontends/xforms/Makefile.am: added
        * src/frontends/xforms/form_preamble.C: added
        * src/frontends/xforms/form_preamble.h: added
        * src/frontends/xforms/form_preamble.fd: added

2001-02-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBase.h: moved noncopyable derivation to DialogBase.

2001-02-19  Juergen Vigna  <jug@sad.it>

	* FormTabular.C (build): make all input field accepted only after
	a "RETURN".

	* forms/form_tabular.fd: removed default "Return" on Close-Button.

2001-02-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormError.C:
	* FormGraphics.C:
	* FormInset.C (showInset): change associated with name change
	inset::hide to inset::hideDialog.

2001-02-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormCitation.C (build): altering "Text after" now activates the Ok,
	Apply buttons.

2001-02-16  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormCitation.C: lots of white-space changes to make file consistent
	with LyX style.
	(input): use the FL_OBJECT * parameter to decide what to do, not the
	long parameter.

	* FormCitation.h: removed most entries in enum.

	* forms/form_citation.fd: change names of variables, consistent with
	Allan's naming scheme.
	Don't pass any particular arguments to the InputCB function.
	choice_style now triggers a callback and looks like other choices.

2001-02-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* other: use compare instead of strcmp/strncmp

2001-02-15  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonController.[Ch]: changed trigger_change_ vector and associated
	methods to dont_trigger_change_ because FL_OBJECTs that trigger a
	callback to InputCB() but don't trigger a change in the state of the
	Ok, Apply buttons are much rarer than those that do.

	* FormCitation.C (build): associated change.

2001-02-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* ButtonController.C: include algorithm

2001-02-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* ButtonController.[Ch] (addTriggerChange, eraseTriggerChange):
	new methods.
	(valid): method can now be passed an optional FL_OBJECT *. If it is, and
	the vector of FL_OBJECT *s that can trigger a change in the button state
	is not empty, then a change of state will occur only if the FL_OBJECT *
	is present in this vector.

	* FormBase.C (RestoreCB): call bc.undoAll() before restore(). Allows
	the user to deactivate specific fields within restore().
	(InputCB): pass the FL_OBJECT * to bc_.valid().

	* FormCitation.C (build): create a vector of FL_OBJECT *s that can
	trigger a change of state in the Ok,Apply buttons.
	(update): bc_.readOnly() to the start of the method. Similar reasoning
	to that for FormBase::RestoreCB, above.

2001-02-14  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormBrowser.C: used OkCancelPolicy for ButtonController rather than
	IgnorantPolicy.

	* forms/form_browser.fd:
	* forms/form_copyright.fd:
	* forms/form_error.fd:
	* forms/form_tabular.fd:
	* forms/form_toc.fd:
	Consistent shortcuts for Close button: Esc and Return only.

	* forms/form_citation.fd:
	* forms/form_document.fd:
	* forms/form_index.fd:
	* forms/form_paragraph.fd:
	* forms/form_preferences.fd:
	* forms/form_print.fd:
	* forms/form_ref.fd:
	* forms/form_tabular_create.fd:
	* forms/form_url.fd:
	Consistent shortcut for Cancel button: Esc only.

2001-02-12  John Levon  <moz@compsoc.man.ac.uk>

	* Dialogs.C: new Splash. Include, Bibitem/tex

	* FormBase.h: make show() virtual for Splash's benefit

	* Makefile.am:
	* forms/makefile:
	* FormBibitem.C:
	* FormBibitem.h:
	* FormBibtex.C:
	* FormBibtex.h:
	* form_bibitem.C:
	* form_bibitem.h:
	* form_bibtex.C:
	* form_bibtex.h:
	* forms/form_bibitem.fd:
	* forms/form_bibtex.fd:
	* FormInclude.C:
	* FormInclude.h:
	* form_include.C:
	* form_include.h:
	* forms/form_include.fd:
	* FormSplash.C:
	* FormSplash.h:
	* form_splash.C:
	* form_splash.h:
	* forms/form_splash.fd: new forms

2001-02-09  John Levon  <moz@compsoc.man.ac.uk>

	* FormLog.C: handle Literate build log nicely

2001-02-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* Menubar_pimpl.C: remove support for reference menuitem type.

2001-02-07  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* Timeout_pimpl.h:
	* Timeout_pimpl.C: add Timeout implementation

2001-02-06  John Levon  <moz@compsoc.man.ac.uk>

	* form_browser.h:
	* form_browser.C:
	* forms/form_browser.fd:
	* forms/makefile:
	* FormBrowser.C:
	* FormBrowser.h: readonly browser form

	* FormLog.C:
	* FormLog.h:
	* FormVCLog.C:
	* FormVCLog.h:
	* Dialogs.C: add Log and VCLog

	* Makefile.am: add Log and VCLog, add updatesrc target

2001-01-31  Dekel Tsur  <dekelts@tau.ac.il>

	* Menubar_pimpl.C (add_toc2): Add shortcut to the TOC menu.

2001-01-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* FormPreferences.C (GetFrom): fix crash when there is no format
	defined. 
	(GetTo): ditto.

2001-01-23  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormPreferences.C (LoadBrowserLyX): convert unsigned short to
	unsigned char correctly and so fix 2 bugs loading/changing colors.

2001-01-21  Dekel Tsur  <dekelts@tau.ac.il>

	* FormRef.C (update): Do not update dialog_->{ref,name,type}
 	if inset_ == 0.
	Deactivate the type button when buffer is LinuxDoc/Docbook
	(build): Uncomment calls to addReadOnly().
	(updateBrowser) Do not disable the update button when there are no 
	keys.
	(build, getType, getName): Use InsetRef::types.

2001-01-18  Angus Leeming  <a.leeming@ic.ac.uk>

	* FormPrint.[Ch] (browse): new method to browse for file to print to.

	* forms/form_print.fd: give the form a Browse button.

2001-01-17  Dekel Tsur  <dekelts@tau.ac.il>

	* FormRef.C (input): Fix the behavior of goto reference button.

