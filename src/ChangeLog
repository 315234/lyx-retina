2001-03-11  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* buffer.h: remove TocType

	* buffer.C (getTocList): change to return a map<string,
	vector<TocItem> >, implement for dynamic number of list.

	* CutAndPaste.[Ch] (checkPastePossible): remove unused arg
	* text2.C (PasteSelection): adjust
	* CutAndPaste.C (pasteSelection): adjust

	* FloatList.C (FloatList): update from the new_insets branch.
	* Floating.[Ch]: ditto
	* LaTeXFeatures.C: ditto
	* buffer.C: ditto
	* lyxlex_pimpl.C: ditto
	
	* paragraph.C (Last): remove when NEW_INSETS is defined.

	* other file: changes because of the above.

2001-03-09  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* lyxparagraph.h: rename next to next_, previous to previous_,
	make them private for NEW_INSETS. Rename Next() to next(),
	Previous() to previous().

	* other files: changes because of the above.

2001-03-08  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView.h: 
	* lyxparagraph.h: Add '#include "LString.h"' to fix compilation
	problem.

2001-03-08  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* main.C (main): pass lyx_localedir to gettext_init().

	* gettext.h: remove locale_init and gettext_init macros

	* gettext.C (locale_init): new function
	(gettext_init): new function

	* lyx_gui.C (LyXGUI): use locale_init() instead of explicit
	setlocale().

2001-03-07  Edwin Leuven  <leuven@fee.uva.nl>

        * Moved credits to frontends:
        * credits.[Ch]: removed
	* credits_form.[Ch]: removed
	* lyx_gui_misc.C: remove credits stuff
	* Makefile.am:

2001-03-07  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* lyx_main.C: make toplevel_keymap a boost::scoped_ptr.

	* kbmap.[Ch]: make kb_key::table a boost::shared_ptr, remove
	unneeded destructor.

	* intl.[Ch] (Intl): free the fd_form_keymap, make the fd_form_keymap
	a standalone pointer again.

	* ColorHandler.[Ch]: make lyxColorHandler a boost::scoped_ptr

2001-03-06  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am:
	* filedlg.h:
	* filedlg.C:
	* LyXAction.C:
	* ToolbarDefaults.C:
	* bufferlist.C:
	* commandtags.h:
	* form1.C:
	* form1.h:
	* lyx_cb.C:
	* lyx_cb.h:
	* lyxfunc.h:
	* lyxfunc.C:
	* BufferView_pimpl.C: use new file dialog in GUII

	* lyx_cb.h:
	* lyx_cb.C: remove LayoutsCB to Toolbar

2001-03-07  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ShareContainer.h (get): add std:: qualifier

2001-03-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* ShareContainer.h: define a proper ShareContainer::value_type
	type (and use typename to please compaq cxx)

2001-03-06  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* lyxparagraph.h: move serveral local vars to
	ParameterStruct/ParagraphParameters., use ShareContainer in
	FontTable., make vars in FontTable private and add getter and
	setter.

	* paragraph.C: changes because of the above.

	* lyxfont.h: remove copy constructor and copy assignment. (the
	default ones is ok), move number inside FontBits. move inlines to
	lyxfont.C 

	* lyxfont.C: add number to initializaton of statics, move several
	inlines here. constify several local vars. some whitespace
	cleanup. Dont hide outerscope variables.

	* Spacing.h: add two new constructors to match the set methods.

	* ShareContainer.h: new file, will perhaps be moved to support

	* ParameterStruct.h: new file

	* ParagraphParameters.h: new file

	* ParagraphParameters.C: new file

	* Makefile.am (lyx_SOURCES): add ParagraphParameters.C,
	ParagraphParameters.h, ParameterStruct.h and ShareContainer.h

	* BufferView_pimpl.C: ParagraphParameter changes.
	* buffer.C: Likewise.
	* bufferview_funcs.C: Likewise.
	* text.C: Likewise.
	* text2.C: Likewise.
	
2001-03-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfind.C (LyXReplace): do not redefine default argument in
	implementation. 
	(IsStringInText): ditto
	(SearchForward): ditto
	(SearchBackward): ditto

2001-03-06  Juergen Vigna  <jug@sad.it>

	* lyxfind.C (IsStringInText): put parentes around expressions.

2001-03-05  Edwin Leuven  <leuven@fee.uva.nl>

	* lyxfind.[Ch]: find stuff moved out of text2.C/lyxtext.h
	
2001-02-23  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_main.C: add ISO_Left_Tab as bind synonym for Tab

	* stl_string_fwd.h: add comment

	* lyx_gui_misc.C: killed ALWAYS_CLOSE_MATH_PANELS

	* tabular.h:
	* tabular.C: remove unused DocBook methods

	* intl.C:
	* language.C:
	* paragraph.C:
	* buffer.C:
	killed DO_USE_DEFAULT_LANGUAGE

2001-03-01  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_gui.C: do not include language.h.

	* bufferview_funcs.C (ToggleAndShow): do not provide optional
	arguments in function implementation.

2001-02-28  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* BufferView_pimpl.C: add <ctime>

2001-02-27  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* BufferView_pimpl.C: add using std::find_if

2001-02-27  José Matos  <jamatos@fep.up.pt>
	
	* LaTeXFeatures.C (getIncludedFiles): call to BasePath replaced
	by OnlyPath.
	
2001-02-11  José Matos  <jamatos@fep.up.pt>

	* buffer.C (makeDocBookFile): command styles now have a parameter as
	"title" by default.

2001-02-23  Edwin Leuven <leuven@fee.uva.nl>

	* layout_forms.[Ch]: removed
	* lyx_cb.[Ch]: out character
	* lyx_gui.C: out character
	* lyx_gui_misc.C: out character
	* bufferview_funcs.C: : out character,
	added toggleall as parameter in ToggleAndShow
                   
2001-02-26  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxfunc.C (getStatus): Fix the LFUN_EXPORT case.

	* text2.C (SetCurrentFont): Disable number property at boundary.

2001-02-26  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (getStatus): added a string argument override function so
	that this is correctly called from LyXFunc::Dispatch if it contains a
	do_not_use_argument which is used!
	(Dispatch): added check for "custom" export and call appropriate func.

2001-02-23  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxrc.C: Add language_command_local, language_use_babel and
 	language_global_options.

	* lyxfont.C (latexWriteStartChanges): Use language_command_local.

	* buffer.C (makeLaTeXFile): Use language_use_babel and 
	language_global_options.

2001-02-23  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (Dispatch): removed the whole part of the switch statement
	which works with LyXText and putted it inside BufferView. Here now we
	only call for that part the BufferView::Dispatch() function.

	* BufferView.C (Dispatch): added.

	* BufferView_pimpl.C (Dispatch): added! Here are now all dispatch
	functions which needs to use a LyXText over from LyXFunc.
	(MenuInsertLyXFile): added
	(getInsetByCode): added
	(moveCursorUpdate): added
	(static TEXT): added

2001-02-22  Juergen Vigna  <jug@sad.it>

	* BufferView_pimpl.C (update): call a status update to see if LyXText
	needs it.

2001-02-20  Lars Gullik Bjønnes  <larsbj@trylle.birdstep.com>

	* vc-backend.C (revert): implement for CVS
	(getLog): implement for CVS

2001-02-20  Juergen Vigna  <jug@sad.it>

	* text2.C (ClearSelection): added BufferView param for inset_owner call

	* lyxfunc.C (TEXT): added this function and use it instead of
	directly owner->view()-text of getLyXText().

2001-02-20  Edwin Leuven <leuven@fee.uva.nl>

        * src/layout_forms.C: out preamble
        * src/layout_forms.h: out preamble
        * src/lyx_cb.C: out preamble
        * src/lyx_cb.h: out preamble
        * src/lyx_gui.C: out preamble
        * src/lyx_gui_misc.C: out preamble
        * src/lyxfunc.C: connect with guii preamble

2001-02-19  Angus Leeming  <a.leeming@ic.ac.uk>

	* src/buffer.h: tiny clean-ups to allow compilation with DEC cxx.

2001-02-17  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (run): Do not use 'scanres & RERUN' when deciding
	whether to run bibtex.

2001-02-16  Dekel Tsur  <dekelts@tau.ac.il>

	* Makefile.am (lyx_SOURCES): Remove BackStack.h

2001-02-16  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* Makefile.am (lyx_SOURCES): removed bibforms.h

	* vspace.h: doxygen

	* text.C (GetVisibleRow): make several local vars const

	* tabular.C: small cleanup.

	* lyxserver.C (callback): use compare instead of strncmp

	* lyxparagraph.h: remove all code dep. on HAVE_ROPE, move inclass
	inlines to after class or to paragraph.C

	* lyxfont.h: remove friend operator!=

	* converter.h: move friend bool operator< to non friend and after
	class def.

	* combox.h: small cleanup

	* buffer.h: doxygen, remove unused constructor, move inclas inlies
	to inlines after class def.

	* buffer.C (pop_tag): use string operations instead of strcmp

	* bmtable.c: doxygen, small cleanup

	* LaTeX.h: remove friend operator==

2001-02-14  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* screen.C: 
	* lyxrc.[Ch]:
	* lyxfunc.C: 
	* lyxfont.[Ch]: 
	* lyx_cb.C: 
	* intl.[Ch]: 
	* commandtags.h: 
	* buffer.C: 
	* WorkArea.[Ch]: 
	* LyXAction.C: 
	* BufferView_pimpl.C:
	* BufferView.[Ch]: remove cruft

2001-02-14  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C: removed #if 0 unused code

	* lyxfunc.C (Dispatch): make LFUN_QUOTE work for InsetText.

	* BufferView_pimpl.C (update): set updatestatus of inset if needed.

	* text2.C (SetSelection): added a BufferView * parameter

2001-02-13  Juergen Vigna  <jug@sad.it>

	* lyxfunc.C (Dispatch): fixed protected blank problem.
	* BufferView2.C (protectedBlank): added LyxText * parameter.

	* tabular.C (AppendRow): forgot to set row_info of newly added row.
	(AppendColumn): same as above for column_info.

	* lyxfunc.C (Dispatch): supported some more functions in InsetText.
	(moveCursorUpdate): use a LyXText param for support of InsetText.

	* BufferView_pimpl.C (doubleClick): added support for InsetText.
	(tripleClick): ditto

	* lyxfunc.C (LFUN_APPENDIX): changed to use "text" pointer.

	* BufferView_pimpl.C (update): added LyXText param to honor insets.

	* bufferview_funcs.C (ToggleAndShow): fixed for text in insets.

	* text2.C (SetSelection): set correct update status if inset_owner
	(ToggleFree): ditto

2001-02-12  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* tabular.C: remove some commented code.

2001-02-12  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: call hideSplash()

	* LyXAction.C: make buffer-child-insert use LFUN_CHILD_CREATE

	* include_form.h:
	* bibforms.h: remove

	* lyxfunc.C:
	* src/commandtags.h: LFUN_CHILDINSERT -> LFUN_CHILD_INSERT,
	  add LFUN_CHILD_CREATE

	* counters.h: fix tiny typo
	
	* lyx_cb.C:
	* lyx.h:
	* lyx_gui.C:
	* lyx.C: move splash to frontends/xforms/

	* lyx_gui_misc.C: move Include and Bibform to frontends

	* lyxvc.h: clarify comment

	* vspace.C: tiny housekeeping

2001-02-10  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (PrepareToPrint): RTL Fix.

	* paragraph.C (GetUChar): New method.
	(String):  Use GetUChar.

	* buffer.C (asciiParagraph): Use GetUChar.

2001-02-09  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (GetVisibleRow): Fix selection drawing for RTL text in tables.

2001-02-09  John Levon  <moz@compsoc.man.ac.uk>

	* buffer.h:
	* buffer.C: rename to getLogName(), handle
	  build log / latex log nicely

2001-02-09  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* MenuBackend.C: 
	* MenuBackend.h: remove support for reference menuitem type.

2001-02-07  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView_pimpl.C: housekeeping
	* BufferView_pimpl.h:
	* LyXView.h:
	* Makefile.am:
	* Timeout.C:
	* Timeout.h:
	* minibuffer.h: move Timeout GUI-I
                          
2001-02-07  Dekel Tsur  <dekelts@tau.ac.il>

	* lyxrc.C (read): Update converters data-structures.

2001-02-07  Lars Gullik Bjønnes  <larsbj@lyx.org>

	* LaTeX.h (operator!=): add operator != for Aux_Info 

2001-02-06  John Levon  <moz@compsoc.man.ac.uk>

	* Makefile.am: remove LaTeXLog.C, log_form.[Ch]

	* LaTeXLog.C: deleted, useful code moved to Buffer

	* buffer.h:
	* buffer.C: new function getLatexLogName()

	* lyx_gui_misc.C:
	* lyx_gui.C:
	* lyxvc.C:
	* lyxvc.h:
	* lyxfunc.C: use frontends for LaTeX and VC logs

2001-02-06  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeX.h: yet another std:: that Allan forgot.

	* Variables.C (set): renamed from isset(), because this clashes
	with some HP-UX macros (grr).

2001-02-06  Allan Rae  <rae@lyx.org>

	* LaTeX.h: Another bug fix.  Missing std:: this time.

2001-02-04  Allan Rae  <rae@lyx.org>

	* paragraph.C (TeXOnePar): Partial fix for the '\n' generation in
	floats problem. I've left it commented out because it's not quite
	correct.  It should also test that the current object is a table or
	figure inset.  But I haven't gotten around to figuring out how to do
	that.  I *think* it'll be something like: "table" == inset.type()

	* LaTeX.h (operator==): Aux_Info should have a friend that returns a
	bool.

2001-02-02  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (scanAuxFile): A rewrite of this method. It now returns
	all the citation/databases/styles in the auxilary file. 
	(run): Rerun latex if there was a babel language error.

2001-02-01  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (Backspace): Preserve the font when changing newline char
	with a space.
	(BreakParagraph): If the cursor is before a space, delete the space.

	* lyx_cb.C (QuitLyX): Do not save files when running with no gui.

2001-01-31  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView2.C (ChangeInsets): Renamed from ChangeRefs. Accept a
	new argument (code).
	(ChangeCitationsIfUnique): New method.

	* paragraph.C (GetPositionOfInset): Handle bibkey.

2001-01-29  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* BufferView_pimpl.h: change type of Position::par_pos to
	LyXParagraph::size_type. 

2001-01-29  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView_pimpl.C (savePosition, restorePosition): Write
	messages to minibuffer.

2001-01-28  José Matos  <jamatos@fep.up.pt>

	* buffer.C (makeDocBookFile): adds support for document language.
	A silly restriction on the name of LatexCommand types where removed.
	Added support for CDATA sections, allows to chars unescaped, used
	among others in code, to avoid escape < and >.
	
2001-01-27  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView_pimpl.C (savePosition, restorePosition): Use a vector of 
	saved positions instrad of a stack. Furthermore, a position is
	stored using paragraph id/paragraph position.

	* commandtags.h: Add LFUN_BOOKMARK_SAVE and LFUN_BOOKMARK_GOTO.
	Remove LFUN_REF_BACK.

2001-01-27  Dekel Tsur  <dekelts@tau.ac.il>

	* converter.C (dvipdfm_options): New method.

2001-01-26  Dekel Tsur  <dekelts@tau.ac.il>

	* vspace.C (isValidLength): Fix for empty input string.

2001-01-26  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LyXAction.C (init): change description of LFUN_FIGURE to
	"Insert Graphics"

2001-01-25  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* LaTeX.C: add using directive

2001-01-24  Dekel Tsur  <dekelts@tau.ac.il>

	* MenuBackend.C (expand): Fix the sorting of the formats.

2001-01-24  John Levon  <moz@compsoc.man.ac.uk>

	* lyx_main.C: tiny error message fix

2001-01-24  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyx_gui.C (LyXGUI): force the LC_NUMERIC locale to "C" after
	calling fl_initialize(). This fixes the problem with ',' as
	decimal separator in text files.

2001-01-24  Dekel Tsur  <dekelts@tau.ac.il>

	* trans.C (process): Fix the keymap bug.

2001-01-23  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (scanAuxFiles): New method. Provides support for
	multiple bibliographies (when using the bibtopic/bibunits pacakges).
	(scanLogFile) Scan for "run BibTeX" messages.

	* buffer.C (makeLaTeXFile): Do not load the ae package when using
	OT1 font encoding. Also, load the aecompl package if the ae
	package is loaded.

	* tex-strings.C: Add "ae" to tex_fonts[] (from Matej Cepl).

2001-01-22  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* texrow.C (increasePos): turn two error messages into debug
	messages. 

2001-01-20  Dekel Tsur  <dekelts@tau.ac.il>

	* LaTeX.C (scanAux): Handle the \@input macro.
	(runBibTeX): Use scanAux().

	* language.C (latex_options_): New field.

	* LaTeXFeatures.C (getMacros): Add language macros.

	* buffer.C (makeLaTeXFile): Small fix.

2001-01-19  Jean-Marc Lasgouttes  <Jean-Marc.Lasgouttes@inria.fr>

	* lyxfunc.C: fix the name of the inset for LFUN_CHILDINSERT

	* text2.C: add a using directive.

2000-01-17  John Levon  <moz@compsoc.man.ac.uk>

	* BufferView2.C:
	* lyx_gui_misc.h:
	* lyxfr1.C:
	* lyxfunc.C: kill LyXBell.

2001-01-17  Dekel Tsur  <dekelts@tau.ac.il>

	* text.C (IsBoundary): Remove the error message
	
	* WorkArea.C (work_area_handler): Decrease keyboard purge threshold.

	* lyxrc.C (setDefaults): Correct initialization value for
 	font_norm_type.

2001-01-15  Dekel Tsur  <dekelts@tau.ac.il>

	* BufferView2.C (gotoInset): New method. Replaces gotoNote() and
	gotoError().

	* text2.C (GotoNextInset): New method. Replaces GotoNextError()
	and GotoNextNote().

	* src/LyXAction.C: Added reference-next.

	* text.C (InsertChar): Use contains instead of strchr.

	* lyx_cb.C (MenuInsertLabel): Enable default value code.

2001-01-13  Dekel Tsur  <dekelts@tau.ac.il>

	* paragraph.C (SimpleTeXOnePar) Put \protect before paragraph
	alignment commands (when needed).

	* text.C (InsertChar): Add ':' to number separator chars.
