include $(top_srcdir)/config/common.am

EXTRA_DIST = tex2lyx.man test-structure.tex test-insets.tex
EXTRA_DIST += pch.h

DISTCLEANFILES += tex2lyx.1

#noinst_LTLIBRARIES = libtexparser.la
#
#libtexparser_la_SOURCES = \
#	Parser.cpp \
#	Parser.h
#
#tex2lyx_LDADD = libtexparser.la

man_MANS = tex2lyx.1

bin_PROGRAMS = tex2lyx

DEFAULT_INCLUDES = 

AM_CPPFLAGS += \
	-DTEX2LYX \
	$(PCH_FLAGS) \
	-I$(top_srcdir)/src/tex2lyx \
	-I$(top_srcdir)/src  \
	-I$(top_builddir)/src \
	$(BOOST_INCLUDES)


LINKED_FILES = \
	../FloatList.cpp \
	../Floating.cpp \
	../Counters.cpp \
	../Layout.h \
	../Layout.cpp \
	../TextClass.cpp \
	../TextClass.h \
	../Lexer.cpp 

BUILT_SOURCES = $(PCH_FILE)

tex2lyx_SOURCES = \
	$(LINKED_FILES) \
	Spacing.h \
	boost.cpp \
	Context.cpp \
	Context.h \
	Font.cpp \
	Font.h \
	gettext.cpp \
	lengthcommon.cpp \
	Parser.cpp \
	Parser.h \
	tex2lyx.cpp \
	tex2lyx.h \
	preamble.cpp \
	math.cpp \
	table.cpp \
	text.cpp

tex2lyx_LDADD = \
	$(top_builddir)/src/support/liblyxsupport.la \
	$(top_builddir)/boost/liblyxboost.la \
	$(LIBICONV) @LIBS@

tex2lyx.1:
	cp -p $(srcdir)/tex2lyx.man tex2lyx.1
