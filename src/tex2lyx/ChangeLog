2003-11-18  Georg Baum  <Georg.Baum@post.rwth-aachen.de>

	* tex2lyx.C:
	* tex2lyx.h:
	* text.C: Read a list of commands and their arguments from a reLyX
	compatible syntax file in order to parse optional argumnts correctly.
	* preamble.C:
	* table.C:
	* text.C:
	* tex2lyx.C:
	* texparser.C
	* math.C: change size() to !empty() where it was used as bool

2003-11-03  Georg Baum  <Georg.Baum@post.rwth-aachen.de>

	* math.C:
	* table.C:
	* text.C:
	* context.[Ch]: New functions Context::set_item(),
	Context::new_paragraph(ostream & os) and Context::atParagraphStart()
	to make Context usage more explicit
	* texparser.[Ch]: Rework Parser::tokenize (see comment in texparser.h)
	* table.C:
	* math.C:
	* texparser.C: Don't silently drop comments
	* texparser.C: Token::asInput() does not append a space anymore
	* texparser.[Ch]: Renamed Parser::prev_token() to Parser::curr_token().
	New function Parser::prev_token() returns now really the previous token
	* Context.[Ch]:
	* text.C: Convert known vspaces at paragraph start to \\added_space_top
	* preamble.C: Don't put out newlines twice.
	* text.C: Fix minipage position bug
	* text.C: Fix \labelwidthstring bug
	* text.C: Recognize alignment environments
	* text.C: Fix a few cases of incorrect context usage, resulting
	in missing or superflous \begin_layout / \end_laout lines.

2003-10-23  Georg Baum  <Georg.Baum@post.rwth-aachen.de>

	* math.C:
	* preamble.C:
	* table.C:
	* tex2lyx.C:
	* tex2lyx.h:
	* texparser.C:
	* texparser.h:
	* text.C:
	- add \text{}, \intertext{} and \fbox{} support in mathmode.
	- add support for some math environments like displaymath
	- allow parsing of partial documents (for inclusion with \input).
	- steal commandline switches -c and -f from reLyX to support the
		     previous point
	- add support for lengths with comma (4,5cm instead of 4.5cm) to
		     minipage environments. Handle \textwidth etc. without factor
	- rearrange active_environments.[push,pop]back() so that they are always
	       called in pairs
	- write an error message if layout file could not be found.
	- convert \begin{comment}...\end{comment} to comment inset
	- handle \= correctly inside tabbing environments
	- fix multicolumn vertical rule bug in tables
	- add missing \includegraphics options
	- output minipages with latex lengths as ERT, since lyx cannot handle them
	- recognize \textsl{}
	- remove duplicate \ldots
	- recognize \bibliographystyle and \bibliography
	- handle \psfrag{ps-text}[ps-pos][tex-pos]{tex-text} correctly
	- handle environments in table cells correctly
	- add missing -userdir and -sysdir commandline switches
	- recognize start of appendix
	- handle optional arg to \item as ERT in itemize environment, since LyX
		     does not support it directly

2003-10-18  Lars Gullik Bjønnes  <larsbj@gullik.net>

	* Makefile.am (BUILT_SOURCES): use this instead of "linked_files"
	and the link_files target. make the BUILT_SOURCES dependency
	automatically link the needed files.

2003-10-14  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: move boost.C from the linked_files section
	to the tex2lyx_SOURCES section.

	* boost.C: new file. Simpler than the version in the main lyx source.
	No reference to the emergencyCleanup stuff.

	* tex2lyx.C: remove emergencyCleanup() stuff.

2003-10-08  Angus Leeming  <leeming@lyx.org>

	Fix doxygen warnings.

	* Spacing.h: \file Spacing.h -> \file tex2lyx/Spacing.h
	* gettext.C: \file gettext.C -> \file tex2lyx/gettext.C
	* gettext.h: \file gettext.h -> \file tex2lyx/gettext.h
	* lyxfont.C: \file lyxfont.C -> \file tex2lyx/lyxfont.C
	* lyxfont.h: \file lyxfont.h -> \file tex2lyx/lyxfont.h
	* text.C:    \file text.C    -> \file tex2lyx/text.C

2003-09-26  Lars Gullik Bjønnes  <larsbj@gullik.net>

	* tex2lyx.C: adjust for new debugstream.

2003-09-08  Angus Leeming  <leeming@lyx.org>

	* math.C:
	* preamble.C:
	* table.C:
	* tex2lyx.C:
	* texparser.C: remove redundant using directives.

2003-08-19  Angus Leeming  <leeming@lyx.org>

	* most files: add 'standard conformant' header blurb.
	Also add Jean-Marc as an author where appropriate.

2003-08-08  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* Makefile.am (EXTRA_DIST):
	* test-insets.tex: new file. Describes the insets and special
	characters that tex2lyx handles.

	* text.C (parse_text): support \vref, \vpageref (only one optional
	argument), \prettyref; add support for include inset; when \\ has
	optional arguments, use ERT; support also \listoffigures,
	\listoftables, and \listof{xxx} for existing float types;
	translate lenghts properly for graphics inset.
	(parse_environment): add support for minipages

	* text.C (translate_len): A simple function to translate a latex
	length to something lyx can understand. Not perfect, but rather
	best-effort.

2003-08-07  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (parse_text): special handling for \item and \bibitem
	macros

	* context.C (begin_layout, end_layout, begin_deeper, end_deeper):
	tiny helper functions
	(check_layout):
	(check_end_deeper): add special handling for the case of a normal
	paragraph inside a list-like environment.

	* test-structure.tex: add more stuff there

2003-08-05  Alfredo Braunstein  <abraunst@libero.it>

	* context.h: compile fix

2003-08-05  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C: some tweaks to make nesting work. What still does not
	work is nesting a standard paragraph in a list.

	* test-structure.tex: update a bit

	* context.C (check_deeper, check_end_deeper): new methods to
	handle the *_deeper stuff

	* preamble.C (end_preamble): small tweaks

2003-08-03  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C: update to use Context struct, and more notably:
	(cap, check_layout, check_end_layout): remove
	(parse_text_snippet): new thin wrapper around parse_text, used for
	things like \textrm{...}
	(parse_environment): remove existing depth handling code, which is
	handled transparently by the Context struct; make unknown
	environments work (again?) through ERT

	* test-structure.tex: new test file, used to try out various
	layouts combinations

	* tex2lyx.C:
	* tex2lyx.h:
	* table.C: update to use Context struct

	* context.[Ch]: new helper struct which is passed to parse_*
	functions and handles *_layout and *_deeper tags output

	* Makefile.am (EXTRA_DIST): new file test-structure.tex
	(tex2lyx_SOURCES): add context.[Ch]

2003-07-30  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: Hide the fact that we re-generate those symbolic links
	brainlessly.

2003-07-29  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (check_layout): \layout -> \begin_layout
	(parse_text_in_inset): convenience function

	* tex2lyx.C (main): \the_end -> \end_document

	* preamble.C (end_preamble): update version number to 225

	* text.C (parse_text): replace test on "lyxcode" with test on
	LyXLayout::freespacing.
	(check_end_layout): new function, used to check whether we need to
	add an \end_layout

2003-07-28  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* tex2lyx.C (clean_layouts): remove

	* text.C: output lazily the \layout commands using the
	check_layout function. Remove all explicit \layout tags.
	(parse_text): pass an optional parameter 'layout'
	(handle_par): remove

	* text.C (output_command_layout): renamed from output_layout
	(parse_environment): new method containing a part of parse_text

	* tex2lyx.C:
	* preamble.C:
	* table.C: \begin_layout -> \layout. We are not quite ready for
	that yet

2003-07-28  José Matos  <jamatos@lyx.org>

	* text.C:
	* tex2lyx.C:
	* preamble.C:
	* table.C: \layout -> \begin_layout.

2003-07-28  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (parse_text): read environment from layout file too. Now,
	all layout entries are supported (but many hacks remain); note
	that the nesting support is broken and will have to be completely
	redone
	(parse_text): basic support for english double quotes

	* table.C (handle_tabular): make the output more similar to LyX
	and fix a little

	* text.C (output_layout): fix handling of optional argument
	(parse_text): small tweaks to make output format closer to lyx
	format; support \tableofcontents; fix/improve support for various
	special characters

2003-07-27  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: remove unused graphics_link_files cruft.
	Thanks, Kayvan!

2003-07-27  Angus Leeming  <leeming@lyx.org>

	* tex2lyx.C: add Debug::ANY hack.

	* text.C: remove hardcoded command layouts.

2003-07-26  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (parse_text): fix handling of \LaTeXe macro

2003-07-26  Angus Leeming  <leeming@lyx.org>

	* Spacing.h:
	* lyxfont.[Ch]:
	* gettext.[Ch]: minimal (near empty) analogues of the real LyX
	files; enough to get LyXTextClass and LyXLayout to compile without
	needing to store any real information about Spacing or Font.

	* Makefile.am: add these files above and also include a minimal
	chunk of the main lyx source tree as soft links in order to add in
	LyXTextClass and LyXLayout.

	* .cvsignore: add all these soft links.

	* preamble.C (end_preamble): passed a LyXTextClass arg.
	(parse_preamble): returns the document LyXTextClass.

	* tabular.C (handle_tabular): passed a LyXTextClass arg. In turn
	pass it to parse_text.

	* tex2lyx.C: add some global vars, build_lyxdir et al. For now,
	give them some horrible hard-coded value.
	(main): receive a LyXTextClass var from parse_preamble and pass it
	on to parse_text.

	* text.C (parse_text): receives a LyXTextClass arg. Use it to
	remove the hard-coded handling of floats and instead check the
	textclass for its existence. Also handle wide floats naturally.

	* tex2lyx.h: associated changes to function declarations.

2003-07-18  Lars Gullik Bjønnes  <larsbj@gullik.net>

	* texparser.C (catInit): same warning avoidance as in math_parser.C
	(setCatCode): cast to safe type
	(getCatCode): ditto

2003-05-17  Joao Luis M. Assirati  <assirati@fma.if.usp.br>

	* texparser.C: fix paragraph parsing after comment

2003-04-29  André Pönitz  <poenitz@gmx.net>

	* Makefile.am:
	  texparser.h: whitespace

2003-04-20  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* table.C: use string::erase(), not string::clear() to enable older
	versions of gcc to compile the code.

2003-04-17  André Pönitz  <poenitz@gmx.net>

	* math.C:
	  preamble.C:
	  table.C:
    text.C: new files

	* table.C: better table handling

	* tex2lyx.C: lots of small changes

2003-02-25  Angus Leeming  <leeming@lyx.org>

	* .cvsignore: ignore *.lo and libtexparser.la.

2003-02-20  Angus Leeming  <leeming@lyx.org>

	* tex2lyx.C: swap <sstream> for "Lsstream.h".

2003-02-11  Angus Leeming  <leeming@lyx.org>

	* tex2lyx.C (handle_opt): prevent infinite loop if opts is empty.
	(handle_package): new function, factoring code out of Parser::parse.
	(trim): copied across from support/lstrings.C
	(Parser::parse): handle '\usepackage{foo, bar}'.

2003-02-11  André Pönitz  <poenitz@gmx.net>

	* tex2lyx.C: first shot at real code

2003-02-11  Angus Leeming  <leeming@lyx.org>

	* .cvsignore: new file.

2003-02-10  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: empty, dummy file so that autogen.sh and configure
	are happy.
