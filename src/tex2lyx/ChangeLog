2003-08-03  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C: update to use Context struct, and more notably:
	(cap, check_layout, check_end_layout): remove
	(parse_text_snippet): new thin wrapper around parse_text, used for
	things like \textrm{...}
	(parse_environment): remove existing depth handling code, which is
	handled transparently by the Context struct; make unknown
	environments work (again?) through ERT
	 
	* test-structure.tex: new test file, used to try out various
	layouts combinations

	* tex2lyx.C:
	* tex2lyx.h:
	* table.C: update to use Context struct
	
	* context.[Ch]: new helper struct which is passed to parse_*
	functions and handles *_layout and *_deeper tags output

	* Makefile.am (EXTRA_DIST): new file test-structure.tex
	(tex2lyx_SOURCES): add context.[Ch]

2003-07-30  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: Hide the fact that we re-generate those symbolic links
	brainlessly.

2003-07-29  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (check_layout): \layout -> \begin_layout
	(parse_text_in_inset): convenience function

	* tex2lyx.C (main): \the_end -> \end_document

	* preamble.C (end_preamble): update version number to 225

	* text.C (parse_text): replace test on "lyxcode" with test on
	LyXLayout::freespacing.
	(check_end_layout): new function, used to check whether we need to
	add an \end_layout

2003-07-28  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* tex2lyx.C (clean_layouts): remove

	* text.C: output lazily the \layout commands using the
	check_layout function. Remove all explicit \layout tags.
	(parse_text): pass an optional parameter 'layout'
	(handle_par): remove
	
	* text.C (output_command_layout): renamed from output_layout
	(parse_environment): new method containing a part of parse_text

	* tex2lyx.C:
	* preamble.C:
	* table.C: \begin_layout -> \layout. We are not quite ready for
	that yet

2003-07-28  José Matos  <jamatos@lyx.org>

	* text.C:
	* tex2lyx.C:
	* preamble.C:
	* table.C: \layout -> \begin_layout.

2003-07-28  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (parse_text): read environment from layout file too. Now,
	all layout entries are supported (but many hacks remain); note
	that the nesting support is broken and will have to be completely
	redone
	(parse_text): basic support for english double quotes

	* table.C (handle_tabular): make the output more similar to LyX
	and fix a little

	* text.C (output_layout): fix handling of optional argument
	(parse_text): small tweaks to make output format closer to lyx
	format; support \tableofcontents; fix/improve support for various
	special characters

2003-07-27  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: remove unused graphics_link_files cruft.
	Thanks, Kayvan!

2003-07-27  Angus Leeming  <leeming@lyx.org>

	* tex2lyx.C: add Debug::ANY hack.

	* text.C: remove hardcoded command layouts.

2003-07-26  Jean-Marc Lasgouttes  <lasgouttes@lyx.org>

	* text.C (parse_text): fix handling of \LaTeXe macro

2003-07-26  Angus Leeming  <leeming@lyx.org>

	* Spacing.h:
	* lyxfont.[Ch]:
	* gettext.[Ch]: minimal (near empty) analogues of the real LyX
	files; enough to get LyXTextClass and LyXLayout to compile without
	needing to store any real information about Spacing or Font.

	* Makefile.am: add these files above and also include a minimal
	chunk of the main lyx source tree as soft links in order to add in
	LyXTextClass and LyXLayout.

	* .cvsignore: add all these soft links.

	* preamble.C (end_preamble): passed a LyXTextClass arg.
	(parse_preamble): returns the document LyXTextClass.

	* tabular.C (handle_tabular): passed a LyXTextClass arg. In turn
	pass it to parse_text.

	* tex2lyx.C: add some global vars, build_lyxdir et al. For now,
	give them some horrible hard-coded value.
	(main): receive a LyXTextClass var from parse_preamble and pass it
	on to parse_text.

	* text.C (parse_text): receives a LyXTextClass arg. Use it to
	remove the hard-coded handling of floats and instead check the
	textclass for its existence. Also handle wide floats naturally.

	* tex2lyx.h: associated changes to function declarations.
	
2003-07-18  Lars Gullik Bjønnes  <larsbj@gullik.net>

	* texparser.C (catInit): same warning avoidance as in math_parser.C
	(setCatCode): cast to safe type
	(getCatCode): ditto

2003-05-17  Joao Luis M. Assirati  <assirati@fma.if.usp.br>

	* texparser.C: fix paragraph parsing after comment

2003-04-29  André Pönitz  <poenitz@gmx.net>

	* Makefile.am:
	  texparser.h: whitespace

2003-04-20  Kayvan A. Sylvan  <kayvan@sylvan.com>

	* table.C: use string::erase(), not string::clear() to enable older
	versions of gcc to compile the code.

2003-04-17  André Pönitz  <poenitz@gmx.net>

	* math.C:
	  preamble.C:
	  table.C:
    text.C: new files

	* table.C: better table handling

	* tex2lyx.C: lots of small changes

2003-02-25  Angus Leeming  <leeming@lyx.org>

	* .cvsignore: ignore *.lo and libtexparser.la.

2003-02-20  Angus Leeming  <leeming@lyx.org>

	* tex2lyx.C: swap <sstream> for "Lsstream.h".

2003-02-11  Angus Leeming  <leeming@lyx.org>

	* tex2lyx.C (handle_opt): prevent infinite loop if opts is empty.
	(handle_package): new function, factoring code out of Parser::parse.
	(trim): copied across from support/lstrings.C
	(Parser::parse): handle '\usepackage{foo, bar}'.

2003-02-11  André Pönitz  <poenitz@gmx.net>

	* tex2lyx.C: first shot at real code

2003-02-11  Angus Leeming  <leeming@lyx.org>

	* .cvsignore: new file.

2003-02-10  Angus Leeming  <leeming@lyx.org>

	* Makefile.am: empty, dummy file so that autogen.sh and configure
	are happy.
