LyX file-format changes
-----------------------

2003-07-28  José Matos  <jamatos@lyx.org>

	* \layout is replaced with \begin_layout

2003-07-28  José Matos  <jamatos@fep.up.pt>

	Format bumped to 225

	* All layouts finish now with \end_layout

2003-06-04  Angus Leeming  <leeming@lyx.org>

	Format bumped to 224

	* the storage of the external inset has been changed from

		\begin_inset External XFig,"file.fig",""

		\end_inset

	to this

		\begin_inset External
			template XFig
        		filename file.fig
			display <display_type>
			lyxscale <scale>

		\end_inset 

	throwing away the final arg (here "", more generally "<string>") that holds
	the parameters variable.
	Variables are output if present (filename) or different from the default
	values (display, lyxscale).

	Moreover, the RasterImage template has been scrapped. All RasterImage
	external insets are now converted to Graphics insets.

2003-05-20  Jürgen Spitzmüller  <j.spitzmueller@gmx.de>

	* Added new space insets:
		\SpecialChar ~ is now \InsetSpace ~
		ERT: "\ " could be converted to InsetSpace \<space>
		ERT: "\," could be converted to InsetSpace \,

2003-03-12  John Levon  <levon@movementarian.org>

	* Added \\end_header to signify the end of the header in a
	  more robust fashion.

	* use_amsmath is now a tristate {0 = never, 1 = auto, 2 = always}

2003-02-10  John Levon  <levon@movementarian.org>

	Format bumped to 222

	Added \\tracking_changes 0|1 to the header.

	Added \\author to the header. This can be present multiple
	times, and is of the form :

	\\author "Real Name" email@address.com

	Added \\change_deleted, \\change_inserted. Each of these does not
	span a paragraph, and is delimited by "\\change_unchanged\n". Both are
	of the form :

	\\change_inserted author time

	where author is an integer ID reference into the author list in
	the header, and time is time_t.

2002-10-24  Rob Lahaye  <lahaye@snu.ac.kr>

	* insetgraphicsParams.h (scale): is now a float, not an unsigned int.

2002-08-22  Rob Lahaye <lahaye@snu.ac.kr>

New graphics dialog. With the removal of buttons in the dialog, also
keywords in the graphics inset went. The following keywords do not
exist anymore:
	lyxsize_kind
	lyxsize_type
	lyxwidth
	lyxheight
	size_kind
	size_type
	rotate

Only non-default values are saved to the lyx files. The defaults of the remaining
keywords are;
	filename <empty>
	lyxscale 100
	display default
	scale 100
	width <empty>
	height <empty>
	draft <off>
	noUnzip <off>
	BoundingBox <from file>
	clip <off>
	rotateAngle 0
	rotateOrigin centerBaseline
	subcaption <off>
	subcaptionText <empty>
	special <empty>

The remaining keywords have sufficient overlap with the old ones for a
smooth reading of the 1.2.x inset keywords in most common cases.

Compatibility is certainly broken for the old lyxwidth/lyxheight keywords.
They don't exist anymore and we can't translate them into a scaling value, while
we're reading the graphics inset. The old lyxwidth/lyxheight keyword and its
argument is ignored and lost.

Only few compatibility issues are left for lyx2lyx:

------------------------------------------------------------------------------
old-token                                   new-token         remove
------------------------------------------------------------------------------
size_kind original / size_type 0            scale 100         width <val>
                                                              height <val>
                                                              scale <val>

size_kind width_height / size_type 1            -             scale <val>

lyxsize_kind original / lyxsize_type 0      lyxscale 100      lyxscale <val>
------------------------------------------------------------------------------
[replace old-token by new-token, and remove any of subsequent tokens as listed]

If "rotate" is absent, lyx2lyx should ignore "rotateAngle <val>":
   if ( "rotateAngle <val>" is there WITHOUT being preceded by the keyword "rotate" )
   then
        replace "rotateAngle <val>" by "rotateAngle 0"


2002-08-12  Andre' Poenitz <poenitz@gmx.de>

Added \lyxlock for locked math inset when written to .lyx file.
When "downgrading" .lyx files this should simple be deleted but it
does not hurt at all if it stays in. It does not have to be added
when "upgrading".


2002-08-02  Angus Leeming  <leeming@lyx.org>

Added a boolean "preview" flag to InsetCommandParams.
Currently it is written only by InsetInclude, because only this
class can generate a preview of its contents.

The LyX file now contains:

 \begin_inset Include \input{snapshot_t=40.tex}
+preview true

 \end_inset 

Earlier versions of LyX just swallow this extra token silently.

2002-08-12  Angus Leeming  <leeming@lyx.org>

The 1.2.0 InsetGraphicsParams "size_type" and "lyxsize_type" have been
renamed as "size_kind" and "lyxsize_kind" respectively.

 \begin_inset Graphics FormatVersion 1
 	filename file.eps
 	display default
-	size_kind original
+	size_type original
 	width 7cm
 	rotateOrigin center
-	lyxsize_kind original
+	lyxsize_type original
	lyxwidth 4cm

 \end_inset 

