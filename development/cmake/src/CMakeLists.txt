project(lyx-qt4)

include_directories(${TOP_SRC_DIR}/src)

add_subdirectory(frontends) 
add_subdirectory(graphics) 
add_subdirectory(insets) 
add_subdirectory(mathed) 
add_subdirectory(support) 
#add_subdirectory(tex2lyx) 


configure_file(version.C.cmake ${CMAKE_CURRENT_BINARY_DIR}/version.C)

set(lyx_sources
	Bidi.C
	Bidi.h
	BufferView.C
	BufferView.h
	BufferView_pimpl.C
	BufferView_pimpl.h
	Bullet.C
	Bullet.h
	BranchList.C
	BranchList.h
	Chktex.C
	Chktex.h
	Color.C
	Color.h
	CutAndPaste.C
	CutAndPaste.h
	DepTable.C
	DepTable.h
	FloatList.C
	FloatList.h
	Floating.C
	Floating.h
	FontIterator.C
	FontIterator.h
	FuncStatus.C
	FuncStatus.h
	InsetList.C
	InsetList.h
	LColor.C
	LColor.h
	LaTeX.C
	LaTeX.h
	LaTeXFeatures.C
	LaTeXFeatures.h
	LyXAction.C
	LyXAction.h
	MenuBackend.C
	MenuBackend.h
	ParagraphList.h
	ParagraphList_fwd.h
	ParagraphParameters.C
	ParagraphParameters.h
	PrinterParams.C
	PrinterParams.h
	RowList_fwd.h
	Spacing.C
	Spacing.h
	Thesaurus.C
	Thesaurus.h
	ToolbarBackend.C
	ToolbarBackend.h
	WordLangTuple.h
	author.C
	author.h
	boost.C
	box.h
	box.C
	buffer.C
	buffer.h
	buffer_funcs.C
	buffer_funcs.h
	bufferlist.C
	bufferlist.h
	bufferparams.C
	bufferparams.h
	bufferview_funcs.C
	bufferview_funcs.h
	changes.C
	changes.h
	chset.C
	chset.h
	converter.C
	converter.h
	counters.C
	counters.h
	coordcache.C
	coordcache.h
	cursor.C
	cursor.h
	cursor_slice.C
	cursor_slice.h
	debug.C
	debug.h
	dimension.C
	dimension.h
	dociterator.C
	dociterator.h
	dispatchresult.h
	encoding.C
	encoding.h
	errorlist.C
	errorlist.h
	exporter.C
	exporter.h
	gettext.C
	gettext.h
	factory.h
	factory.C
	format.C
	format.h
	funcrequest.h
	funcrequest.C
	graph.C
	graph.h
	importer.C
	importer.h
	intl.C
	intl.h
	insetiterator.C
	insetiterator.h
	kbmap.C
	kbmap.h
	kbsequence.C
	kbsequence.h
	language.C
	language.h
	session.C
	session.h
	layout.h
	lengthcommon.C
	lengthcommon.h
	lfuns.h
	lyx_cb.C
	lyx_cb.h
	lyx_main.C
	lyx_main.h
	lyx_sty.C
	lyx_sty.h
	lyxfont.C
	lyxfont.h
	lyxfind.C
	lyxfind.h
	lyxfunc.C
	lyxfunc.h
	lyxgluelength.C
	lyxgluelength.h
	lyxlayout.C
	lyxlayout.h
	lyxlayout_ptr_fwd.h
	lyxlength.C
	lyxlength.h
	lyxlex.C
	lyxlex.h
	lyxlex_pimpl.C
	lyxlex_pimpl.h
	lyxrc.C
	lyxrc.h
	lyxrow.C
	lyxrow.h
	lyxrow_funcs.C
	lyxrow_funcs.h
	lyxserver.C
	lyxserver.h
	lyxsocket.C
	lyxsocket.h
	lyxtext.h
	lyxtextclass.C
	lyxtextclass.h
	lyxtextclasslist.C
	lyxtextclasslist.h
	lyxvc.C
	lyxvc.h
	main.C
	messages.C
	messages.h
	metricsinfo.C
	metricsinfo.h
	mover.C
	mover.h
	output.C
	output.h
	outputparams.C
	outputparams.h
	output_docbook.C
	output_docbook.h
	output_latex.C
	output_latex.h
	output_linuxdoc.C
	output_linuxdoc.h
	output_plaintext.C
	output_plaintext.h
	paper.h
	paragraph.C
	paragraph.h
	paragraph_funcs.C
	paragraph_funcs.h
	paragraph_pimpl.C
	paragraph_pimpl.h
	pariterator.C
	pariterator.h
	#$(PSPELL) 
	#$(ISPELL) 
	SpellBase.C
	SpellBase.h
	rowpainter.C
	rowpainter.h
	sgml.C
	sgml.h
	tabular.C
	tabular.h
	tex-accent.C
	tex-accent.h
	tex-strings.C
	tex-strings.h
	texrow.C
	texrow.h
	text.C
	text2.C
	text3.C
	TocBackend.C
	TocBackend.h
	toc.C
	toc.h
	trans.C
	trans.h
	trans_decl.h
	trans_mgr.C
	trans_mgr.h
	undo.C
	undo.h
	vc-backend.C
	vc-backend.h
	version.h
	vspace.C
	vspace.h
)

if(ASPELL_FOUND)
	include_directories(${ASPELL_INCLUDE_DIR})
	set(lyx_sources ${lyx_sources} aspell.C)
endif(ASPELL_FOUND)


lyx_add_path(lyx_sources ${TOP_SRC_DIR}/src)

include_directories(${CMAKE_CURRENT_BINARY_DIR})

add_executable(lyx-qt4 ${lyx_sources} ${CMAKE_CURRENT_BINARY_DIR}/version.C)

target_link_libraries(lyx-qt4 
	mathed
	insets
	frontends
	frontend_qt4
	graphics
	support
	intl
	${QT_QTMAIN_LIBRARY}
	boost_iostreams
)

if(ASPELL_FOUND)
	target_link_libraries(lyx-qt4 ${ASPELL_LIBRARY})
endif(ASPELL_FOUND)
